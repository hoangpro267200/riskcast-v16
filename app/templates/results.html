<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>RISKCAST v12.5 ‚Äî SUPER MODE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- External CSS files -->
    <link rel="stylesheet" href="/static/css/results.css">
    <link rel="stylesheet" href="/static/css/results_v16.css">
    <link rel="stylesheet" href="/static/css/neon_icons.css">
    <link rel="stylesheet" href="/static/css/ai_panel.css">
    <link rel="stylesheet" href="/static/css/neon.css">
    <link rel="stylesheet" href="/static/css/ai_chat.css">
    <link rel="stylesheet" href="/static/css/smart_input_styles.css">
    <link rel="stylesheet" href="/static/css/booking_summary.css">
    <link rel="stylesheet" href="/static/css/summary.css">
    
    <!-- External JS libraries -->
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <script src="/static/js/translations_en.js"></script>
    <script src="/static/js/translations_vi.js"></script>
    <script src="/static/js/common_lang.js"></script>
    <script src="/static/js/results_core.js"></script>
    <script src="/static/js/streaming.js"></script>
    <script src="/static/js/ai_adviser.js"></script>
    <script src="/static/js/logistics_data.js"></script>
    <script src="/static/js/booking_summary.js"></script>
    <script src="/static/js/summary.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="brand">
                    <div class="logo">R</div>
                    <div class="brand-text">
                        <h1>RISKCAST v12.5</h1>
                        <p id="brand-subtitle" data-lang="brand_subtitle">N·ªÅn T·∫£ng Th√¥ng Minh Ph√¢n T√≠ch R·ªßi Ro Logistics ƒê∆∞·ª£c H·ªó Tr·ª£ B·ªüi AI</p>
                    </div>
                </div>
                <div class="header-meta">
                    <div class="lang-switcher">
                        <button class="lang-btn active" data-lang="vi" id="lang-btn-vi">VI</button>
                        <button class="lang-btn" data-lang="en" id="lang-btn-en">EN</button>
                    </div>
                    <div class="chip status">
                        <span class="pulse"></span>
                        <span id="statusText" data-lang="status_ready">Ph√¢n T√≠ch Ho√†n T·∫•t</span>
                    </div>
                    <div class="chip" id="routeChip" data-lang="loading">ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶</div>
                    <div class="chip" id="dateChip" data-lang="loading">ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶</div>
                </div>
            </div>
        </header>

        <div class="tabs">
            <button id="tab-enterprise" class="tab-btn view-tab active">
                <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="13" y="3" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="3" y="13" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="13" y="13" width="8" height="8" stroke="currentColor" stroke-width="2"/></svg></div> <span data-lang="tab_enterprise">Ch·∫ø ƒê·ªô Doanh Nghi·ªáp</span>
            </button>
            <button id="tab-research" class="tab-btn view-tab">
                <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg></div> <span data-lang="tab_research">Ch·∫ø ƒê·ªô Ph√¢n T√≠ch NCKH</span>
            </button>
            <button id="tab-investor" class="tab-btn view-tab">
                <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 21L12 3L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 17L12 11L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div> <span data-lang="tab_investor">Ch·∫ø ƒê·ªô Tr√¨nh B√†y Nh√† ƒê·∫ßu T∆∞</span>
            </button>
        </div>

        <!-- RESULTS LAYOUT: Dashboard -->
        <div class="results-main">
                <!-- ENTERPRISE MODE -->
                <div id="mode-enterprise" class="mode-section">
                    <div id="enterprise" class="panel">
                        <div class="dashboard-container">
                            <!-- T√ìM T·∫ÆT TH√îNG TIN - SUMMARY SECTION -->
                            <section class="summary-section section-block">
                                <div class="summary-header">
                                    <h1 class="summary-title">T√≥m T·∫Øt Th√¥ng Tin</h1>
                                    <button class="realtime-badge">
                                        <span class="pulse-dot"></span>
                                        AI REAL-TIME UPDATED
                                    </button>
                                </div>

                                <div class="summary-content">
                                    <!-- Transport Overview -->
                                    <div class="summary-section-item">
                                        <h2 class="summary-section-title">Transport Overview</h2>
                                        <div class="summary-cards-grid summary-grid-4">
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <path d="M4 7h16M4 12h16M4 17h16" stroke-width="2" stroke-linecap="round"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">TUY·∫æN ƒê∆Ø·ªúNG</div>
                                                    <div class="summary-card-value" id="summary-route">Ch∆∞a ch·ªçn</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <rect x="3" y="8" width="18" height="12" rx="2" stroke-width="2"/>
                                                        <circle cx="7" cy="17" r="2" stroke-width="2"/>
                                                        <circle cx="17" cy="17" r="2" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">PH∆Ø∆†NG TH·ª®C</div>
                                                    <div class="summary-card-value" id="summary-transport-mode">Ch∆∞a ch·ªçn</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke-width="2"/>
                                                        <polyline points="9 22 9 12 15 12 15 22" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">POL / POD</div>
                                                    <div class="summary-card-value" id="summary-pol-pod">Ch∆∞a ch·ªçn</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                                                        <polyline points="12 6 12 12 16 14" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">KHO·∫¢NG C√ÅCH</div>
                                                    <div class="summary-card-value" id="summary-distance">-- km</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card highlight">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                                                        <polyline points="12 6 12 12 16 14" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">TH·ªúI GIAN</div>
                                                    <div class="summary-card-value highlight-value" id="summary-transit-time-highlight">-- ng√†y</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Container & Cargo Details -->
                                    <div class="summary-section-item">
                                        <h2 class="summary-section-title">Container & Cargo Details</h2>
                                        <div class="summary-cards-grid summary-grid-4">
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">LO·∫†I H√ÄNG</div>
                                                    <div class="summary-card-value" id="summary-cargo">Ch∆∞a ch·ªçn</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <rect x="3" y="6" width="18" height="12" rx="2" stroke-width="2"/>
                                                        <path d="M3 10h18" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">LO·∫†I CONTAINER</div>
                                                    <div class="summary-card-value" id="summary-container">Ch∆∞a ch·ªçn</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <path d="M4 7h16M4 12h16M4 17h16" stroke-width="2" stroke-linecap="round"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">INCOTERM</div>
                                                    <div class="summary-card-value" id="summary-incoterm">Ch∆∞a ch·ªçn</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <rect x="3" y="6" width="18" height="12" rx="2" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">CH·∫§T L∆Ø·ª¢NG ƒê√ìNG G√ìI</div>
                                                    <div class="summary-card-value" id="summary-packaging">Ch∆∞a ch·ªçn</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card highlight border-glow">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <rect x="3" y="6" width="18" height="12" rx="2" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">ƒê·ªò PH√ô H·ª¢P CONTAINER</div>
                                                    <div class="summary-card-value highlight-value" id="summary-container-match">--/10</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Carrier -->
                                    <div class="summary-section-item">
                                        <h2 class="summary-section-title">Carrier</h2>
                                        <div class="summary-carrier-card">
                                            <div class="summary-carrier-info">
                                                <div class="summary-carrier-logo" id="summary-carrier-logo">--</div>
                                                <div class="summary-carrier-details">
                                                    <div class="summary-carrier-name" id="summary-carrier">Ch∆∞a ch·ªçn</div>
                                                    <div class="summary-carrier-rating">
                                                        <div class="summary-stars" id="summary-carrier-rating-stars">
                                                            <span class="summary-star">‚òÜ</span>
                                                            <span class="summary-star">‚òÜ</span>
                                                            <span class="summary-star">‚òÜ</span>
                                                            <span class="summary-star">‚òÜ</span>
                                                            <span class="summary-star">‚òÜ</span>
                                                        </div>
                                                        <span class="summary-rating-value" id="summary-carrier-rating-value">3.0</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Shipment Milestones -->
                                    <div class="summary-section-item">
                                        <h2 class="summary-section-title">Shipment Milestones</h2>
                                        <div class="summary-cards-grid summary-grid-4">
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <path d="M4 7h16M4 12h16M4 17h16" stroke-width="2" stroke-linecap="round"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">S·ªê L∆Ø·ª¢NG KI·ªÜN</div>
                                                    <div class="summary-card-value" id="summary-packages">-- ƒë∆°n v·ªã</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <path d="M12 2L2 7l10 5 10-5-10-5z" stroke-width="2"/>
                                                        <path d="M2 17l10 5 10-5M2 12l10 5 10-5" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">GI√Å TR·ªä H√ÄNG</div>
                                                    <div class="summary-card-value" id="summary-cargo-value">-- USD</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="2"/>
                                                        <line x1="16" y1="2" x2="16" y2="6" stroke-width="2"/>
                                                        <line x1="8" y1="2" x2="8" y2="6" stroke-width="2"/>
                                                        <line x1="3" y1="10" x2="21" y2="10" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">ETD</div>
                                                    <div class="summary-card-value" id="summary-etd">--</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="2"/>
                                                        <line x1="16" y1="2" x2="16" y2="6" stroke-width="2"/>
                                                        <line x1="8" y1="2" x2="8" y2="6" stroke-width="2"/>
                                                        <line x1="3" y1="10" x2="21" y2="10" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">ETA</div>
                                                    <div class="summary-card-value" id="summary-eta">--</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card highlight border-glow">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                                                        <polyline points="12 6 12 12 16 14" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">TRANSIT TIME</div>
                                                    <div class="summary-card-value highlight-value" id="summary-transit-time">-- ng√†y</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Parties -->
                                    <div class="summary-section-item">
                                        <h2 class="summary-section-title">Parties</h2>
                                        <div class="summary-cards-grid summary-grid-2">
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke-width="2"/>
                                                        <circle cx="12" cy="7" r="4" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">NG∆Ø·ªúI B√ÅN</div>
                                                    <div class="summary-card-value" id="summary-seller">Ch∆∞a nh·∫≠p</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke-width="2"/>
                                                        <circle cx="12" cy="7" r="4" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">NG∆Ø·ªúI MUA</div>
                                                    <div class="summary-card-value" id="summary-buyer">Ch∆∞a nh·∫≠p</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Weather & ESG -->
                                    <div class="summary-section-item">
                                        <h2 class="summary-section-title">Weather & ESG</h2>
                                        <div class="summary-cards-grid summary-grid-4">
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <circle cx="12" cy="12" r="5" stroke-width="2"/>
                                                        <line x1="12" y1="1" x2="12" y2="3" stroke-width="2"/>
                                                        <line x1="12" y1="21" x2="12" y2="23" stroke-width="2"/>
                                                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke-width="2"/>
                                                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke-width="2"/>
                                                        <line x1="1" y1="12" x2="3" y2="12" stroke-width="2"/>
                                                        <line x1="21" y1="12" x2="23" y2="12" stroke-width="2"/>
                                                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke-width="2"/>
                                                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">ENSO</div>
                                                    <div class="summary-card-value" id="summary-enso">--</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">D·ª∞ B√ÅO B√ÉO</div>
                                                    <div class="summary-card-value" id="summary-storms">--</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <circle cx="12" cy="12" r="5" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">CLIMATE PRESSURE</div>
                                                    <div class="summary-card-value" id="summary-climate-stress">--/10</div>
                                                </div>
                                            </div>
                                            <div class="summary-info-card">
                                                <div class="summary-card-icon">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                                <div class="summary-card-content">
                                                    <div class="summary-card-label">ESG SCORE</div>
                                                    <div class="summary-card-value" id="summary-esg">--/100</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Executive Overview Section -->
                            <section id="executive_overview" class="card-section section-block overview-risk">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="section-title card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 21L12 3L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 17L12 11L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div> <span data-lang="section_executive">T·ªïng Quan ƒêi·ªÅu H√†nh</span></h2>
                                        <span class="card-badge" data-lang="tab_enterprise">Ch·∫ø ƒê·ªô Doanh Nghi·ªáp</span>
                                    </div>
                                    <div class="section-content">
                                    <div class="grid-4">
                                        <div class="kpi-card">
                                            <div class="kpi-label" id="label-overall-risk" data-lang="label_overall_risk">Ch·ªâ s·ªë r·ªßi ro t·ªïng h·ª£p</div>
                                            <div class="kpi-value" id="overall-risk-index">--</div>
                                            <div class="kpi-subtitle" id="risk-level-label">--</div>
                                        </div>
                                        <div class="kpi-card">
                                            <div class="kpi-label" id="label-expected-loss" data-lang="label_expected_loss">T·ªïn th·∫•t k·ª≥ v·ªçng</div>
                                            <div class="kpi-value" id="expected-loss">--</div>
                                            <div class="kpi-subtitle" data-lang="subtitle_per_shipment">M·ªói l√¥ h√†ng</div>
                                        </div>
                                        <div class="kpi-card">
                                            <div class="kpi-label" id="label-reliability" data-lang="label_reliability">ƒê·ªô tin c·∫≠y giao h√†ng</div>
                                            <div class="kpi-value" id="reliability-score">--</div>
                                            <div class="kpi-subtitle" data-lang="subtitle_on_time_prob">X√°c su·∫•t ƒë√∫ng h·∫°n</div>
                                        </div>
                                        <div class="kpi-card">
                                            <div class="kpi-label" id="label-esg" data-lang="label_esg">ƒêi·ªÉm ESG (M√¥i tr∆∞·ªùng ‚Äì X√£ h·ªôi ‚Äì Qu·∫£n tr·ªã)</div>
                                            <div class="kpi-value" id="esg-score">--</div>
                                            <div class="kpi-subtitle" data-lang="subtitle_climate_political">Kh√≠ h·∫≠u + Ch√≠nh tr·ªã</div>
                                        </div>
                                    </div>
                                    
                                    <!-- NEW KPI CARDS: Advanced Parameters -->
                                    <div class="grid-4" style="margin-top: 24px;">
                                        <!-- Climate Hazard Index (NEW) -->
                                        <div class="kpi-card climate-card">
                                            <div class="kpi-label">Climate Hazard Index (CHI)</div>
                                            <div class="kpi-value" id="climate-hazard-index">--</div>
                                            <div class="kpi-subtitle">v14.5 Climate Risk</div>
                                        </div>
                                        
                                        <!-- Distance (NEW) -->
                                        <div class="kpi-card">
                                            <div class="kpi-label">Transport Distance</div>
                                            <div class="kpi-value" id="transport-distance">--</div>
                                            <div class="kpi-subtitle">kilometers</div>
                                        </div>
                                        
                                        <!-- Route Complexity (NEW) -->
                                        <div class="kpi-card">
                                            <div class="kpi-label">Route Complexity</div>
                                            <div class="kpi-value" id="route-complexity">--</div>
                                            <div class="kpi-subtitle">Based on route type</div>
                                        </div>
                                        
                                        <!-- Carrier Quality (NEW) -->
                                        <div class="kpi-card">
                                            <div class="kpi-label">Carrier Rating</div>
                                            <div class="kpi-value" id="carrier-rating-display">--</div>
                                            <div class="kpi-subtitle">Service quality (1-5 ‚≠ê)</div>
                                        </div>
                                    </div>
                                    
                                    <ul class="insight-list" style="margin-top: 24px;">
                                        <li><strong id="label-top-route" data-lang="label_top_route">R·ªßi ro tuy·∫øn v·∫≠n t·∫£i l·ªõn nh·∫•t:</strong> <span id="top-route-risk">--</span></li>
                                        <li><strong id="label-main-driver" data-lang="label_main_driver">Nguy√™n nh√¢n ch√≠nh:</strong> <span id="main-driver">--</span></li>
                                        <li><strong id="label-recommendation" data-lang="label_recommendation">Khuy·∫øn ngh·ªã c·ªßa h·ªá th·ªëng:</strong> <span id="recommendation">--</span></li>
                                    </ul>
                                    </div>
                                </div>
                            </section>

                    <!-- CLIMATE-VAR METRICS SECTION (NEW) -->
                    <section class="section-block climate-var-section">
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card">
                                        <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                            <path d="M3 21L12 3L21 21" stroke="currentColor" stroke-width="2"/>
                                            <path d="M12 9V13M12 17H12.01" stroke="currentColor" stroke-width="2"/>
                                        </svg>
                                    </div>
                                    <span>Climate-Adjusted Risk Metrics (v14.5)</span>
                                </h2>
                                <span class="card-badge climate-badge">Fat-Tailed Distribution</span>
                            </div>

                            <div class="grid-3" style="margin-bottom: 32px;">
                                <div class="climate-var-card">
                                    <div class="var-icon">üìä</div>
                                    <div class="var-label">Climate-Adjusted VaR 95%</div>
                                    <div class="var-value" id="climate-var-95-value">--</div>
                                    <div class="var-subtitle">Risk score adjusted for climate</div>
                                </div>

                                <div class="climate-var-card">
                                    <div class="var-icon">‚ö°</div>
                                    <div class="var-label">Climate-Adjusted CVaR 95%</div>
                                    <div class="var-value" id="climate-cvar-95-value">--</div>
                                    <div class="var-subtitle">Expected shortfall with climate</div>
                                </div>

                                <div class="climate-var-card">
                                    <div class="var-icon">üå™Ô∏è</div>
                                    <div class="var-label">Climate Tail Probability</div>
                                    <div class="var-value" id="climate-tail-prob-value">--</div>
                                    <div class="var-subtitle">Extreme event likelihood</div>
                                </div>
                            </div>

                            <div style="margin-top: 32px;">
                                <h3 class="chart-title">Climate Impact Comparison</h3>
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Metric</th>
                        ...
                            <!-- SECTION 2: ADVANCED RISK PARAMETERS VISUALIZATION -->
                            <section class="section-block">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">
                                                <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Ph√¢n T√≠ch Tham S·ªë R·ªßi Ro N√¢ng Cao</span>
                                        </h2>
                                        <span class="card-badge">v14.0 Enhanced</span>
                                    </div>
                                    
                                    <!-- Advanced Parameters Grid -->
                                    <div class="grid-3" style="margin-bottom: 32px;">
                                        <!-- Weather Risk Card -->
                                        <div class="param-card weather-card">
                                            <div class="param-icon">üå¶Ô∏è</div>
                                            <div class="param-label">Weather Risk Score</div>
                                            <div class="param-value" id="weather-risk-value">--</div>
                                            <div class="param-progress">
                                                <div class="param-progress-bar" id="weather-risk-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="param-description" id="weather-risk-desc">--</div>
                                        </div>
                                        
                                        <!-- Port Risk Card -->
                                        <div class="param-card port-card">
                                            <div class="param-icon">‚öì</div>
                                            <div class="param-label">Port Risk Score</div>
                                            <div class="param-value" id="port-risk-value">--</div>
                                            <div class="param-progress">
                                                <div class="param-progress-bar" id="port-risk-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="param-description" id="port-risk-desc">--</div>
                                        </div>
                                        
                                        <!-- Container Match Card -->
                                        <div class="param-card container-card">
                                            <div class="param-icon">üì¶</div>
                                            <div class="param-label">Container Match Quality</div>
                                            <div class="param-value" id="container-match-value">--</div>
                                            <div class="param-progress">
                                                <div class="param-progress-bar" id="container-match-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="param-description" id="container-match-desc">--</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Advanced Radar Chart -->
                                    <div class="chart-container">
                                        <h3 class="chart-title">8-Dimensional Risk Profile (Including Advanced Parameters)</h3>
                                        <div id="advancedRadarChart" style="height: 400px;"></div>
                                    </div>
                                </div>
                            </section>

                            <!-- SECTION 3: CLIMATE RISK ANALYSIS v14.5 -->
                            <section class="section-block climate-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">
                                                <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                                    <path d="M3 15C3 17.8284 4.23858 20.3569 6.25 22C8.26142 20.3569 9.5 17.8284 9.5 15C9.5 12.1716 8.26142 9.64309 6.25 8C4.23858 9.64309 3 12.1716 3 15Z" stroke="currentColor" stroke-width="2"/>
                                                    <path d="M14 15C14 17.8284 15.2386 20.3569 17.25 22C19.2614 20.3569 20.5 17.8284 20.5 15C20.5 12.1716 19.2614 9.64309 17.25 8C15.2386 9.64309 14 12.1716 14 15Z" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Climate Risk Analysis v14.5</span>
                                        </h2>
                                        <span class="card-badge climate-badge">NOAA/NASA Data Integration</span>
                                    </div>
                                    
                                    <!-- Climate Hazard Index Hero -->
                                    <div class="climate-hero">
                                        <div class="climate-hero-value" id="chi-hero-value">--</div>
                                        <div class="climate-hero-label">Climate Hazard Index (CHI)</div>
                                        <div class="climate-hero-subtitle">Composite score: ENSO + Typhoon + SST + Port Stress</div>
                                    </div>
                                    
                                    <!-- Climate Metrics Grid -->
                                    <div class="grid-4" style="margin-top: 32px;">
                                        <div class="climate-metric">
                                            <div class="metric-icon">üåä</div>
                                            <div class="metric-label">ENSO Index</div>
                                            <div class="metric-value" id="enso-index-value">--</div>
                                            <div class="metric-bar">
                                                <div class="metric-bar-fill" id="enso-bar" style="width: 50%;"></div>
                                            </div>
                                            <div class="metric-status" id="enso-status">--</div>
                                        </div>
                                        
                                        <div class="climate-metric">
                                            <div class="metric-icon">üåÄ</div>
                                            <div class="metric-label">Typhoon Frequency</div>
                                            <div class="metric-value" id="typhoon-freq-value">--</div>
                                            <div class="metric-bar">
                                                <div class="metric-bar-fill" id="typhoon-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="metric-status" id="typhoon-status">--</div>
                                        </div>
                                        
                                        <div class="climate-metric">
                                            <div class="metric-icon">üå°Ô∏è</div>
                                            <div class="metric-label">SST Anomaly</div>
                                            <div class="metric-value" id="sst-anomaly-value">--</div>
                                            <div class="metric-bar">
                                                <div class="metric-bar-fill" id="sst-bar" style="width: 50%;"></div>
                                            </div>
                                            <div class="metric-status" id="sst-status">--</div>
                                        </div>
                                        
                                        <div class="climate-metric">
                                            <div class="metric-icon">‚ö°</div>
                                            <div class="metric-label">Climate Volatility</div>
                                            <div class="metric-value" id="climate-volatility-value">--</div>
                                            <div class="metric-bar">
                                                <div class="metric-bar-fill" id="volatility-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="metric-status" id="volatility-status">--</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Climate Timeline Chart -->
                                    <div class="chart-container" style="margin-top: 32px;">
                                        <h3 class="chart-title">30-Day Climate Risk Forecast</h3>
                                        <div id="climateTimelineChart" style="height: 350px;"></div>
                                    </div>
                                    
                                    <!-- Climate Risk Table -->
                                    <div style="margin-top: 32px;">
                                        <h3 class="chart-title">Climate Risk Breakdown</h3>
                                        <table class="data-table">
                                            <thead>
                                                <tr>
                                                    <th>Parameter</th>
                                                    <th>Current Value</th>
                                                    <th>Risk Level</th>
                                                    <th>Impact on Shipment</th>
                                                </tr>
                                            </thead>
                                            <tbody id="climate-risk-table-body">
                                                <!-- Populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                    </section>

                    <!-- Risk Gauges Overview -->
                            <section class="section-block">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 6V12L16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 2L14 8L20 8L15 12L17 18L12 15L7 18L9 12L4 8L10 8Z" stroke="currentColor" stroke-width="1.5" fill="none"/></svg></div> <span data-lang="section_risk_gauges">T·ªïng Quan ƒê·ªìng H·ªì R·ªßi Ro</span></h2>
                                    </div>
                                    <div class="grid-3">
                                        <div class="chart-container gauge-container">
                                            <div id="gaugeRisk"></div>
                                        </div>
                                        <div class="chart-container gauge-container">
                                            <div id="gaugeReliability"></div>
                                        </div>
                                        <div class="chart-container gauge-container">
                                            <div id="gaugeEsg"></div>
                                        </div>
                                    </div>
                                    <div id="gauge-explanation" class="gauge-explanation-panel"></div>
                                </div>
                            </section>

                            <!-- ENHANCED PRIORITY PROFILE SECTION -->
                            <section class="section-block priority-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">
                                                <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                                    <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Priority Profile Analysis</span>
                                        </h2>
                                        <span class="card-badge">Speed-Cost-Risk Tradeoff</span>
                                    </div>
                                    
                                    <!-- Priority Description -->
                                    <div class="priority-description">
                                        <p>Ph√¢n t√≠ch n√†y cho th·∫•y c√°ch doanh nghi·ªáp c√¢n b·∫±ng gi·ªØa 3 y·∫øu t·ªë quan tr·ªçng: 
                                        <strong style="color: #3b82f6;">T·ªëc ƒë·ªô giao h√†ng</strong>, 
                                        <strong style="color: #fbbf24;">Chi ph√≠ v·∫≠n chuy·ªÉn</strong>, v√† 
                                        <strong style="color: #ef4444;">Kh·∫£ nƒÉng ch·∫•p nh·∫≠n r·ªßi ro</strong>.</p>
                                    </div>
                                    
                                    <!-- 3 Gauges Grid -->
                                    <div class="priority-gauges-grid">
                                        <div class="priority-gauge-box">
                                            <div id="gaugeSpeed"></div>
                                            <div class="gauge-label">
                                                <div class="gauge-title">Speed Priority</div>
                                                <div class="gauge-desc">∆Øu ti√™n th·ªùi gian giao h√†ng</div>
                                            </div>
                                        </div>
                                        
                                        <div class="priority-gauge-box">
                                            <div id="gaugeCost"></div>
                                            <div class="gauge-label">
                                                <div class="gauge-title">Cost Priority</div>
                                                <div class="gauge-desc">∆Øu ti√™n ti·∫øt ki·ªám chi ph√≠</div>
                                            </div>
                                        </div>
                                        
                                        <div class="priority-gauge-box">
                                            <div id="gaugeRiskTolerance"></div>
                                            <div class="gauge-label">
                                                <div class="gauge-title">Risk Tolerance</div>
                                                <div class="gauge-desc">Kh·∫£ nƒÉng ch·∫•p nh·∫≠n r·ªßi ro</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Priority Explanation Cards -->
                                    <div class="grid-3" style="margin-top: 32px;">
                                        <div class="priority-explanation-card speed-card">
                                            <div class="exp-icon">‚ö°</div>
                                            <h4>Speed Strategy</h4>
                                            <div class="exp-weight" id="speed-weight-display">--</div>
                                            <p class="exp-text" id="speed-explanation">--</p>
                                        </div>
                                        
                                        <div class="priority-explanation-card cost-card">
                                            <div class="exp-icon">üí∞</div>
                                            <h4>Cost Strategy</h4>
                                            <div class="exp-weight" id="cost-weight-display">--</div>
                                            <p class="exp-text" id="cost-explanation">--</p>
                                        </div>
                                        
                                        <div class="priority-explanation-card risk-card">
                                            <div class="exp-icon">üõ°Ô∏è</div>
                                            <h4>Risk Strategy</h4>
                                            <div class="exp-weight" id="risk-weight-display">--</div>
                                            <p class="exp-text" id="risk-explanation">--</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Recommendation Based on Priority -->
                                    <div class="priority-recommendation">
                                        <h4 style="color: var(--accent-green); margin-bottom: 12px;">üí° Khuy·∫øn Ngh·ªã D·ª±a Tr√™n H·ªì S∆° ∆Øu Ti√™n</h4>
                                        <p id="priority-recommendation-text">--</p>
                                    </div>
                                    
                                    <!-- ============================================================
                                         V16.0: PRIORITY ALIGNMENT ANALYSIS (ENHANCEMENT)
                                         ============================================================ -->
                                    <div class="priority-alignment-card" style="margin-top: 32px;">
                                        <h4 class="section-subtitle">
                                            <span class="icon-badge">üéØ</span>
                                            Priority Alignment Analysis
                                        </h4>
                                        
                                        <div class="alignment-score-display">
                                            <div class="score-circle" id="alignment-score-circle">
                                                <div class="score-value" id="alignment-score">--</div>
                                                <div class="score-label">/100</div>
                                            </div>
                                            <div class="score-meta">
                                                <div class="score-title">Alignment Score</div>
                                                <div class="score-desc" id="alignment-desc">--</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Current vs Target Distribution -->
                                        <div class="distribution-comparison">
                                            <h5>Current vs Target Distribution</h5>
                                            <div class="comparison-grid">
                                                <div class="comparison-item">
                                                    <span class="label">Speed Priority</span>
                                                    <div class="comparison-bars">
                                                        <div class="bar current" id="speed-current-bar" style="width: 0%;">
                                                            <span id="speed-current-text">0%</span>
                                                        </div>
                                                        <div class="bar target" id="speed-target-bar" style="width: 0%;">
                                                            <span id="speed-target-text">Target: 0%</span>
                                                        </div>
                                                    </div>
                                                    <span class="delta" id="speed-delta">Œî 0%</span>
                                                </div>
                                                
                                                <div class="comparison-item">
                                                    <span class="label">Cost Priority</span>
                                                    <div class="comparison-bars">
                                                        <div class="bar current" id="cost-current-bar" style="width: 0%;">
                                                            <span id="cost-current-text">0%</span>
                                                        </div>
                                                        <div class="bar target" id="cost-target-bar" style="width: 0%;">
                                                            <span id="cost-target-text">Target: 0%</span>
                                                        </div>
                                                    </div>
                                                    <span class="delta" id="cost-delta">Œî 0%</span>
                                                </div>
                                                
                                                <div class="comparison-item">
                                                    <span class="label">Risk Priority</span>
                                                    <div class="comparison-bars">
                                                        <div class="bar current" id="risk-current-bar" style="width: 0%;">
                                                            <span id="risk-current-text">0%</span>
                                                        </div>
                                                        <div class="bar target" id="risk-target-bar" style="width: 0%;">
                                                            <span id="risk-target-text">Target: 0%</span>
                                                        </div>
                                                    </div>
                                                    <span class="delta" id="risk-delta">Œî 0%</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Misalignments Alert -->
                                        <div class="misalignments-alert" id="misalignments-container" style="display: none;">
                                            <!-- Populated if misalignments exist -->
                                        </div>
                                        
                                        <!-- Suggestions -->
                                        <div class="alignment-suggestions" style="margin-top: 24px;">
                                            <h5>üí° Suggestions to Improve Alignment</h5>
                                            <ul id="alignment-suggestions-list">
                                                <!-- Populated by JS -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- ============================================================
                                 V16.0: CARRIER INTELLIGENCE ANALYSIS
                                 ============================================================ -->
                            <section class="section-block carrier-intelligence-section" id="carrier-intelligence-section" style="display: none;">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">üö¢</div>
                                            <span>Carrier Intelligence Analysis (v16.0)</span>
                                        </h2>
                                        <span class="card-badge">AI-Powered Reputation Scoring</span>
                                    </div>
                                    
                                    <!-- Carrier Performance Dashboard -->
                                    <div class="carrier-dashboard">
                                        <div class="carrier-hero-card">
                                            <div class="carrier-logo" id="carrier-logo-display">
                                                <!-- Dynamic carrier logo -->
                                            </div>
                                            <div class="carrier-meta">
                                                <h3 id="carrier-name-display">--</h3>
                                                <div class="carrier-tier-badge" id="carrier-tier-badge">
                                                    <span class="tier-icon">üèÜ</span>
                                                    <span id="carrier-tier-text">--</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- 4-Metric Grid -->
                                        <div class="grid-4">
                                            <div class="carrier-metric-card">
                                                <div class="metric-icon">‚≠ê</div>
                                                <div class="metric-label">Reputation Grade</div>
                                                <div class="metric-value grade" id="carrier-grade-value">--</div>
                                                <div class="metric-subtitle" id="carrier-grade-desc">--</div>
                                            </div>
                                            
                                            <div class="carrier-metric-card">
                                                <div class="metric-icon">üéØ</div>
                                                <div class="metric-label">Reliability Score</div>
                                                <div class="metric-value" id="carrier-reliability-value">--/10</div>
                                                <div class="metric-progress">
                                                    <div class="progress-fill" id="carrier-reliability-bar" style="width: 0%;"></div>
                                                </div>
                                            </div>
                                            
                                            <div class="carrier-metric-card">
                                                <div class="metric-icon">üìà</div>
                                                <div class="metric-label">On-Time Performance</div>
                                                <div class="metric-value" id="carrier-ontime-value">--%</div>
                                                <div class="metric-subtitle" id="carrier-ontime-subtitle">vs 89% industry avg</div>
                                            </div>
                                            
                                            <div class="carrier-metric-card risk">
                                                <div class="metric-icon">‚ö†Ô∏è</div>
                                                <div class="metric-label">Carrier Risk Score</div>
                                                <div class="metric-value" id="carrier-risk-value">--/10</div>
                                                <div class="metric-subtitle">Lower = Better</div>
                                            </div>
                                        </div>
                                        
                                        <!-- Strengths & Risk Factors -->
                                        <div class="grid-2" style="margin-top: 24px;">
                                            <div class="strength-factors-card">
                                                <h4 class="section-subtitle">
                                                    <span class="icon-badge">‚úÖ</span>
                                                    Strengths
                                                </h4>
                                                <ul class="factor-list strengths" id="carrier-strengths-list">
                                                    <!-- Populated by JS -->
                                                </ul>
                                            </div>
                                            
                                            <div class="risk-factors-card">
                                                <h4 class="section-subtitle">
                                                    <span class="icon-badge">‚ö†Ô∏è</span>
                                                    Risk Factors
                                                </h4>
                                                <ul class="factor-list risks" id="carrier-risks-list">
                                                    <!-- Populated by JS -->
                                                </ul>
                                            </div>
                                        </div>
                                        
                                        <!-- Alternative Carriers -->
                                        <div class="carrier-alternatives" style="margin-top: 32px;">
                                            <h4 class="section-subtitle">
                                                <span class="icon-badge">üîÑ</span>
                                                Alternative Carriers
                                            </h4>
                                            <div class="alternatives-grid" id="carrier-alternatives-grid">
                                                <!-- Populated by JS -->
                                            </div>
                                        </div>
                                        
                                        <!-- Carrier Performance Radar Chart -->
                                        <div style="margin-top: 32px;">
                                            <h3 class="chart-title">Carrier Performance Radar</h3>
                                            <div id="carrierRadarChart" style="height: 400px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- ============================================================
                                 V16.0: PORT-SPECIFIC RISK ANALYSIS
                                 ============================================================ -->
                            <section class="section-block port-analysis-section" id="port-analysis-section" style="display: none;">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">‚öì</div>
                                            <span>Port-Specific Risk Analysis (v16.0)</span>
                                        </h2>
                                        <span class="card-badge">Real-Time Congestion Data</span>
                                    </div>
                                    
                                    <!-- Port Comparison Grid -->
                                    <div class="grid-2">
                                        <!-- POL (Port of Loading) -->
                                        <div class="port-risk-card pol-card">
                                            <div class="port-header">
                                                <div class="port-icon">üö¢</div>
                                                <div>
                                                    <h3>Port of Loading (POL)</h3>
                                                    <div class="port-code" id="pol-code-display">--</div>
                                                    <div class="port-name" id="pol-name-display">--</div>
                                                </div>
                                            </div>
                                            
                                            <div class="port-risk-score">
                                                <div class="risk-gauge">
                                                    <div class="gauge-fill" id="pol-risk-gauge" style="width: 0%;"></div>
                                                </div>
                                                <div class="risk-value" id="pol-risk-value">--/10</div>
                                                <div class="risk-level-badge" id="pol-risk-level">--</div>
                                            </div>
                                            
                                            <div class="port-metrics-grid">
                                                <div class="port-metric">
                                                    <span class="metric-label">Congestion Level</span>
                                                    <span class="metric-value" id="pol-congestion">--/10</span>
                                                </div>
                                                <div class="port-metric">
                                                    <span class="metric-label">Efficiency Rating</span>
                                                    <span class="metric-value" id="pol-efficiency">--/10</span>
                                                </div>
                                                <div class="port-metric highlight">
                                                    <span class="metric-label">Expected Delay</span>
                                                    <span class="metric-value" id="pol-delay">-- days</span>
                                                </div>
                                            </div>
                                            
                                            <div class="port-recommendations">
                                                <h4>üéØ Recommendations</h4>
                                                <ul id="pol-recommendations-list">
                                                    <!-- Populated by JS -->
                                                </ul>
                                            </div>
                                        </div>
                                        
                                        <!-- POD (Port of Discharge) -->
                                        <div class="port-risk-card pod-card">
                                            <div class="port-header">
                                                <div class="port-icon">üè≠</div>
                                                <div>
                                                    <h3>Port of Discharge (POD)</h3>
                                                    <div class="port-code" id="pod-code-display">--</div>
                                                    <div class="port-name" id="pod-name-display">--</div>
                                                </div>
                                            </div>
                                            
                                            <div class="port-risk-score">
                                                <div class="risk-gauge">
                                                    <div class="gauge-fill" id="pod-risk-gauge" style="width: 0%;"></div>
                                                </div>
                                                <div class="risk-value" id="pod-risk-value">--/10</div>
                                                <div class="risk-level-badge" id="pod-risk-level">--</div>
                                            </div>
                                            
                                            <div class="port-metrics-grid">
                                                <div class="port-metric">
                                                    <span class="metric-label">Congestion Level</span>
                                                    <span class="metric-value" id="pod-congestion">--/10</span>
                                                </div>
                                                <div class="port-metric">
                                                    <span class="metric-label">Customs Complexity</span>
                                                    <span class="metric-value" id="pod-customs">--/10</span>
                                                </div>
                                                <div class="port-metric highlight">
                                                    <span class="metric-label">Expected Delay</span>
                                                    <span class="metric-value" id="pod-delay">-- days</span>
                                                </div>
                                            </div>
                                            
                                            <div class="port-recommendations">
                                                <h4>üéØ Recommendations</h4>
                                                <ul id="pod-recommendations-list">
                                                    <!-- Populated by JS -->
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Port Timeline Comparison -->
                                    <div style="margin-top: 32px;">
                                        <h3 class="chart-title">Port Delay Timeline</h3>
                                        <div id="portTimelineChart" style="height: 300px;"></div>
                                    </div>
                                </div>
                            </section>

                            <!-- ============================================================
                                 V16.0: PACKING EFFICIENCY ANALYSIS
                                 ============================================================ -->
                            <section class="section-block packing-efficiency-section" id="packing-efficiency-section" style="display: none;">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">üì¶</div>
                                            <span>Packing Efficiency Analysis (v16.0)</span>
                                        </h2>
                                        <span class="card-badge">Cost Optimization</span>
                                    </div>
                                    
                                    <!-- Efficiency Hero Card -->
                                    <div class="packing-hero-card">
                                        <div class="efficiency-grade-display">
                                            <div class="grade-circle" id="packing-grade-circle">
                                                <span id="packing-grade-text">--</span>
                                            </div>
                                            <div class="grade-meta">
                                                <div class="grade-label">Container Efficiency</div>
                                                <div class="grade-value" id="packing-utilization">--%</div>
                                            </div>
                                        </div>
                                        
                                        <div class="efficiency-stats-grid">
                                            <div class="stat-item">
                                                <div class="stat-label">Risk Score</div>
                                                <div class="stat-value" id="packing-risk-score">--/10</div>
                                            </div>
                                            <div class="stat-item">
                                                <div class="stat-label">Space Waste</div>
                                                <div class="stat-value" id="packing-space-waste">-- m¬≥</div>
                                            </div>
                                            <div class="stat-item highlight">
                                                <div class="stat-label">Cost Impact</div>
                                                <div class="stat-value" id="packing-cost-impact">$--</div>
                                            </div>
                                            <div class="stat-item">
                                                <div class="stat-label">Quality Score</div>
                                                <div class="stat-value" id="packing-quality">--/10</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Inefficiencies & Suggestions -->
                                    <div class="grid-2" style="margin-top: 32px;">
                                        <div class="inefficiencies-card">
                                            <h4 class="section-subtitle">
                                                <span class="icon-badge">‚ö†Ô∏è</span>
                                                Identified Inefficiencies
                                            </h4>
                                            <div id="packing-inefficiencies-list">
                                                <!-- Populated by JS -->
                                            </div>
                                        </div>
                                        
                                        <div class="optimization-card">
                                            <h4 class="section-subtitle">
                                                <span class="icon-badge">üí°</span>
                                                Optimization Suggestions
                                            </h4>
                                            <ul id="packing-suggestions-list">
                                                <!-- Populated by JS -->
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <!-- Savings Potential -->
                                    <div class="savings-potential-card" style="margin-top: 32px;">
                                        <h4 class="section-subtitle">
                                            <span class="icon-badge">üí∞</span>
                                            Savings Potential Analysis
                                        </h4>
                                        <div class="grid-3">
                                            <div class="savings-metric">
                                                <div class="metric-label">Current Waste Cost</div>
                                                <div class="metric-value" id="savings-current-waste">$--</div>
                                            </div>
                                            <div class="savings-metric">
                                                <div class="metric-label">Optimization Cost</div>
                                                <div class="metric-value" id="savings-optimization-cost">$--</div>
                                            </div>
                                            <div class="savings-metric highlight">
                                                <div class="metric-label">Net Savings</div>
                                                <div class="metric-value success" id="savings-net">$--</div>
                                                <div class="metric-subtitle">ROI: <span id="savings-roi">--%</span></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Container Utilization Visualization -->
                                    <div style="margin-top: 32px;">
                                        <h3 class="chart-title">Container Space Utilization</h3>
                                        <div id="containerVisualization" style="height: 400px;">
                                            <!-- Gauge chart -->
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- ENHANCED BUYER-SELLER ANALYSIS v16.2 -->
                            <section class="section-block" id="buyer-seller-section">
                                <div class="card" id="buyer-seller-card" style="display: none;">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">
                                                <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                                    <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Ph√¢n T√≠ch R·ªßi Ro ƒê·ªëi T√°c (v16.2)</span>
                                        </h2>
                                        <span class="card-badge">ESG + Reliability</span>
                                    </div>
                                    
                                    <!-- Comparison Grid -->
                                    <div class="grid-2" style="margin-bottom: 32px;">
                                        <!-- Buyer Card -->
                                        <div class="partner-card buyer-card">
                                            <div class="partner-header">
                                                <div class="partner-icon">üõí</div>
                                                <div>
                                                    <h3 class="partner-title">Ng∆∞·ªùi Mua (Buyer)</h3>
                                                    <p class="partner-name" id="buyer-name">--</p>
                                                </div>
                                            </div>
                                            
                                            <div class="partner-score">
                                                <div class="score-label">Risk Score</div>
                                                <div class="score-value" id="buyer-risk-score">--</div>
                                            </div>
                                            
                                            <div class="partner-metrics">
                                                <div class="partner-metric">
                                                    <span class="metric-label">Company Size</span>
                                                    <span class="metric-value" id="buyer-size">--</span>
                                                </div>
                                                <div class="partner-metric">
                                                    <span class="metric-label">ESG Score</span>
                                                    <span class="metric-value" id="buyer-esg">--</span>
                                                </div>
                                                <div class="partner-metric">
                                                    <span class="metric-label">Reliability</span>
                                                    <span class="metric-value" id="buyer-reliability">--</span>
                                                </div>
                                            </div>
                                            
                                            <div class="partner-progress">
                                                <div class="progress-bar">
                                                    <div class="progress-fill" id="buyer-progress" style="width: 0%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Seller Card -->
                                        <div class="partner-card seller-card">
                                            <div class="partner-header">
                                                <div class="partner-icon">üè≠</div>
                                                <div>
                                                    <h3 class="partner-title">Ng∆∞·ªùi B√°n (Seller)</h3>
                                                    <p class="partner-name" id="seller-name">--</p>
                                                </div>
                                            </div>
                                            
                                            <div class="partner-score">
                                                <div class="score-label">Risk Score</div>
                                                <div class="score-value" id="seller-risk-score">--</div>
                                            </div>
                                            
                                            <div class="partner-metrics">
                                                <div class="partner-metric">
                                                    <span class="metric-label">Company Size</span>
                                                    <span class="metric-value" id="seller-size">--</span>
                                                </div>
                                                <div class="partner-metric">
                                                    <span class="metric-label">ESG Score</span>
                                                    <span class="metric-value" id="seller-esg">--</span>
                                                </div>
                                                <div class="partner-metric">
                                                    <span class="metric-label">Reliability</span>
                                                    <span class="metric-value" id="seller-reliability">--</span>
                                                </div>
                                            </div>
                                            
                                            <div class="partner-progress">
                                                <div class="progress-bar">
                                                    <div class="progress-fill" id="seller-progress" style="width: 0%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Risk Formula Explanation -->
                                    <div class="formula-card">
                                        <h4 style="color: var(--accent-green); margin-bottom: 16px;">üìê Risk Calculation Formula (v16.2)</h4>
                                        <div class="formula-box">
                                            <code>Partner Risk = 100 - (0.6 √ó Reliability + 0.3 √ó ESG + Size Bonus)</code>
                                        </div>
                                        <ul class="formula-notes">
                                            <li>Size Bonus: Large = +10, Medium = +5, SME = 0</li>
                                            <li>Lower score = Lower risk (better partner)</li>
                                            <li>Score > 60 indicates high partner risk</li>
                                        </ul>
                                    </div>
                                </div>
                            </section>

                            <!-- ESG RESILIENCE SECTION (NEW) -->
                            <section class="section-block esg-resilience-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">
                                                <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                                                    <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>ESG Climate Resilience Analysis (v14.5)</span>
                                        </h2>
                                        <span class="card-badge">Sustainability Impact</span>
                                    </div>

                                    <div class="esg-mini-row">
                                        <div class="esg-component-card">
                                            <div class="esg-component-main">
                                                <div class="esg-icon" style="color: #10b981;">üå±</div>
                                                <div class="esg-component-body">
                                                    <div class="esg-label-row">
                                                        <div class="esg-label">Environmental</div>
                                                        <div class="esg-weight">40% ESG</div>
                                                    </div>
                                                    <div class="esg-score-row">
                                                        <div class="esg-score" id="esg-e-score">--</div>
                                                        <div class="esg-score-note" id="esg-e-meta">Tr·ªçng s·ªë 40%.</div>
                                                    </div>
                                                    <div class="esg-bar">
                                                        <div class="esg-bar-fill" id="esg-e-bar" style="width: 0%; background: #10b981;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <p class="esg-explanation" id="esg-e-explain">ƒêang ph√¢n t√≠ch t√°c ƒë·ªông m√¥i tr∆∞·ªùng...</p>
                                        </div>

                                        <div class="esg-component-card">
                                            <div class="esg-component-main">
                                                <div class="esg-icon" style="color: #3b82f6;">üë•</div>
                                                <div class="esg-component-body">
                                                    <div class="esg-label-row">
                                                        <div class="esg-label">Social</div>
                                                        <div class="esg-weight">35% ESG</div>
                                                    </div>
                                                    <div class="esg-score-row">
                                                        <div class="esg-score" id="esg-s-score">--</div>
                                                        <div class="esg-score-note" id="esg-s-meta">Tr·ªçng s·ªë 35%.</div>
                                                    </div>
                                                    <div class="esg-bar">
                                                        <div class="esg-bar-fill" id="esg-s-bar" style="width: 0%; background: #3b82f6;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <p class="esg-explanation" id="esg-s-explain">ƒêang ph√¢n t√≠ch t√°c ƒë·ªông x√£ h·ªôi...</p>
                                        </div>

                                        <div class="esg-component-card">
                                            <div class="esg-component-main">
                                                <div class="esg-icon" style="color: #facc15;">üèõÔ∏è</div>
                                                <div class="esg-component-body">
                                                    <div class="esg-label-row">
                                                        <div class="esg-label">Governance</div>
                                                        <div class="esg-weight">25% ESG</div>
                                                    </div>
                                                    <div class="esg-score-row">
                                                        <div class="esg-score" id="esg-g-score">--</div>
                                                        <div class="esg-score-note" id="esg-g-meta">Tr·ªçng s·ªë 25%.</div>
                                                    </div>
                                                    <div class="esg-bar">
                                                        <div class="esg-bar-fill" id="esg-g-bar" style="width: 0%; background: #facc15;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <p class="esg-explanation" id="esg-g-explain">ƒêang ph√¢n t√≠ch qu·∫£n tr·ªã & tu√¢n th·ªß...</p>
                                        </div>
                                    </div>

                            <!-- Additional Charts -->
                                <div class="grid-2">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="6" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/><path d="M12 3L12 12L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> Bi·ªÉu ƒê·ªì Radar H·ªì S∆° R·ªßi Ro</h2>
                                        </div>
                                        <div class="chart-container">
                                            <div id="radarChart" style="height: 400px;"></div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="7" width="18" height="3" stroke="currentColor" stroke-width="2" rx="1"/><rect x="3" y="11" width="18" height="3" stroke="currentColor" stroke-width="2" rx="1"/><rect x="3" y="15" width="18" height="3" stroke="currentColor" stroke-width="2" rx="1"/></svg></div> <span data-lang="section_layers">Ph√¢n T√≠ch Ph√¢n L·ªõp R·ªßi Ro</span></h2>
                                        </div>
                                        <div class="chart-container">
                                            <div id="layerChart" style="height: 400px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Monte Carlo & Timeline -->
                                <div class="grid-2">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="6" height="6" stroke="currentColor" stroke-width="2"/><rect x="15" y="15" width="6" height="6" stroke="currentColor" stroke-width="2"/><rect x="9" y="9" width="6" height="6" stroke="currentColor" stroke-width="2"/><path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="6" cy="6" r="1.5" fill="currentColor"/><circle cx="18" cy="18" r="1.5" fill="currentColor"/></svg></div> <span data-lang="section_montecarlo">Ph√¢n Ph·ªëi Monte Carlo</span></h2>
                                        </div>
                                        <div class="chart-container">
                                            <div id="mcChart" style="height: 350px;"></div>
                                        </div>
                                        <div class="alert-box">
                                            <strong>VaR (95%):</strong> <span id="mcVar">28.000 USD</span> | 
                                            <strong>CVaR (95%):</strong> <span id="mcCVar">35.000 USD</span> | 
                                            D·ª±a tr√™n <span id="mcRuns">10.000</span> m√¥ ph·ªèng
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="6" cy="6" r="2" fill="currentColor"/><circle cx="12" cy="12" r="2" fill="currentColor"/><circle cx="18" cy="18" r="2" fill="currentColor"/></svg></div> <span data-lang="section_timeline">D√≤ng Th·ªùi Gian R·ªßi Ro</span></h2>
                                        </div>
                                        <div class="chart-container">
                                            <div id="timelineChart" style="height: 350px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Risk Matrix -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" stroke="currentColor" stroke-width="2" rx="1"/><path d="M3 9H21M3 15H21M9 3V21M15 3V21" stroke="currentColor" stroke-width="2"/></svg></div> <span data-lang="section_matrix">Ma Tr·∫≠n R·ªßi Ro X√°c Su·∫•t √ó T√°c ƒê·ªông</span></h2>
                                    </div>
                                    <div class="chart-container">
                                        <div id="riskMatrixChart" style="height: 400px;"></div>
                                    </div>
                                    <p style="margin-top: 16px; color: var(--text-secondary); font-size: 14px;">
                                        Ma tr·∫≠n n√†y x√°c ƒë·ªãnh c√°c r·ªßi ro ∆∞u ti√™n cao b·∫±ng c√°ch v·∫Ω x√°c su·∫•t so v·ªõi t√°c ƒë·ªông ti·ªÅm nƒÉng. 
                                        T·∫≠p trung n·ªó l·ª±c gi·∫£m thi·ªÉu v√†o c√°c r·ªßi ro trong v√πng <strong>ƒë·ªè (g√≥c tr√™n b√™n ph·∫£i)</strong> v√† <strong>v√†ng (gi·ªØa)</strong>.
                                    </p>
                                </div>

                                <!-- Scenario Testing -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L3 7V12C3 16.5 6 20.16 12 21C18 20.16 21 16.5 21 12V7L12 2Z" stroke="currentColor" stroke-width="2"/><path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 12H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> <span data-lang="section_scenario">Ki·ªÉm Tra √Åp L·ª±c K·ªãch B·∫£n (What-if)</span></h2>
                                    </div>
                                    <div class="grid-scenario">
                                        <div>
                                            <h3 class="chart-title">Ch·ªçn K·ªãch B·∫£n</h3>
                                            <div class="scenario-pills" id="scenarioPills">
                                                <!-- Buttons will be generated by JS -->
                                            </div>
                                        </div>
                                        <div>
                                            <div class="scenario-summary" id="scenarioSummary">
                                                <h4 style="color: var(--text-primary); margin-bottom: 8px;">Tr∆∞·ªùng H·ª£p C∆° B·∫£n</h4>
                                                <p style="color: var(--text-secondary); font-size: 14px;" id="scenario-description">ƒêang t·∫£i m√¥ t·∫£...</p>
                                            </div>
                                            <div class="chart-container" style="margin-top: 20px;">
                                                <div id="scenarioChart" style="height: 350px;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Trade-off Analysis -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="8" cy="8" r="3" stroke="currentColor" stroke-width="2"/><circle cx="16" cy="16" r="3" stroke="currentColor" stroke-width="2"/><path d="M11 8L13 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 11L16 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> <span data-lang="section_tradeoff">ƒê√°nh ƒê·ªïi Chi Ph√≠-Th·ªùi Gian-R·ªßi Ro</span></h2>
                                    </div>
                                    <div class="chart-container">
                                        <div id="tradeoffChart" style="height: 300px;"></div>
                                    </div>
                                    <p style="margin-top: 16px; color: var(--text-secondary); font-size: 14px;">
                                        <strong>Th·ªèa hi·ªáp t·ªët nh·∫•t:</strong> Tuy·∫øn ƒë∆∞·ªùng hi·ªán t·∫°i mang l·∫°i hi·ªáu su·∫•t c√¢n b·∫±ng tr√™n chi ph√≠, th·ªùi gian v·∫≠n chuy·ªÉn v√† c√°c y·∫øu t·ªë r·ªßi ro.
                                    </p>
                                </div>

                                <!-- Route Level Analysis -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M5 12L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 5L19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="5" cy="12" r="2" fill="currentColor"/><circle cx="19" cy="12" r="2" fill="currentColor"/></svg></div> <span data-lang="section_route">Ph√¢n T√≠ch Theo C·∫•p ƒê·ªô Tuy·∫øn ƒê∆∞·ªùng</span></h2>
                                    </div>
                                    <div class="grid-route">
                                        <div class="chart-container">
                                            <div id="routeBreakdownChart" style="height: 400px;"></div>
                                        </div>
                                        <div>
                                            <h3 class="chart-title">Chi Ti·∫øt R·ªßi Ro Theo ƒêo·∫°n</h3>
                                            <div id="routeBreakdownTable">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- AI Recommendations -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 8L16 8M8 16L16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> <span data-lang="section_recommendations">Khuy·∫øn Ngh·ªã T·ª´ Chuy√™n Gia AI</span></h2>
                                    </div>
                                    <ul class="insight-list" id="recommendations-list">
                                        <li>ƒêang t·∫£i khuy·∫øn ngh·ªã...</li>
                                    </ul>
                                </div>
                        </div>
                    </div>
                </div>

        <div id="mode-research" class="mode-section view-hidden">
            <div id="research" class="panel">
                <div class="dashboard-container">
                    <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg></div> T·ªïng Quan Ph∆∞∆°ng Ph√°p Nghi√™n C·ª©u</h2>

                    <span class="card-badge">NCKH / Academic</span>

                </div>

                <p style="color: var(--text-secondary); font-size: 15px; line-height: 1.8; margin-bottom: 20px;">

                    Ph√¢n t√≠ch n√†y s·ª≠ d·ª•ng khung ƒë√°nh gi√° r·ªßi ro to√†n di·ªán k·∫øt h·ª£p <strong>Fuzzy Analytical Hierarchy Process (AHP)</strong>, 

                    <strong>Fuzzy-TOPSIS</strong>, v√† <strong>M√¥ ph·ªèng Monte Carlo</strong> ƒë·ªÉ ƒë√°nh gi√° r·ªßi ro logistics cho xu·∫•t kh·∫©u SME Vi·ªát Nam.

                </p>

                <div class="ps-grid">

                    <div class="ps-card">

                        <div class="ps-icon">

                            <div class="icon-card medium">

                                <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">

                                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>

                                    <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>

                                </svg>

                            </div>

                        </div>

                        <div class="ps-title">Fuzzy AHP</div>

                        <div class="ps-text">T√≠nh to√°n tr·ªçng s·ªë ƒëa ti√™u ch√≠ s·ª≠ d·ª•ng s·ªë m·ªù tam gi√°c v√† ma tr·∫≠n so s√°nh c·∫∑p</div>

                    </div>

                    <div class="ps-card">

                        <div class="ps-icon">

                            <div class="icon-card medium">

                                <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">

                                    <path d="M3 12L7 8L11 10L16 5L21 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>

                                    <circle cx="21" cy="10" r="2" fill="currentColor"/>

                                </svg>

                            </div>

                        </div>

                        <div class="ps-title">Fuzzy-TOPSIS</div>

                        <div class="ps-text">X·∫øp h·∫°ng ph∆∞∆°ng √°n d·ª±a tr√™n kho·∫£ng c√°ch ƒë·∫øn gi·∫£i ph√°p l√Ω t∆∞·ªüng v√† ph·∫£n l√Ω t∆∞·ªüng</div>

                    </div>

                    <div class="ps-card">

                        <div class="ps-icon">

                            <div class="icon-card medium">

                                <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">

                                    <rect x="3" y="3" width="6" height="6" stroke="currentColor" stroke-width="2"/>

                                    <rect x="15" y="15" width="6" height="6" stroke="currentColor" stroke-width="2"/>

                                    <rect x="9" y="9" width="6" height="6" stroke="currentColor" stroke-width="2"/>

                                </svg>

                            </div>

                        </div>

                        <div class="ps-title">Monte Carlo</div>

                        <div class="ps-text">M√¥ ph·ªèng ng·∫´u nhi√™n ƒë·ªÉ ƒëo l∆∞·ªùng r·ªßi ro ƒëu√¥i (VaR, CVaR)</div>

                    </div>

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="14" stroke="currentColor" stroke-width="2" rx="1"/><path d="M7 9H17M7 12H14M7 15H12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> B·∫£ng 1: Gi·∫£i Th√≠ch D·ªØ Li·ªáu</h2>

                </div>

                <table class="data-table">

                    <tr>

                        <th>Tham S·ªë</th>

                        <th>Gi√° Tr·ªã</th>

                        <th>L√Ω Do</th>

                    </tr>

                    <tr>

                        <td>Tuy·∫øn ƒê∆∞·ªùng</td>

                        <td id="resRoute">Vietnam ‚Üí EU/US</td>

                        <td>H√†nh lang xu·∫•t kh·∫©u kh·ªëi l∆∞·ª£ng l·ªõn cho SME Vi·ªát Nam</td>

                    </tr>

                    <tr>

                        <td>Lo·∫°i H√†ng H√≥a</td>

                        <td id="resCargo">Electronics / High-value</td>

                        <td>Nh·∫°y c·∫£m v·ªõi h∆∞ h·∫°i v√† tr·ªÖ; y√™u c·∫ßu b·∫£o hi·ªÉm cao</td>

                    </tr>

                    <tr>

                        <td>Incoterm</td>

                        <td id="resIncoterm">CIF / FOB</td>

                        <td>X√°c ƒë·ªãnh ƒëi·ªÉm chuy·ªÉn giao r·ªßi ro v√† tr√°ch nhi·ªám c√°c b√™n</td>

                    </tr>

                    <tr>

                        <td>Ph∆∞∆°ng Th·ª©c V·∫≠n Chuy·ªÉn</td>

                        <td id="resMode">Ocean / Multimodal</td>

                        <td>Hi·ªáu qu·∫£ chi ph√≠ cho h√†ng s·ªë l∆∞·ª£ng l·ªõn; ƒë·ªô ph·ª©c t·∫°p r·ªßi ro cao h∆°n</td>

                    </tr>

                </table>

                <div class="alert-box">

                    C√°c tham s·ªë n√†y t·∫°o n·ªÅn t·∫£ng cho ƒë·ªãnh l∆∞·ª£ng r·ªßi ro. M·ªói bi·∫øn ·∫£nh h∆∞·ªüng ƒë·∫øn nhi·ªÅu chi·ªÅu r·ªßi ro 

                    (tr·ªÖ, h∆∞ h·∫°i, bi·∫øn ƒë·ªông chi ph√≠, t√°c ƒë·ªông ESG).

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="13" y="3" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="3" y="13" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="13" y="13" width="8" height="8" stroke="currentColor" stroke-width="2"/></svg></div> B·∫£ng 2: X√¢y D·ª±ng Ti√™u Ch√≠</h2>

                </div>

                <table class="data-table">

                    <thead>

                        <tr>

                            <th>Ti√™u Ch√≠</th>

                            <th>ƒê·ªãnh Nghƒ©a</th>

                            <th>Ngu·ªìn</th>

                            <th>Vai Tr√≤ Trong Chu·ªói Cung ·ª®ng</th>

                        </tr>

                    </thead>

                    <tbody>

                        <tr>

                            <td>R·ªßi Ro Tr·ªÖ</td>

                            <td>X√°c su·∫•t l√¥ h√†ng ƒë·∫øn mu·ªôn</td>

                            <td>D·ªØ li·ªáu ng√†nh, hi·ªáu su·∫•t h√£ng v·∫≠n chuy·ªÉn</td>

                            <td>·∫¢nh h∆∞·ªüng t·ªìn kho, s·ª± h√†i l√≤ng kh√°ch h√†ng</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro H∆∞ H·∫°i</td>

                            <td>Kh·∫£ nƒÉng h√†ng h√≥a b·ªã h∆∞ h·∫°i/m·∫•t m√°t</td>

                            <td>Khi·∫øu n·∫°i l·ªãch s·ª≠, ch·∫•t l∆∞·ª£ng bao b√¨</td>

                            <td>T·ªïn th·∫•t t√†i ch√≠nh tr·ª±c ti·∫øp, danh ti·∫øng</td>

                        </tr>

                        <tr>

                            <td>Bi·∫øn ƒê·ªông Chi Ph√≠</td>

                            <td>Dao ƒë·ªông trong c∆∞·ªõc v·∫≠n chuy·ªÉn</td>

                            <td>Ph√¢n t√≠ch th·ªã tr∆∞·ªùng, ph·ª• ph√≠ nhi√™n li·ªáu</td>

                            <td>D·ª± ƒëo√°n ng√¢n s√°ch, √°p l·ª±c bi√™n l·ª£i nhu·∫≠n</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro V·∫≠n H√†nh</td>

                            <td>ƒê·ªô tin c·∫≠y h√£ng v·∫≠n chuy·ªÉn, t√†i li·ªáu</td>

                            <td>X·∫øp h·∫°ng h√£ng v·∫≠n chuy·ªÉn, d·ªØ li·ªáu ki·ªÉm to√°n</td>

                            <td>Hi·ªáu qu·∫£ quy tr√¨nh, tu√¢n th·ªß</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro ESG</td>

                            <td>T√°c ƒë·ªông m√¥i tr∆∞·ªùng v√† x√£ h·ªôi</td>

                            <td>Ph√°t th·∫£i carbon, th·ª±c h√†nh lao ƒë·ªông</td>

                            <td>Tu√¢n th·ªß quy ƒë·ªãnh, gi√° tr·ªã th∆∞∆°ng hi·ªáu</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro Ch√≠nh Tr·ªã</td>

                            <td>S·ª± ki·ªán ƒë·ªãa ch√≠nh tr·ªã, l·ªánh tr·ª´ng ph·∫°t</td>

                            <td>Ch·ªâ s·ªë r·ªßi ro qu·ªëc gia</td>

                            <td>Gi√°n ƒëo·∫°n tuy·∫øn ƒë∆∞·ªùng, r√†o c·∫£n ph√°p l√Ω</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro Kh√≠ H·∫≠u</td>

                            <td>Gi√°n ƒëo·∫°n th·ªùi ti·∫øt, thi√™n tai</td>

                            <td>D·ªØ li·ªáu th·ªùi ti·∫øt l·ªãch s·ª≠</td>

                            <td>Tr·ªÖ theo m√πa, b·∫•t kh·∫£ kh√°ng</td>

                        </tr>

                    </tbody>

                </table>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> B·∫£ng 3: Ph∆∞∆°ng Ph√°p Fuzzy AHP</h2>

                </div>

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">Quy Tr√¨nh T·ª´ng B∆∞·ªõc:</h3>

                <ol style="color: var(--text-secondary); font-size: 14px; line-height: 1.8; padding-left: 24px;">

                    <li>X√¢y d·ª±ng ma tr·∫≠n so s√°nh c·∫∑p s·ª≠ d·ª•ng ƒë√°nh gi√° chuy√™n gia</li>

                    <li>Chuy·ªÉn ƒë·ªïi gi√° tr·ªã r√µ sang s·ªë m·ªù tam gi√°c (TFN)</li>

                    <li>T√≠nh trung b√¨nh h√¨nh h·ªçc m·ªù cho m·ªói ti√™u ch√≠</li>

                    <li>Chu·∫©n h√≥a ƒë·ªÉ thu ƒë∆∞·ª£c tr·ªçng s·ªë m·ªù</li>

                    <li>Gi·∫£i m·ªù s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p tr·ªçng t√¢m</li>

                    <li>X√°c minh t·ª∑ l·ªá nh·∫•t qu√°n (CR < 0.1)</li>

                </ol>

                

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">Tr·ªçng S·ªë Chu·∫©n H√≥a K·∫øt Qu·∫£:</h3>

                <table class="data-table">

                    <thead>

                        <tr>

                            <th>Ti√™u Ch√≠</th>

                            <th>Tr·ªçng S·ªë M·ªù (TFN)</th>

                            <th>Tr·ªçng S·ªë R√µ</th>

                            <th>X·∫øp H·∫°ng</th>

                        </tr>

                    </thead>

                    <tbody>

                        <tr>

                            <td>R·ªßi Ro Tr·ªÖ</td>

                            <td>(0.18, 0.23, 0.28)</td>

                            <td>0.23</td>

                            <td>1</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro H∆∞ H·∫°i</td>

                            <td>(0.15, 0.19, 0.24)</td>

                            <td>0.19</td>

                            <td>2</td>

                        </tr>

                        <tr>

                            <td>Bi·∫øn ƒê·ªông Chi Ph√≠</td>

                            <td>(0.13, 0.17, 0.21)</td>

                            <td>0.17</td>

                            <td>3</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro V·∫≠n H√†nh</td>

                            <td>(0.12, 0.16, 0.20)</td>

                            <td>0.16</td>

                            <td>4</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro ESG</td>

                            <td>(0.08, 0.12, 0.16)</td>

                            <td>0.12</td>

                            <td>5</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro Ch√≠nh Tr·ªã</td>

                            <td>(0.06, 0.08, 0.11)</td>

                            <td>0.08</td>

                            <td>6</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro Kh√≠ H·∫≠u</td>

                            <td>(0.03, 0.05, 0.08)</td>

                            <td>0.05</td>

                            <td>7</td>

                        </tr>

                    </tbody>

                </table>

                <div class="alert-box">

                    <strong>T·ª∑ L·ªá Nh·∫•t Qu√°n (CR):</strong> 0.076 < 0.1 ‚úì (Nh·∫•t qu√°n ch·∫•p nh·∫≠n ƒë∆∞·ª£c)

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 12L7 8L11 10L16 5L21 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="21" cy="10" r="2" fill="currentColor"/></svg></div> B·∫£ng 4: Ph√¢n T√≠ch Fuzzy-TOPSIS</h2>

                </div>

                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.8; margin-bottom: 16px;">

                    TOPSIS (K·ªπ thu·∫≠t X·∫øp H·∫°ng ∆Øu Ti√™n theo ƒê·ªô T∆∞∆°ng T·ª± v·ªõi Gi·∫£i Ph√°p L√Ω T∆∞·ªüng) x·∫øp h·∫°ng c√°c ph∆∞∆°ng √°n d·ª±a tr√™n 

                    kho·∫£ng c√°ch h√¨nh h·ªçc ƒë·∫øn gi·∫£i ph√°p l√Ω t∆∞·ªüng t·ªët nh·∫•t v√† gi·∫£i ph√°p ph·∫£n l√Ω t∆∞·ªüng.

                </p>

                

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">X·∫øp H·∫°ng Ph∆∞∆°ng √Ån:</h3>

                <table class="data-table">

                    <thead>

                        <tr>

                            <th>Ph∆∞∆°ng √Ån</th>

                            <th>Kho·∫£ng C√°ch ƒê·∫øn L√Ω T∆∞·ªüng (D+)</th>

                            <th>Kho·∫£ng C√°ch ƒê·∫øn Ph·∫£n L√Ω T∆∞·ªüng (D-)</th>

                            <th>H·ªá S·ªë G·∫ßn G≈©i</th>

                            <th>X·∫øp H·∫°ng</th>

                        </tr>

                    </thead>

                    <tbody>

                        <tr style="background: rgba(0, 255, 136, 0.1);">

                            <td><strong>Tuy·∫øn A (Tr·ª±c Ti·∫øp)</strong></td>

                            <td>0.142</td>

                            <td>0.286</td>

                            <td>0.668</td>

                            <td>ü•á 1</td>

                        </tr>

                        <tr>

                            <td>Tuy·∫øn B (Hub-spoke)</td>

                            <td>0.198</td>

                            <td>0.234</td>

                            <td>0.542</td>

                            <td>2</td>

                        </tr>

                        <tr>

                            <td>Tuy·∫øn C (Chuy·ªÉn T·∫£i Nhi·ªÅu L·∫ßn)</td>

                            <td>0.267</td>

                            <td>0.168</td>

                            <td>0.386</td>

                            <td>3</td>

                        </tr>

                    </tbody>

                </table>

                <div class="alert-box">

                    <strong>Gi·∫£i Ph√°p T·ªëi ∆Øu:</strong> Tuy·∫øn A (Tr·ª±c Ti·∫øp) c√≥ h·ªá s·ªë g·∫ßn g≈©i cao nh·∫•t (0.668), 

                    cho th·∫•y s·ª± c√¢n b·∫±ng t·ªët nh·∫•t tr√™n t·∫•t c·∫£ c√°c ti√™u ch√≠ c√≥ tr·ªçng s·ªë.

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="6" height="6" stroke="currentColor" stroke-width="2"/><rect x="15" y="15" width="6" height="6" stroke="currentColor" stroke-width="2"/><rect x="9" y="9" width="6" height="6" stroke="currentColor" stroke-width="2"/></svg></div> B·∫£ng 5: M√¥ Ph·ªèng Monte Carlo</h2>

                </div>

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">Tham S·ªë M√¥ Ph·ªèng:</h3>

                <table class="data-table">

                    <tr>

                        <th>Tham S·ªë</th>

                        <th>Gi√° Tr·ªã</th>

                        <th>M√¥ T·∫£</th>

                    </tr>

                    <tr>

                        <td>S·ªë L∆∞·ª£ng M√¥ Ph·ªèng</td>

                        <td>10.000</td>

                        <td>ƒê·ªß ƒë·ªÉ h·ªôi t·ª• ph√¢n ph·ªëi ·ªïn ƒë·ªãnh</td>

                    </tr>

                    <tr>

                        <td>Gi√° Tr·ªã H√†ng H√≥a</td>

                        <td>$100.000</td>

                        <td>Gi√° tr·ªã c∆° s·ªü ƒë·ªÉ t√≠nh t·ªïn th·∫•t</td>

                    </tr>

                    <tr>

                        <td>Ph√¢n Ph·ªëi T·ªïn Th·∫•t</td>

                        <td>Beta + Triangular</td>

                        <td>Ph√¢n ph·ªëi h·ªón h·ª£p m√¥ h√¨nh h√≥a s·ª± ki·ªán th·ª±c t·∫ø</td>

                    </tr>

                </table>

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">Ch·ªâ S·ªë R·ªßi Ro:</h3>

                <div class="grid-3">

                    <div class="kpi-card">

                        <div class="kpi-label">T·ªïn Th·∫•t K·ª≥ V·ªçng</div>

                        <div class="kpi-value" id="resExpectedLoss">$12.5K</div>

                        <div class="kpi-subtitle">Trung b√¨nh ph√¢n ph·ªëi</div>

                    </div>

                    <div class="kpi-card">

                        <div class="kpi-label">VaR (95%)</div>

                        <div class="kpi-value medium" id="resVar">$28K</div>

                        <div class="kpi-subtitle">T·ªïn th·∫•t ph√¢n v·ªã th·ª© 95</div>

                    </div>

                    <div class="kpi-card">

                        <div class="kpi-label">CVaR (95%)</div>

                        <div class="kpi-value high" id="resCVar">$35K</div>

                        <div class="kpi-subtitle">T·ªïn th·∫•t k·ª≥ v·ªçng trong ƒëu√¥i</div>

                    </div>

                </div>

                <div class="alert-box">

                    <strong>Gi·∫£i Th√≠ch Th·ªëng K√™:</strong> C√≥ 95% x√°c su·∫•t t·ªïn th·∫•t s·∫Ω kh√¥ng v∆∞·ª£t qu√° $28.000. 

                    Tuy nhi√™n, trong 5% k·ªãch b·∫£n x·∫•u nh·∫•t, t·ªïn th·∫•t trung b√¨nh l√† $35.000 (CVaR). R·ªßi ro ƒëu√¥i n√†y n√™n 

                    ƒë∆∞·ª£c xem x√©t trong quy·∫øt ƒë·ªãnh b·∫£o hi·ªÉm.

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L3 7V12C3 16.5 6 20.16 12 21C18 20.16 21 16.5 21 12V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M8 8L16 16M16 8L8 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> B·∫£ng 6: M√¥ H√¨nh R·ªßi Ro T√≠ch H·ª£p</h2>

                </div>

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">T√≠nh To√°n ƒêi·ªÉm R·ªßi Ro T·ªïng Th·ªÉ:</h3>

                <div style="background: rgba(5, 10, 15, 0.8); padding: 20px; border-radius: 12px; margin: 16px 0;">

                    <pre style="color: var(--text-secondary); font-size: 13px; line-height: 1.8; margin: 0;">

<span style="color: var(--accent-green);">Risk_Overall</span> = Œ£ (w<sub>i</sub> √ó s<sub>i</sub> √ó adj<sub>i</sub>)

Trong ƒë√≥:

  w<sub>i</sub> = Tr·ªçng s·ªë Fuzzy-AHP cho ti√™u ch√≠ i

  s<sub>i</sub> = ƒêi·ªÉm chu·∫©n h√≥a t·ª´ Fuzzy-TOPSIS

  adj<sub>i</sub> = H·ªá s·ªë ƒëi·ªÅu ch·ªânh Monte Carlo

<span style="color: var(--accent-green);">ƒêi·ªÉm Cu·ªëi C√πng</span> = 76 (R·ªßi Ro Trung B√¨nh)

  - ƒê√≥ng g√≥p tr·ªÖ: 0.23 √ó 0.71 = 16.3

  - ƒê√≥ng g√≥p h∆∞ h·∫°i: 0.19 √ó 0.64 = 12.2

  - ƒê√≥ng g√≥p bi·∫øn ƒë·ªông chi ph√≠: 0.17 √ó 0.52 = 8.8

  - ƒê√≥ng g√≥p v·∫≠n h√†nh: 0.16 √ó 0.58 = 9.3

  - ƒê√≥ng g√≥p ESG: 0.12 √ó 0.42 = 5.0

  - C√°c ƒë√≥ng g√≥p kh√°c: 24.4

                    </pre>

                </div>

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">T√≥m T·∫Øt K·∫øt Qu·∫£ Ch√≠nh:</h3>

                <ul class="insight-list">

                    <li><strong>Ch·ªâ S·ªë R·ªßi Ro T·ªïng Th·ªÉ:</strong> 76 (Trung B√¨nh) ‚Äî ch·∫•p nh·∫≠n ƒë∆∞·ª£c v·ªõi gi√°m s√°t v√† k·∫ø ho·∫°ch d·ª± ph√≤ng</li>

                    <li><strong>Nguy√™n Nh√¢n R·ªßi Ro Ch√≠nh:</strong> R·ªßi ro tr·ªÖ ƒë√≥ng g√≥p 21.5% v√†o t·ªïng ƒëi·ªÉm r·ªßi ro</li>

                    <li><strong>T√°c ƒê·ªông T√†i Ch√≠nh K·ª≥ V·ªçng:</strong> $12.500 m·ªói l√¥ h√†ng (t·ªïn th·∫•t trung b√¨nh)</li>

                    <li><strong>Ph∆°i Nhi·ªÖm R·ªßi Ro ƒêu√¥i:</strong> 5% kh·∫£ nƒÉng t·ªïn th·∫•t v∆∞·ª£t qu√° $28.000</li>

                    <li><strong>ƒê·ªô Tin C·∫≠y:</strong> 88% x√°c su·∫•t giao h√†ng ƒë√∫ng h·∫°n kh√¥ng c√≥ gi√°n ƒëo·∫°n l·ªõn</li>

                </ul>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="14" stroke="currentColor" stroke-width="2" rx="1"/><path d="M7 9H17M7 12H17M7 15H14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> B·∫£ng 7: √ù Nghƒ©a Ch√≠nh S√°ch Cho SME Vi·ªát Nam</h2>

                </div>

                

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">K·∫øt Lu·∫≠n Nghi√™n C·ª©u:</h3>

                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.8; margin-bottom: 16px;">

                    Khung t√≠ch h·ª£p Fuzzy-AHP-TOPSIS-Monte Carlo n√†y cung c·∫•p cho c√°c nh√† xu·∫•t kh·∫©u SME Vi·ªát Nam m·ªôt 

                    <strong>c√¥ng c·ª• ƒë√°nh gi√° r·ªßi ro d·ª±a tr√™n d·ªØ li·ªáu, c√≥ th·ªÉ gi·∫£i th√≠ch</strong> cho vi·ªác ra quy·∫øt ƒë·ªãnh logistics. 

                    Ph∆∞∆°ng ph√°p n√†y gi·∫£i quy·∫øt c√°c th√°ch th·ª©c ch√≠nh:

                </p>

                <ul class="insight-list">

                    <li><strong>Gi·∫£m Thi·ªÉu Ch·ªß Quan:</strong> S·ªë m·ªù n·∫Øm b·∫Øt s·ª± kh√¥ng ch·∫Øc ch·∫Øn trong ƒë√°nh gi√° chuy√™n gia trong khi v·∫´n duy tr√¨ t√≠nh nghi√™m ng·∫∑t</li>

                    <li><strong>ƒê√°nh ƒê·ªïi ƒêa Ti√™u Ch√≠:</strong> Tr·ªçng s·ªë AHP cho ph√©p ∆∞u ti√™n ƒë·ªông d·ª±a tr√™n ng·ªØ c·∫£nh kinh doanh</li>

                    <li><strong>ƒê·ªãnh L∆∞·ª£ng R·ªßi Ro ƒêu√¥i:</strong> M√¥ ph·ªèng Monte Carlo ti·∫øt l·ªô c√°c k·ªãch b·∫£n c·ª±c ƒëoan th∆∞·ªùng b·ªã b·ªè qua trong m√¥ h√¨nh x√°c ƒë·ªãnh</li>

                    <li><strong>T·ªëi ∆Øu H√≥a Tuy·∫øn ƒê∆∞·ªùng:</strong> X·∫øp h·∫°ng TOPSIS cung c·∫•p so s√°nh ph∆∞∆°ng √°n r√µ r√†ng cho l·ª±a ch·ªçn h√£ng v·∫≠n chuy·ªÉn/tuy·∫øn ƒë∆∞·ªùng</li>

                    <li><strong>L·∫≠p K·∫ø Ho·∫°ch B·∫£o Hi·ªÉm:</strong> Ch·ªâ s·ªë VaR/CVaR tr·ª±c ti·∫øp th√¥ng b√°o y√™u c·∫ßu b·∫£o hi·ªÉm v√† ƒë√†m ph√°n ph√≠ b·∫£o hi·ªÉm</li>

                </ul>

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">M·ªü R·ªông V√† Nghi√™n C·ª©u T∆∞∆°ng Lai:</h3>

                <ul class="insight-list">

                    <li>T√≠ch h·ª£p v·ªõi d·ªØ li·ªáu IoT th·ªùi gian th·ª±c (theo d√µi GPS, c·∫£m bi·∫øn nhi·ªát ƒë·ªô) ƒë·ªÉ c·∫≠p nh·∫≠t r·ªßi ro ƒë·ªông</li>

                    <li>M√¥ h√¨nh machine learning ƒë·ªÉ d·ª± ƒëo√°n ƒëi·ªÉm ti√™u ch√≠ d·ª±a tr√™n d·ªØ li·ªáu l√¥ h√†ng l·ªãch s·ª≠</li>

                    <li>M·ªü r·ªông sang v·∫≠n chuy·ªÉn h√†ng kh√¥ng, ƒë∆∞·ªùng s·∫Øt v√† k·∫øt h·ª£p ƒëa ph∆∞∆°ng th·ª©c</li>

                    <li>T√≠ch h·ª£p blockchain cho t√†i li·ªáu minh b·∫°ch v√† x·ª≠ l√Ω khi·∫øu n·∫°i</li>

                    <li>Th√≠ch ·ª©ng khu v·ª±c cho h√†nh lang ASEAN (tuy·∫øn VN-TH, VN-ID, VN-MY)</li>

                </ul>

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">H·∫°n Ch·∫ø:</h3>

                <div class="alert-box">

                    <strong>T√≠nh S·∫µn C√≥ D·ªØ Li·ªáu:</strong> ƒê·ªô ch√≠nh x√°c m√¥ h√¨nh ph·ª• thu·ªôc v√†o ch·∫•t l∆∞·ª£ng d·ªØ li·ªáu ƒë·∫ßu v√†o (hi·ªáu su·∫•t h√£ng v·∫≠n chuy·ªÉn, t·ª∑ l·ªá t·ªïn th·∫•t l·ªãch s·ª≠). 

                    SME Vi·ªát Nam c√≥ th·ªÉ thi·∫øu d·ªØ li·ªáu l·ªãch s·ª≠ to√†n di·ªán.

                    <br><br>

                    <strong>T√≠nh Ch·ªß Quan Chuy√™n Gia:</strong> M·∫∑c d√π logic m·ªù, tr·ªçng s·ªë AHP v·∫´n d·ª±a v√†o ƒë√°nh gi√° chuy√™n gia c√≥ th·ªÉ kh√°c nhau gi·ªØa c√°c ng√†nh.

                    <br><br>

                    <strong>M√¥i Tr∆∞·ªùng ƒê·ªông:</strong> S·ª± ki·ªán ƒë·ªãa ch√≠nh tr·ªã, ƒë·∫°i d·ªãch v√† c√∫ s·ªëc chu·ªói cung ·ª©ng y√™u c·∫ßu hi·ªáu ch·ªânh m√¥ h√¨nh th∆∞·ªùng xuy√™n.

                </div>

            </div>

            

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L3 7V12C3 16.5 6 20.16 12 21C18 20.16 21 16.5 21 12V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/></svg></div> B·∫£ng 8: Ki·ªÉm Tra ƒê·ªô Nh·∫°y & ƒê·ªô V·ªØng Ch·∫Øc</h2>

                </div>

                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.8; margin-bottom: 16px;">

                    ƒê·ªÉ ƒë·∫£m b·∫£o ƒë·ªô tin c·∫≠y c·ªßa m√¥ h√¨nh cho SME Vi·ªát Nam, ph√¢n t√≠ch ƒë·ªô nh·∫°y ƒë√£ ƒë∆∞·ª£c th·ª±c hi·ªán. 

                    ƒêi·ªÅu n√†y ki·ªÉm tra c√°ch x·∫øp h·∫°ng cu·ªëi c√πng (Fuzzy-TOPSIS) ph·∫£n ·ª©ng v·ªõi thay ƒë·ªïi trong tr·ªçng s·ªë ti√™u ch√≠ (Fuzzy-AHP).

                </p>

                

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">Ph√¢n T√≠ch Nhi·ªÖu Lo·∫°n Tr·ªçng S·ªë:</h3>

                <table class="data-table">

                    <thead>

                        <tr>

                            <th>K·ªãch B·∫£n</th>

                            <th>Thay ƒê·ªïi Tr·ªçng S·ªë</th>

                            <th>Tuy·∫øn T·ªëi ∆Øu</th>

                            <th>K·∫øt Qu·∫£</th>

                        </tr>

                    </thead>

                    <tbody>

                        <tr>

                            <td>C∆° S·ªü</td>

                            <td>N/A</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-green);">·ªîn ƒê·ªãnh</td>

                        </tr>

                        <tr>

                            <td>Nh·∫°y C·∫£m Chi Ph√≠</td>

                            <td>Tr·ªçng S·ªë Bi·∫øn ƒê·ªông Chi Ph√≠ +20%</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-green);">·ªîn ƒê·ªãnh</td>

                        </tr>

                        <tr>

                            <td>Nh·∫°y C·∫£m Th·ªùi Gian</td>

                            <td>Tr·ªçng S·ªë R·ªßi Ro Tr·ªÖ +20%</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-green);">·ªîn ƒê·ªãnh</td>

                        </tr>

                        <tr>

                            <td>Nh·∫°y C·∫£m Ch·∫•t L∆∞·ª£ng</td>

                            <td>Tr·ªçng S·ªë R·ªßi Ro H∆∞ H·∫°i +20%</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-green);">·ªîn ƒê·ªãnh</td>

                        </tr>

                        <tr>

                            <td>Gi√°n ƒêo·∫°n C·ª±c ƒêoan</td>

                            <td>Tr·ªçng S·ªë Kh√≠ H·∫≠u + Ch√≠nh Tr·ªã +50%</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-yellow);">·ªîn ƒê·ªãnh (X·∫øp H·∫°ng 1), nh∆∞ng H·ªá S·ªë G·∫ßn G≈©i gi·∫£m 15%</td>

                        </tr>

                    </tbody>

                </table>

                

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">K·∫øt Lu·∫≠n ƒê·ªô V·ªØng Ch·∫Øc:</h3>

                <ul class="insight-list">

                    <li>M√¥ h√¨nh th·ªÉ hi·ªán <strong>ƒë·ªô v·ªØng ch·∫Øc cao</strong> cho khuy·∫øn ngh·ªã ch√≠nh (Tuy·∫øn A).</li>

                    <li>X·∫øp h·∫°ng TOPSIS <strong>kh√¥ng nh·∫°y c·∫£m</strong> v·ªõi thay ƒë·ªïi nh·ªè ho·∫∑c v·ª´a ph·∫£i trong tr·ªçng s·ªë AHP.</li>

                    <li>S·ª± ·ªïn ƒë·ªãnh n√†y x√°c nh·∫≠n m√¥ h√¨nh l√† m·ªôt <strong>c√¥ng c·ª• h·ªó tr·ª£ quy·∫øt ƒë·ªãnh ƒë√°ng tin c·∫≠y</strong> cho SME, 

                        ngay c·∫£ v·ªõi s·ª± thay ƒë·ªïi nh·ªè trong ƒë√°nh gi√° chuy√™n gia ho·∫∑c ∆∞u ti√™n kinh doanh.</li>

                </ul>

            </div>

                    </div>
                </div>
            </div>
        </div>

                <!-- INVESTOR MODE -->
                <div id="mode-investor" class="mode-section view-hidden">
                    <div id="investor" class="panel">
                        <div class="dashboard-container">
                            <div class="card">
                            <div class="hero-section">
                                <div class="hero-number" id="investorHeroNumber">32%</div>
                                <div class="hero-caption">Gi·∫£m R·ªßi Ro Th√¥ng Qua ƒê·ªãnh Tuy·∫øn Th√¥ng Minh</div>
                                <div class="hero-subtitle">
                                    Bi·∫øn Quy·∫øt ƒê·ªãnh Logistics M·ªù √Åm Th√†nh L·ª£i Th·∫ø C·∫°nh Tranh D·ª±a Tr√™n D·ªØ Li·ªáu
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div>
                                    V·∫•n ƒê·ªÅ ‚Üí Gi·∫£i Ph√°p ‚Üí T·∫°i Sao B√¢y Gi·ªù
                                </h2>
                            </div>
                            <div class="ps-grid">
                                <div class="ps-card">
                                    <div class="ps-icon">
                                        <div class="icon-card medium">
                                            <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">
                                                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                                                <path d="M9 9L15 15M15 9L9 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="ps-title">V·∫•n ƒê·ªÅ</div>
                                    <div class="ps-text">
                                        C√°c nh√† xu·∫•t kh·∫©u SME ƒë∆∞a ra quy·∫øt ƒë·ªãnh logistics d·ª±a tr√™n d·ªØ li·ªáu ph√¢n m·∫£nh (b√°o gi√° chi ph√≠, th·ªùi gian giao h√†ng) 
                                        m√† kh√¥ng hi·ªÉu <strong>ph∆°i nhi·ªÖm r·ªßi ro th·ª±c s·ª±</strong>. K·∫øt qu·∫£: 15-25% l√¥ h√†ng g·∫∑p 
                                        tr·ªÖ, h∆∞ h·∫°i ho·∫∑c chi ph√≠ b·∫•t ng·ªù.
                                    </div>
                                </div>
                                <div class="ps-card">
                                    <div class="ps-icon">
                                        <div class="icon-card medium">
                                            <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">
                                                <path d="M12 2L3 7V12C3 16.5 6 20.16 12 21C18 20.16 21 16.5 21 12V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                                                <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="ps-title">Gi·∫£i Ph√°p</div>
                                    <div class="ps-text">
                                        <strong>RISKCAST</strong>: L·ªõp th√¥ng minh r·ªßi ro ƒë∆∞·ª£c h·ªó tr·ª£ b·ªüi AI k·∫øt h·ª£p Fuzzy-AHP, TOPSIS, 
                                        v√† m√¥ ph·ªèng Monte Carlo. M·ªôt ƒë·∫ßu v√†o (tuy·∫øn ƒë∆∞·ªùng, h√†ng h√≥a, incoterm) ‚Üí ƒëi·ªÉm r·ªßi ro to√†n di·ªán + 
                                        ph√¢n ph·ªëi r·ªßi ro ƒëu√¥i + ph∆∞∆°ng √°n t·ªëi ∆∞u.
                                    </div>
                                </div>
                                <div class="ps-card">
                                    <div class="ps-icon">
                                        <div class="icon-card medium">
                                            <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">
                                                <path d="M3 21L12 3L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M7 17L12 11L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="ps-title">T·∫°i Sao B√¢y Gi·ªù</div>
                                    <div class="ps-text">
                                        Bi·∫øn ƒë·ªông h·∫≠u ƒë·∫°i d·ªãch + √°p l·ª±c tu√¢n th·ªß ESG + s·ªë h√≥a t√†i ch√≠nh th∆∞∆°ng m·∫°i. 
                                        C√°c nh√† b·∫£o hi·ªÉm logistics, ng√¢n h√†ng v√† forwarder c·∫ßn <strong>m√¥ h√¨nh r·ªßi ro c√≥ th·ªÉ gi·∫£i th√≠ch</strong> 
                                        ƒë·ªÉ b·∫£o l√£nh SME th·ªã tr∆∞·ªùng m·ªõi n·ªïi.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L15 9L22 10L17 15L18 22L12 18L6 22L7 15L2 10L9 9L12 2Z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/></svg></div>
                                    T√≥m T·∫Øt T√°c ƒê·ªông Kinh T·∫ø
                                </h2>
                            </div>
                            <div class="grid-2">
                                <div class="chart-container">
                                    <div id="savingsChart" style="height: 300px;"></div>
                                </div>
                                <div>
                                    <h3 style="color: var(--accent-green); margin-bottom: 16px;">Ph√¢n T√≠ch T√°c ƒê·ªông Chi Ph√≠</h3>
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Ch·ªâ S·ªë</th>
                                                <th>C∆° S·ªü</th>
                                                <th>T·ªëi ∆Øu</th>
                                                <th>C·∫£i Thi·ªán</th>
                                            </tr>
                                        </thead>
                                        <tbody id="economicsTable">
                                        </tbody>
                                    </table>
                                    <div class="alert-box green" style="margin-top: 16px;">
                                        <strong>L·ª£i √çch R√≤ng:</strong> <span id="netBenefit">$1.850</span> ti·∫øt ki·ªám m·ªói l√¥ h√†ng th√¥ng qua ƒë·ªãnh tuy·∫øn t·ªëi ∆∞u + gi·∫£m ph∆°i nhi·ªÖm r·ªßi ro.
                                        ƒê·ªëi v·ªõi nh√† xu·∫•t kh·∫©u th·ªã tr∆∞·ªùng trung b√¨nh (1.200 l√¥ h√†ng/nƒÉm) ‚Üí <strong>t√°c ƒë·ªông h√†ng nƒÉm $2.2M</strong>.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 21L12 3L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 17L12 11L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                                    ARR / Ti·ªÅm NƒÉng Doanh Thu
                                </h2>
                            </div>
                            <div class="grid-3">
                                <div class="kpi-card">
                                    <div class="kpi-label">Kh√°ch H√†ng M·ª•c Ti√™u</div>
                                    <div class="kpi-value" style="font-size: 24px;">Nh√† Xu·∫•t Kh·∫©u SME</div>
                                    <div class="kpi-subtitle">Doanh thu h√†ng nƒÉm $5M-50M</div>
                                </div>
                                <div class="kpi-card">
                                    <div class="kpi-label">M√¥ H√¨nh Gi√°</div>
                                    <div class="kpi-value" style="font-size: 24px;">$499/th√°ng</div>
                                    <div class="kpi-subtitle">Ph√¢n t√≠ch kh√¥ng gi·ªõi h·∫°n + API</div>
                                </div>
                                <div class="kpi-card">
                                    <div class="kpi-label">ARR t·∫°i 500 Kh√°ch H√†ng</div>
                                    <div class="kpi-value" style="font-size: 24px;" id="arrTarget">$3M</div>
                                    <div class="kpi-subtitle">M·ª•c ti√™u NƒÉm 3</div>
                                </div>
                            </div>
                            <h3 style="color: var(--accent-green); margin: 24px 0 12px;">Chi·∫øn L∆∞·ª£c Go-to-Market:</h3>
                            <ul class="insight-list">
                                <li><strong>Giai ƒêo·∫°n 1 (NƒÉm 1):</strong> SaaS B2B tr·ª±c ti·∫øp cho nh√† xu·∫•t kh·∫©u d·ªát may/ƒëi·ªán t·ª≠ Vi·ªát Nam (50 kh√°ch h√†ng, $300K ARR)</li>
                                <li><strong>Giai ƒêo·∫°n 2 (NƒÉm 2):</strong> API white-label cho forwarder v√† 3PL (150 kh√°ch h√†ng, $900K ARR)</li>
                                <li><strong>Giai ƒêo·∫°n 3 (NƒÉm 3):</strong> T√≠ch h·ª£p b·∫£o hi·ªÉm + m·ªü r·ªông khu v·ª±c sang Th√°i Lan, Indonesia (500 kh√°ch h√†ng, $3M ARR)</li>
                                <li><strong>H·∫°ng Doanh Nghi·ªáp:</strong> M√¥ h√¨nh r·ªßi ro t√πy ch·ªânh cho t·∫≠p ƒëo√†n l·ªõn ($2K-5K/th√°ng) ‚Üí 20-30% h·ªón h·ª£p doanh thu</li>
                            </ul>
                            <div class="chart-container" style="margin-top: 24px;">
                                <div id="arrChart" style="height: 300px;"></div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="8" width="18" height="10" stroke="currentColor" stroke-width="2" rx="1"/><path d="M7 8L10 4H14L17 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="7" cy="18" r="2" stroke="currentColor" stroke-width="2"/><circle cx="17" cy="18" r="2" stroke="currentColor" stroke-width="2"/></svg></div>
                                    Ki·∫øn Tr√∫c Engine-as-a-Service
                                </h2>
                            </div>
                            <div class="grid-2">
                                <div>
                                    <h3 style="color: var(--accent-green); margin-bottom: 12px;">ƒêi·ªÉm T√≠ch H·ª£p:</h3>
                                    <ul class="insight-list">
                                        <li><strong>H·ªá Th·ªëng TMS/ERP:</strong> Nh√∫ng ƒëi·ªÉm r·ªßi ro v√†o quy tr√¨nh logistics hi·ªán c√≥</li>
                                        <li><strong>N·ªÅn T·∫£ng B·∫£o Hi·ªÉm:</strong> T√≠nh to√°n ph√≠ b·∫£o hi·ªÉm ƒë·ªông d·ª±a tr√™n r·ªßi ro th·ªùi gian th·ª±c</li>
                                        <li><strong>T√†i Ch√≠nh Th∆∞∆°ng M·∫°i:</strong> H·∫°n m·ª©c t√≠n d·ª•ng ƒëi·ªÅu ch·ªânh r·ªßi ro cho LC/collections</li>
                                        <li><strong>Th·ªã Tr∆∞·ªùng V·∫≠n Chuy·ªÉn:</strong> Huy hi·ªáu r·ªßi ro cho l·ª±a ch·ªçn h√£ng v·∫≠n chuy·ªÉn/tuy·∫øn ƒë∆∞·ªùng</li>
                                    </ul>
                                </div>
                                <div>
                                    <h3 style="color: var(--accent-green); margin-bottom: 12px;">C√¥ng Ngh·ªá Stack:</h3>
                                    <ul class="insight-list">
                                        <li><strong>Core Engine:</strong> Python (NumPy, SciPy) + C++ cho Monte Carlo</li>
                                        <li><strong>L·ªõp API:</strong> FastAPI + Redis caching cho ph·∫£n h·ªìi d∆∞·ªõi gi√¢y</li>
                                        <li><strong>Pipeline D·ªØ Li·ªáu:</strong> Ngu·ªìn c·∫•p th·ªùi gian th·ª±c t·ª´ h√£ng v·∫≠n chuy·ªÉn, h·∫£i quan, API th·ªùi ti·∫øt</li>
                                        <li><strong>ML Ops:</strong> Hu·∫•n luy·ªán l·∫°i m√¥ h√¨nh li√™n t·ª•c tr√™n k·∫øt qu·∫£ l√¥ h√†ng m·ªõi</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="api-dashboard" style="margin-top: 20px;">
                                <h3 style="color: var(--accent-green); margin-bottom: 20px;">V√≠ D·ª• API:</h3>
                                
                                <!-- REQUEST DASHBOARD -->
                                <div class="api-dashboard-card request-card">
                                    <div class="api-card-header">
                                        <span class="api-method-badge post">POST</span>
                                        <span class="api-endpoint">/api/v1/analyze</span>
                                    </div>
                                    <div class="api-dashboard-grid">
                                        <div class="api-field-item">
                                            <div class="api-field-label">Route</div>
                                            <div class="api-field-value">VN-SGN ‚Üí US-LAX</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Cargo Value</div>
                                            <div class="api-field-value number">$100,000</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Cargo Type</div>
                                            <div class="api-field-value chip">electronics</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Incoterm</div>
                                            <div class="api-field-value chip">CIF</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Priority</div>
                                            <div class="api-field-value chip">balanced</div>
                                        </div>
                                    </div>
                                </div>
                                <!-- RESPONSE DASHBOARD -->
                                <div class="api-dashboard-card response-card">
                                    <div class="api-card-header">
                                        <span class="api-response-label">RESPONSE</span>
                                        <span class="api-time-badge">&lt; 800ms</span>
                                    </div>
                                    <div class="api-dashboard-grid">
                                        <div class="api-field-item highlight">
                                            <div class="api-field-label">Risk Score</div>
                                            <div class="api-field-value large number">76</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Risk Level</div>
                                            <div class="api-field-value chip medium">medium</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Expected Loss</div>
                                            <div class="api-field-value number">$12,500</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">VaR 95%</div>
                                            <div class="api-field-value number">$28,000</div>
                                        </div>
                                        <div class="api-field-item full-width">
                                            <div class="api-field-label">Recommendations</div>
                                            <div class="api-field-value array">[...]</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="14" stroke="currentColor" stroke-width="2" rx="1"/><path d="M7 9H17M7 12H17M7 15H14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div>
                                    C√¢u Chuy·ªán M·ªôt Trang Cho Nh√† ƒê·∫ßu T∆∞
                                </h2>
                            </div>
                            <div class="grid-2">
                                <div>
                                    <h3 style="color: var(--accent-green); margin-bottom: 16px;">C√¢u Chuy·ªán:</h3>
                                    <ul class="insight-list" style="font-size: 15px;">
                                        <li><strong>$2.7T</strong> chi ti√™u logistics to√†n c·∫ßu ‚Äî nh∆∞ng SME v·∫´n ra quy·∫øt ƒë·ªãnh trong b√≥ng t·ªëi</li>
                                        <li>Ch√∫ng t√¥i x√¢y d·ª±ng <strong>"Bloomberg Terminal cho R·ªßi Ro Logistics"</strong> ‚Äî ƒë·ªãnh l∆∞·ª£ng nh·ªØng g√¨ tr∆∞·ªõc ƒë√¢y ch·ªâ l√† c·∫£m t√≠nh</li>
                                        <li>Engine c·ªßa ch√∫ng t√¥i x·ª≠ l√Ω <strong>7 chi·ªÅu r·ªßi ro</strong> th·ªùi gian th·ª±c: tr·ªÖ, h∆∞ h·∫°i, chi ph√≠, ESG, kh√≠ h·∫≠u, ch√≠nh tr·ªã, v·∫≠n h√†nh</li>
                                        <li>Kh√°ch h√†ng ti·∫øt ki·ªám <strong>$1.850 m·ªói l√¥ h√†ng</strong> th√¥ng qua ƒë·ªãnh tuy·∫øn t·ªëi ∆∞u + gi·∫£m chi ph√≠ b·∫£o hi·ªÉm</li>
                                        <li>L·ªô tr√¨nh ƒë·∫øn <strong>$10M ARR</strong>: B·∫Øt ƒë·∫ßu v·ªõi SME Vi·ªát Nam ‚Üí m·ªü r·ªông sang ASEAN ‚Üí white-label cho nh√† b·∫£o hi·ªÉm/ng√¢n h√†ng</li>
                                    </ul>
                                </div>
                                <div class="chart-container">
                                    <div id="pitchChart" style="height: 350px;"></div>
                                </div>
                            </div>
                            <div class="alert-box green" style="margin-top: 20px;">
                                <strong><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> Y√™u C·∫ßu:</strong> V√≤ng seed $1.5M ƒë·ªÉ x√¢y d·ª±ng ƒë·ªôi ng≈© b√°n h√†ng, m·ªü r·ªông t√≠ch h·ª£p API, 
                                v√† ƒë·∫°t 200 kh√°ch h√†ng v√†o cu·ªëi NƒÉm 2. M·ª•c ti√™u tƒÉng tr∆∞·ªüng 40% YoY v·ªõi l·ªô tr√¨nh c√≥ l·ª£i nhu·∫≠n trong NƒÉm 3.
                            </div>
                        </div>
                    </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================
         3D AI CHAT WIDGET - CSS moved to /static/css/ai_chat.css
    ======================================== -->
    <!-- CSS removed - using external file /static/css/ai_chat.css -->
    <!-- OLD INLINE CSS REMOVED - Using external CSS file instead -->

    <!-- Fixed AI Chat Widget -->
    <div class="ai-widget-container" id="aiWidgetContainer">
        <!-- 3D Bot Character -->
        <div class="ai-bot-3d" id="aiBot">
            <div class="bot-head">
                <div class="bot-antenna"></div>
                <div class="bot-eyes">
                    <div class="bot-eye"></div>
                    <div class="bot-eye"></div>
                </div>
                <div class="bot-mouth"></div>
            </div>
            <div class="bot-body">
                <div class="bot-arm left"></div>
                <div class="bot-arm right"></div>
            </div>
            <div class="bot-legs">
                <div class="bot-leg"></div>
                <div class="bot-leg"></div>
            </div>
        </div>
    </div>

    <!-- AI Chat Popup (separate from widget container) -->
    <div class="ai-chat-popup" id="chatPopup" aria-live="polite">
        <div class="chat-header">
            <div class="chat-header-info">
                <div class="chat-avatar">ü§ñ</div>
                <div class="chat-title">
                    <h3>RISKCAST AI Assistant</h3>
                    <div class="chat-status">
                        <span class="status-dot"></span>
                        <span>Online ‚Ä¢ 24/7</span>
                    </div>
                </div>
            </div>
            <button class="chat-close" id="chatClose" aria-label="ƒê√≥ng tr·ª£ l√Ω">‚úï</button>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message ai">
                <div class="message-avatar">ü§ñ</div>
                <div class="message-bubble">
                    Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p b·∫°n gi·∫£i th√≠ch ƒëi·ªÉm r·ªßi ro, ESG, climate hazard index ho·∫∑c ƒë·ªÅ xu·∫•t c√°ch t·ªëi ∆∞u tuy·∫øn v·∫≠n chuy·ªÉn. üëã
                </div>
            </div>
        </div>

        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <input 
                    type="text" 
                    class="chat-input" 
                    id="chatInput" 
                    placeholder="H·ªèi t√¥i v·ªÅ r·ªßi ro logistics..."
                    autocomplete="off"
                >
                <button class="chat-send-btn" id="sendButton" aria-label="G·ª≠i c√¢u h·ªèi">‚û§</button>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // FORMAT AI RESPONSE (Parse JSON and format nicely)
        // ========================================
        function formatAIResponse(text) {
            if (!text) return '';
            
            // Try to parse as JSON
            try {
                // First, try to parse the entire text as JSON
                try {
                    const parsed = JSON.parse(text);
                    return formatParsedJSON(parsed);
                } catch (e) {
                    // Not a complete JSON, try to find JSON objects in the text
                    const jsonMatches = text.match(/\{[\s\S]*?\}/g);
                    if (jsonMatches && jsonMatches.length > 0) {
                        // Try to parse the largest JSON match (most likely to be complete)
                        const sortedMatches = jsonMatches.sort((a, b) => b.length - a.length);
                        for (const jsonStr of sortedMatches) {
                            try {
                                const parsed = JSON.parse(jsonStr);
                                if (typeof parsed === 'object' && parsed !== null && !Array.isArray(parsed)) {
                                    return formatParsedJSON(parsed);
                                }
                            } catch (e) {
                                // Not valid JSON, skip
                                continue;
                            }
                        }
                    }
                }
            } catch (e) {
                console.error('Error parsing JSON:', e);
                // Fall through to text formatting
            }
            
            // Format as markdown-like text, but also try to format any [object Object] references
            let formattedText = formatTextResponse(text);
            
            // Replace [object Object] with a note
            formattedText = formattedText.replace(/\[object Object\]/g, '<em style="color: #ffaa00;">[D·ªØ li·ªáu ƒë·ªëi t∆∞·ª£ng - c·∫ßn ƒë·ªãnh d·∫°ng]</em>');
            
            return formattedText;
        }
        
        function formatParsedJSON(parsed) {
            try {
                let html = '';
                
                // Format result if exists
                if (parsed.result !== undefined) {
                    html += `<div class="ai-result-card">
                        <div class="ai-result-header">
                            <span class="ai-icon-badge">‚úì</span>
                            <strong>K·∫øt qu·∫£</strong>
                        </div>
                        <div class="result-value">${escapeHtml(String(parsed.result))}</div>
                    </div>`;
                }
                
                // Format reasoning if exists
                if (parsed.reasoning && Array.isArray(parsed.reasoning)) {
                    html += `<div class="ai-reasoning-card">
                        <div class="ai-reasoning-header">
                            <span class="ai-icon-badge">üí°</span>
                            <strong>Gi·∫£i th√≠ch</strong>
                        </div>
                        <ul class="reasoning-list">`;
                    parsed.reasoning.forEach((item) => {
                        html += `<li>${escapeHtml(String(item))}</li>`;
                    });
                    html += '</ul></div>';
                }
                
                // Format response field specially (main AI response)
                if (parsed.response !== undefined && typeof parsed.response === 'string') {
                    html += `<div class="ai-response-card">
                        <div class="ai-response-content">
                            ${formatTextResponse(parsed.response)}
                        </div>
                    </div>`;
                }
                
                // Format other fields
                for (const [key, value] of Object.entries(parsed)) {
                    if (key !== 'result' && key !== 'reasoning' && key !== 'response') {
                        html += formatField(key, value);
                    }
                }
                
                return html || formatTextResponse(JSON.stringify(parsed, null, 2));
            } catch (e) {
                console.error('Error formatting parsed JSON:', e);
                return formatTextResponse(JSON.stringify(parsed, null, 2));
            }
        }
        
        function formatTextResponse(text) {
            if (!text) return '';
            
            // Escape HTML first
            let html = escapeHtml(text);
            
            // Format headers (## Header)
            html = html.replace(/^##\s+(.+)$/gm, '<h3 class="ai-text-header">$1</h3>');
            html = html.replace(/^###\s+(.+)$/gm, '<h4 class="ai-text-subheader">$1</h4>');
            
            // Format code blocks
            html = html.replace(/```(\w+)?\n([\s\S]*?)```/g, '<pre class="ai-code-block"><code>$2</code></pre>');
            
            // Format inline code
            html = html.replace(/`([^`]+)`/g, '<code class="ai-inline-code">$1</code>');
            
            // Format bold
            html = html.replace(/\*\*([^*]+)\*\*/g, '<strong class="ai-bold">$1</strong>');
            
            // Format italic
            html = html.replace(/\*([^*]+)\*/g, '<em class="ai-italic">$1</em>');
            
            // Format lists - improved
            const lines = html.split('\n');
            let formattedLines = [];
            let inList = false;
            let listItems = [];
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const listMatch = line.match(/^\s*[-*+]\s+(.+)$/);
                const numMatch = line.match(/^\s*\d+\.\s+(.+)$/);
                
                if (listMatch || numMatch) {
                    if (!inList) {
                        inList = true;
                        listItems = [];
                    }
                    listItems.push(`<li>${listMatch ? listMatch[1] : numMatch[1]}</li>`);
                } else {
                    if (inList && listItems.length > 0) {
                        formattedLines.push(`<ul class="ai-text-list">${listItems.join('')}</ul>`);
                        listItems = [];
                        inList = false;
                    }
                    formattedLines.push(line);
                }
            }
            
            if (inList && listItems.length > 0) {
                formattedLines.push(`<ul class="ai-text-list">${listItems.join('')}</ul>`);
            }
            
            html = formattedLines.join('\n');
            
            // Format paragraphs (double line breaks = new paragraph)
            // Split by double line breaks first
            const paragraphs = html.split(/\n\s*\n/);
            let formattedParagraphs = [];
            
            for (let para of paragraphs) {
                para = para.trim();
                if (!para) continue;
                
                // Check if paragraph contains list or header (already formatted)
                if (para.includes('<ul') || para.includes('<h3') || para.includes('<h4') || para.includes('<pre')) {
                    formattedParagraphs.push(para);
                } else {
                    // Regular paragraph - replace single line breaks with <br> and wrap in <p>
                    para = para.replace(/\n/g, '<br>');
                    formattedParagraphs.push(`<p>${para}</p>`);
                }
            }
            
            html = formattedParagraphs.join('\n\n');
            
            // Wrap in container for better styling
            return `<div class="ai-text-content">${html}</div>`;
        }
        
        function formatField(key, value) {
            try {
                let html = '';
                const fieldName = formatFieldName(key);
                const icon = getFieldIcon(key);
                
                // Handle null/undefined
                if (value === null || value === undefined) {
                    return `<div class="ai-field-card empty">
                        <div class="ai-field-header">
                            <span class="ai-icon-badge">${icon}</span>
                            <strong>${escapeHtml(fieldName)}</strong>
                        </div>
                        <div class="ai-field-content"><em>Kh√¥ng c√≥ d·ªØ li·ªáu</em></div>
                    </div>`;
                }
                
                // Handle arrays
                if (Array.isArray(value)) {
                    html += `<div class="ai-field-card list-field">
                        <div class="ai-field-header">
                            <span class="ai-icon-badge">${icon}</span>
                            <strong>${escapeHtml(fieldName)}</strong>
                            <span class="ai-badge-count">${value.length} m·ª•c</span>
                        </div>
                        <ul class="field-list">`;
                    value.forEach((item, index) => {
                        if (typeof item === 'object' && item !== null) {
                            html += `<li class="field-item"><span class="item-number">${index + 1}.</span>${formatObject(item, true, 0)}</li>`;
                        } else {
                            html += `<li class="field-item"><span class="item-number">${index + 1}.</span>${escapeHtml(String(item))}</li>`;
                        }
                    });
                    html += '</ul></div>';
                    return html;
                }
                
                // Handle objects
                if (typeof value === 'object') {
                    html += `<div class="ai-field-card object-field">
                        <div class="ai-field-header">
                            <span class="ai-icon-badge">${icon}</span>
                            <strong>${escapeHtml(fieldName)}</strong>
                        </div>`;
                    html += formatObject(value, false, 0);
                    html += '</div>';
                    return html;
                }
                
                // Handle primitive values
                html += `<div class="ai-field-card simple-field">
                    <div class="ai-field-header">
                        <span class="ai-icon-badge">${icon}</span>
                        <strong>${escapeHtml(fieldName)}</strong>
                    </div>
                    <div class="ai-field-content">${escapeHtml(String(value))}</div>
                </div>`;
                return html;
            } catch (e) {
                console.error('Error formatting field:', key, e);
                return `<div class="ai-field-card error">
                    <div class="ai-field-header">
                        <span class="ai-icon-badge">‚ö†</span>
                        <strong>${escapeHtml(String(key))}</strong>
                    </div>
                    <div class="ai-field-content"><em>L·ªói khi format</em></div>
                </div>`;
            }
        }
        
        function getFieldIcon(key) {
            const iconMap = {
                'main_risk_drivers': '‚ö†Ô∏è',
                'risk_impact_quantification': 'üìä',
                'route_recommendations': 'üó∫Ô∏è',
                'insurance_guidance': 'üõ°Ô∏è',
                'esg_advisory': 'üå±',
                'delay_probability_prediction': '‚è±Ô∏è',
                'risk_drivers': '‚ö†Ô∏è',
                'impact': 'üí•',
                'recommendations': 'üí°',
                'coverage': 'üìã',
                'limits': 'üìè',
                'opportunities': '‚ú®',
                'probability': 'üìà',
                'mitigation': 'üîß',
                'summary': 'üìù',
                'analysis': 'üîç',
                'conclusion': '‚úÖ'
            };
            return iconMap[key] || 'üìå';
        }
        
        function formatObject(obj, isListItem = false, depth = 0) {
            // Prevent infinite recursion
            if (depth > 5) {
                return '<div class="object-nested-too-deep"><em>[Nested qu√° s√¢u]</em></div>';
            }
            
            if (!obj || typeof obj !== 'object') {
                return escapeHtml(String(obj));
            }
            
            // Handle arrays
            if (Array.isArray(obj)) {
                let html = '<ul class="nested-list">';
                obj.forEach((item, index) => {
                    if (typeof item === 'object' && item !== null) {
                        html += `<li class="nested-item"><span class="item-bullet">${index + 1}.</span>${formatObject(item, true, depth + 1)}</li>`;
                    } else {
                        html += `<li class="nested-item"><span class="item-bullet">${index + 1}.</span>${escapeHtml(String(item))}</li>`;
                    }
                });
                html += '</ul>';
                return html;
            }
            
            let html = '';
            
            // Check if it's a simple key-value object
            const keys = Object.keys(obj);
            if (keys.length === 0) {
                return '<div class="object-empty"><em>Kh√¥ng c√≥ d·ªØ li·ªáu</em></div>';
            }
            
            // Format as structured list
            html += `<div class="object-container ${isListItem ? 'nested' : ''}">`;
            
            try {
                for (const [k, v] of Object.entries(obj)) {
                    const displayKey = formatFieldName(k);
                    const icon = getFieldIcon(k);
                    
                    if (v === null || v === undefined) {
                        html += `<div class="object-field-item">
                            <div class="object-field-label">
                                <span class="mini-icon">${icon}</span>
                                <strong>${escapeHtml(displayKey)}</strong>
                            </div>
                            <div class="object-field-value"><em>Kh√¥ng c√≥ d·ªØ li·ªáu</em></div>
                        </div>`;
                    } else if (Array.isArray(v)) {
                        html += `<div class="object-field-item">
                            <div class="object-field-label">
                                <span class="mini-icon">${icon}</span>
                                <strong>${escapeHtml(displayKey)}</strong>
                                <span class="mini-badge">${v.length}</span>
                            </div>
                            <ul class="nested-list">`;
                        v.forEach((item, idx) => {
                            if (typeof item === 'object' && item !== null) {
                                html += `<li class="nested-item"><span class="item-bullet">${idx + 1}.</span>${formatObject(item, true, depth + 1)}</li>`;
                            } else {
                                html += `<li class="nested-item"><span class="item-bullet">${idx + 1}.</span>${escapeHtml(String(item))}</li>`;
                            }
                        });
                        html += '</ul></div>';
                    } else if (typeof v === 'object') {
                        html += `<div class="object-field-item nested-object">
                            <div class="object-field-label">
                                <span class="mini-icon">${icon}</span>
                                <strong>${escapeHtml(displayKey)}</strong>
                            </div>`;
                        html += formatObject(v, true, depth + 1);
                        html += '</div>';
                    } else {
                        html += `<div class="object-field-item">
                            <div class="object-field-label">
                                <span class="mini-icon">${icon}</span>
                                <strong>${escapeHtml(displayKey)}</strong>
                            </div>
                            <div class="object-field-value">${escapeHtml(String(v))}</div>
                        </div>`;
                    }
                }
            } catch (e) {
                console.error('Error formatting object:', e);
                html += '<div class="object-error"><em>L·ªói khi format d·ªØ li·ªáu</em></div>';
            }
            
            html += '</div>';
            return html;
        }
        
        function formatFieldName(key) {
            // Convert snake_case or camelCase to readable format
            const nameMap = {
                'main_risk_drivers': 'C√°c Y·∫øu T·ªë R·ªßi Ro Ch√≠nh',
                'risk_impact_quantification': 'ƒê·ªãnh L∆∞·ª£ng T√°c ƒê·ªông R·ªßi Ro',
                'route_recommendations': 'Khuy·∫øn Ngh·ªã Tuy·∫øn ƒê∆∞·ªùng',
                'insurance_guidance': 'H∆∞·ªõng D·∫´n B·∫£o Hi·ªÉm',
                'esg_advisory': 'T∆∞ V·∫•n ESG',
                'delay_probability_prediction': 'D·ª± ƒêo√°n X√°c Su·∫•t Tr·ªÖ',
                'risk_drivers': 'Y·∫øu T·ªë R·ªßi Ro',
                'impact': 'T√°c ƒê·ªông',
                'recommendations': 'Khuy·∫øn Ngh·ªã',
                'coverage': 'Ph·∫°m Vi B·∫£o Hi·ªÉm',
                'limits': 'Gi·ªõi H·∫°n',
                'opportunities': 'C∆° H·ªôi',
                'probability': 'X√°c Su·∫•t',
                'mitigation': 'Gi·∫£m Thi·ªÉu'
            };
            
            if (nameMap[key]) {
                return nameMap[key];
            }
            
            // Convert snake_case to Title Case
            return key
                .replace(/_/g, ' ')
                .replace(/\b\w/g, l => l.toUpperCase());
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // ========================================
        // SEND MESSAGE FUNCTION (Real API)
        // ========================================
        // Get context from current page data
        function getCurrentContext() {
            const context = {};
            
            // Try to get risk data from window object
            if (window.riskData && typeof window.riskData === 'object') {
                context.shipment_data = window.riskData;
            }
            
            // Try to get current risk metrics from page
            const overallRisk = document.getElementById('overall-risk-index')?.textContent;
            const expectedLoss = document.getElementById('expected-loss')?.textContent;
            const reliability = document.getElementById('reliability-score')?.textContent;
            
            if (overallRisk && overallRisk !== '--') {
                context.current_metrics = {
                    overall_risk: overallRisk,
                    expected_loss: expectedLoss || 'N/A',
                    reliability: reliability || 'N/A'
                };
            }
            
            // Try to get route information
            const routeChip = document.getElementById('routeChip')?.textContent;
            if (routeChip && routeChip !== 'ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶') {
                context.route = routeChip;
            }
            
            return context;
        }
        
        async function sendMessage() {
            const messageText = chatInput.value.trim();
            
            if (!messageText) return;

            addMessage(messageText, 'user');
            chatInput.value = '';
            sendButton.disabled = true;
            showTypingIndicator();
            
            // Get context from current page
            const context = getCurrentContext();
            
            try {
                const response = await fetch('/api/ai/stream', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        prompt: messageText, 
                        context: context 
                    })
                });

                if (!response.ok) {
                    // Try to get error details from response
                    let errorDetail = `HTTP error! status: ${response.status}`;
                    try {
                        const errorData = await response.json();
                        if (errorData.detail) {
                            errorDetail = errorData.detail;
                        }
                    } catch (e) {
                        // If response is not JSON, use status text
                        errorDetail = response.statusText || errorDetail;
                    }
                    throw new Error(errorDetail);
                }

                hideTypingIndicator();

                const aiMessageDiv = document.createElement('div');
                aiMessageDiv.className = 'message ai';
                const aiAvatar = document.createElement('div');
                aiAvatar.className = 'message-avatar';
                aiAvatar.textContent = 'ü§ñ';
                const aiBubble = document.createElement('div');
                aiBubble.className = 'message-bubble';
                aiBubble.innerHTML = '';
                aiMessageDiv.appendChild(aiAvatar);
                aiMessageDiv.appendChild(aiBubble);
                chatMessages.appendChild(aiMessageDiv);

                const reader = response.body.getReader();
                const decoder = new TextDecoder();
                let fullText = '';

                while (true) {
                    const { done, value } = await reader.read();
                    if (done) break;

                    const chunk = decoder.decode(value, { stream: true });
                    const lines = chunk.split('\n');

                    for (const line of lines) {
                        if (!line.trim()) continue;

                        if (line.startsWith('data: ')) {
                            const data = line.slice(6);
                            
                            if (data === '[DONE]') break;

                            try {
                                const parsed = JSON.parse(data);
                                if (parsed.text) {
                                    fullText += parsed.text;
                                    // Format and display the text
                                    aiBubble.innerHTML = formatAIResponse(fullText);
                                    scrollToBottom();
                                } else if (parsed.error) {
                                    // Show user-friendly error message
                                    const errorMsg = parsed.error;
                                    if (errorMsg.includes('Invalid API key') || errorMsg.includes('authentication_error') || errorMsg.includes('401')) {
                                        aiBubble.innerHTML = '<div class="ai-error">‚ùå L·ªói x√°c th·ª±c: API key kh√¥ng h·ª£p l·ªá. Vui l√≤ng ki·ªÉm tra file .env v√† c·∫≠p nh·∫≠t ANTHROPIC_API_KEY. L·∫•y key m·ªõi t·∫°i: <a href="https://console.anthropic.com/" target="_blank">https://console.anthropic.com/</a></div>';
                                    } else {
                                        aiBubble.innerHTML = `<div class="ai-error">‚ùå L·ªói: ${escapeHtml(errorMsg)}</div>`;
                                    }
                                    scrollToBottom();
                                    break; // Stop processing on error
                                }
                            } catch (e) {
                                if (data !== '[DONE]') {
                                    fullText += data;
                                    aiBubble.innerHTML = formatAIResponse(fullText);
                                    scrollToBottom();
                                }
                            }
                        } else {
                            fullText += line;
                            aiBubble.innerHTML = formatAIResponse(fullText);
                            scrollToBottom();
                        }
                    }
                }

            } catch (error) {
                console.error('Error sending message:', error);
                hideTypingIndicator();
                
                // Try to get error details from response
                let errorMessage = 'Xin l·ªói, ƒë√£ x·∫£y ra l·ªói khi k·∫øt n·ªëi v·ªõi AI. Vui l√≤ng th·ª≠ l·∫°i sau.';
                
                if (error.message) {
                    if (error.message.includes('500')) {
                        errorMessage = 'L·ªói server: Vui l√≤ng ki·ªÉm tra c·∫•u h√¨nh ANTHROPIC_API_KEY trong file .env';
                    } else if (error.message.includes('ANTHROPIC_API_KEY')) {
                        errorMessage = 'L·ªói: ANTHROPIC_API_KEY ch∆∞a ƒë∆∞·ª£c c·∫•u h√¨nh. Vui l√≤ng ki·ªÉm tra file .env';
                    } else {
                        errorMessage = `L·ªói: ${error.message}`;
                    }
                }
                
                addMessage(errorMessage, 'ai');
            } finally {
                sendButton.disabled = false;
            }
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = sender === 'ai' ? 'ü§ñ' : 'üë§';
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            
            // Format AI messages, keep user messages as plain text
            if (sender === 'ai') {
                bubble.innerHTML = formatAIResponse(text);
            } else {
                bubble.textContent = text;
            }
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(bubble);
            chatMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        function showTypingIndicator() {
            const indicator = document.createElement('div');
            indicator.className = 'message ai';
            indicator.id = 'typingIndicator';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'ü§ñ';
            
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message-bubble typing-indicator active';
            typingDiv.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
            
            indicator.appendChild(avatar);
            indicator.appendChild(typingDiv);
            chatMessages.appendChild(indicator);
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        function scrollToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        if (sendButton) sendButton.addEventListener('click', sendMessage);
        if (chatInput) {
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
        }

        if (chatPopup) {
            chatPopup.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        }
    </script>

    <script>
        // === RISKCAST FIX === All data management is now handled by ResultsCore

        // This script only initializes ResultsCore.init() on DOMContentLoaded

        

        document.addEventListener("DOMContentLoaded", () => {

            console.log("üî• Inline script loaded");

            if (window.ResultsCore) {

                console.log("üî• ResultsCore found ‚Üí INIT()");

                window.ResultsCore.init();

                } else {

                console.error("ResultsCore missing!");

            }

        });

    </script>

    <!-- Logistics Data & Smart Input System -->
    <script src="/static/js/logistics_data.js"></script>
    <script src="/static/js/smart_input.js"></script>
    
    <script src="/static/js/results.js"></script>
    <script src="/static/js/ai_chat.js"></script>
</body>
</html>