<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>RISKCAST v12.5 ‚Äî SUPER MODE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- External CSS files -->
    <link rel="stylesheet" href="/static/css/results.css">
    <link rel="stylesheet" href="/static/css/neon_icons.css">
    <link rel="stylesheet" href="/static/css/ai_panel.css">
    <link rel="stylesheet" href="/static/css/neon.css">
    
    <!-- External JS libraries -->
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <script src="/static/js/translations_en.js"></script>
    <script src="/static/js/translations_vi.js"></script>
    <script src="/static/js/common_lang.js"></script>
    <script src="/static/js/results_core.js"></script>
    <script src="/static/js/streaming.js"></script>
    <script src="/static/js/ai_adviser.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <div class="brand">
                    <div class="logo">R</div>
                    <div class="brand-text">
                        <h1>RISKCAST v12.5</h1>
                        <p id="brand-subtitle" data-lang="brand_subtitle">N·ªÅn T·∫£ng Th√¥ng Minh Ph√¢n T√≠ch R·ªßi Ro Logistics ƒê∆∞·ª£c H·ªó Tr·ª£ B·ªüi AI</p>
                    </div>
                </div>
                <div class="header-meta">
                    <div class="lang-switcher">
                        <button class="lang-btn active" data-lang="vi" id="lang-btn-vi">VI</button>
                        <button class="lang-btn" data-lang="en" id="lang-btn-en">EN</button>
                    </div>
                    <div class="chip status">
                        <span class="pulse"></span>
                        <span id="statusText" data-lang="status_ready">Ph√¢n T√≠ch Ho√†n T·∫•t</span>
                    </div>
                    <div class="chip" id="routeChip" data-lang="loading">ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶</div>
                    <div class="chip" id="dateChip" data-lang="loading">ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶</div>
                    <button id="ai-chat-toggle" class="neon-button" style="display: none;">
                        <span>ü§ñ</span> AI Chat
                    </button>
                </div>
            </div>
        </header>

        <div class="tabs">
            <button id="tab-enterprise" class="tab-btn view-tab active">
                <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="13" y="3" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="3" y="13" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="13" y="13" width="8" height="8" stroke="currentColor" stroke-width="2"/></svg></div> <span data-lang="tab_enterprise">Ch·∫ø ƒê·ªô Doanh Nghi·ªáp</span>
            </button>
            <button id="tab-research" class="tab-btn view-tab">
                <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg></div> <span data-lang="tab_research">Ch·∫ø ƒê·ªô Ph√¢n T√≠ch NCKH</span>
            </button>
            <button id="tab-investor" class="tab-btn view-tab">
                <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 21L12 3L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 17L12 11L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div> <span data-lang="tab_investor">Ch·∫ø ƒê·ªô Tr√¨nh B√†y Nh√† ƒê·∫ßu T∆∞</span>
            </button>
        </div>

        <!-- RESULTS LAYOUT: Dashboard -->
        <div class="results-main">
                <!-- ENTERPRISE MODE -->
                <div id="mode-enterprise" class="mode-section">
                    <div id="enterprise" class="panel">
                        <div class="dashboard-container">
                            <!-- Executive Overview Section -->
                            <section id="executive_overview" class="card-section section-block overview-risk">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="section-title card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 21L12 3L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 17L12 11L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div> <span data-lang="section_executive">T·ªïng Quan ƒêi·ªÅu H√†nh</span></h2>
                                        <span class="card-badge" data-lang="tab_enterprise">Ch·∫ø ƒê·ªô Doanh Nghi·ªáp</span>
                                    </div>
                                    <div class="section-content">
                                    <div class="grid-4">
                                        <div class="kpi-card">
                                            <div class="kpi-label" id="label-overall-risk" data-lang="label_overall_risk">Ch·ªâ s·ªë r·ªßi ro t·ªïng h·ª£p</div>
                                            <div class="kpi-value" id="overall-risk-index">--</div>
                                            <div class="kpi-subtitle" id="risk-level-label">--</div>
                                        </div>
                                        <div class="kpi-card">
                                            <div class="kpi-label" id="label-expected-loss" data-lang="label_expected_loss">T·ªïn th·∫•t k·ª≥ v·ªçng</div>
                                            <div class="kpi-value" id="expected-loss">--</div>
                                            <div class="kpi-subtitle" data-lang="subtitle_per_shipment">M·ªói l√¥ h√†ng</div>
                                        </div>
                                        <div class="kpi-card">
                                            <div class="kpi-label" id="label-reliability" data-lang="label_reliability">ƒê·ªô tin c·∫≠y giao h√†ng</div>
                                            <div class="kpi-value" id="reliability-score">--</div>
                                            <div class="kpi-subtitle" data-lang="subtitle_on_time_prob">X√°c su·∫•t ƒë√∫ng h·∫°n</div>
                                        </div>
                                        <div class="kpi-card">
                                            <div class="kpi-label" id="label-esg" data-lang="label_esg">ƒêi·ªÉm ESG (M√¥i tr∆∞·ªùng ‚Äì X√£ h·ªôi ‚Äì Qu·∫£n tr·ªã)</div>
                                            <div class="kpi-value" id="esg-score">--</div>
                                            <div class="kpi-subtitle" data-lang="subtitle_climate_political">Kh√≠ h·∫≠u + Ch√≠nh tr·ªã</div>
                                        </div>
                                    </div>
                                    
                                    <!-- NEW KPI CARDS: Advanced Parameters -->
                                    <div class="grid-4" style="margin-top: 24px;">
                                        <!-- Climate Hazard Index (NEW) -->
                                        <div class="kpi-card climate-card">
                                            <div class="kpi-label">Climate Hazard Index (CHI)</div>
                                            <div class="kpi-value" id="climate-hazard-index">--</div>
                                            <div class="kpi-subtitle">v14.5 Climate Risk</div>
                                        </div>
                                        
                                        <!-- Distance (NEW) -->
                                        <div class="kpi-card">
                                            <div class="kpi-label">Transport Distance</div>
                                            <div class="kpi-value" id="transport-distance">--</div>
                                            <div class="kpi-subtitle">kilometers</div>
                                        </div>
                                        
                                        <!-- Route Complexity (NEW) -->
                                        <div class="kpi-card">
                                            <div class="kpi-label">Route Complexity</div>
                                            <div class="kpi-value" id="route-complexity">--</div>
                                            <div class="kpi-subtitle">Based on route type</div>
                                        </div>
                                        
                                        <!-- Carrier Quality (NEW) -->
                                        <div class="kpi-card">
                                            <div class="kpi-label">Carrier Rating</div>
                                            <div class="kpi-value" id="carrier-rating-display">--</div>
                                            <div class="kpi-subtitle">Service quality (1-5 ‚≠ê)</div>
                                        </div>
                                    </div>
                                    
                                    <ul class="insight-list" style="margin-top: 24px;">
                                        <li><strong id="label-top-route" data-lang="label_top_route">R·ªßi ro tuy·∫øn v·∫≠n t·∫£i l·ªõn nh·∫•t:</strong> <span id="top-route-risk">--</span></li>
                                        <li><strong id="label-main-driver" data-lang="label_main_driver">Nguy√™n nh√¢n ch√≠nh:</strong> <span id="main-driver">--</span></li>
                                        <li><strong id="label-recommendation" data-lang="label_recommendation">Khuy·∫øn ngh·ªã c·ªßa h·ªá th·ªëng:</strong> <span id="recommendation">--</span></li>
                                    </ul>
                                    </div>
                                </div>
                            </section>

                            <!-- SECTION 2: ADVANCED RISK PARAMETERS VISUALIZATION -->
                            <section class="section-block">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">
                                                <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Ph√¢n T√≠ch Tham S·ªë R·ªßi Ro N√¢ng Cao</span>
                                        </h2>
                                        <span class="card-badge">v14.0 Enhanced</span>
                                    </div>
                                    
                                    <!-- Advanced Parameters Grid -->
                                    <div class="grid-3" style="margin-bottom: 32px;">
                                        <!-- Weather Risk Card -->
                                        <div class="param-card weather-card">
                                            <div class="param-icon">üå¶Ô∏è</div>
                                            <div class="param-label">Weather Risk Score</div>
                                            <div class="param-value" id="weather-risk-value">--</div>
                                            <div class="param-progress">
                                                <div class="param-progress-bar" id="weather-risk-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="param-description" id="weather-risk-desc">--</div>
                                        </div>
                                        
                                        <!-- Port Risk Card -->
                                        <div class="param-card port-card">
                                            <div class="param-icon">‚öì</div>
                                            <div class="param-label">Port Risk Score</div>
                                            <div class="param-value" id="port-risk-value">--</div>
                                            <div class="param-progress">
                                                <div class="param-progress-bar" id="port-risk-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="param-description" id="port-risk-desc">--</div>
                                        </div>
                                        
                                        <!-- Container Match Card -->
                                        <div class="param-card container-card">
                                            <div class="param-icon">üì¶</div>
                                            <div class="param-label">Container Match Quality</div>
                                            <div class="param-value" id="container-match-value">--</div>
                                            <div class="param-progress">
                                                <div class="param-progress-bar" id="container-match-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="param-description" id="container-match-desc">--</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Advanced Radar Chart -->
                                    <div class="chart-container">
                                        <h3 class="chart-title">8-Dimensional Risk Profile (Including Advanced Parameters)</h3>
                                        <div id="advancedRadarChart" style="height: 400px;"></div>
                                    </div>
                                </div>
                            </section>

                            <!-- SECTION 3: CLIMATE RISK ANALYSIS v14.5 -->
                            <section class="section-block climate-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">
                                                <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                                    <path d="M3 15C3 17.8284 4.23858 20.3569 6.25 22C8.26142 20.3569 9.5 17.8284 9.5 15C9.5 12.1716 8.26142 9.64309 6.25 8C4.23858 9.64309 3 12.1716 3 15Z" stroke="currentColor" stroke-width="2"/>
                                                    <path d="M14 15C14 17.8284 15.2386 20.3569 17.25 22C19.2614 20.3569 20.5 17.8284 20.5 15C20.5 12.1716 19.2614 9.64309 17.25 8C15.2386 9.64309 14 12.1716 14 15Z" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Climate Risk Analysis v14.5</span>
                                        </h2>
                                        <span class="card-badge climate-badge">NOAA/NASA Data Integration</span>
                                    </div>
                                    
                                    <!-- Climate Hazard Index Hero -->
                                    <div class="climate-hero">
                                        <div class="climate-hero-value" id="chi-hero-value">--</div>
                                        <div class="climate-hero-label">Climate Hazard Index (CHI)</div>
                                        <div class="climate-hero-subtitle">Composite score: ENSO + Typhoon + SST + Port Stress</div>
                                    </div>
                                    
                                    <!-- Climate Metrics Grid -->
                                    <div class="grid-4" style="margin-top: 32px;">
                                        <div class="climate-metric">
                                            <div class="metric-icon">üåä</div>
                                            <div class="metric-label">ENSO Index</div>
                                            <div class="metric-value" id="enso-index-value">--</div>
                                            <div class="metric-bar">
                                                <div class="metric-bar-fill" id="enso-bar" style="width: 50%;"></div>
                                            </div>
                                            <div class="metric-status" id="enso-status">--</div>
                                        </div>
                                        
                                        <div class="climate-metric">
                                            <div class="metric-icon">üåÄ</div>
                                            <div class="metric-label">Typhoon Frequency</div>
                                            <div class="metric-value" id="typhoon-freq-value">--</div>
                                            <div class="metric-bar">
                                                <div class="metric-bar-fill" id="typhoon-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="metric-status" id="typhoon-status">--</div>
                                        </div>
                                        
                                        <div class="climate-metric">
                                            <div class="metric-icon">üå°Ô∏è</div>
                                            <div class="metric-label">SST Anomaly</div>
                                            <div class="metric-value" id="sst-anomaly-value">--</div>
                                            <div class="metric-bar">
                                                <div class="metric-bar-fill" id="sst-bar" style="width: 50%;"></div>
                                            </div>
                                            <div class="metric-status" id="sst-status">--</div>
                                        </div>
                                        
                                        <div class="climate-metric">
                                            <div class="metric-icon">‚ö°</div>
                                            <div class="metric-label">Climate Volatility</div>
                                            <div class="metric-value" id="climate-volatility-value">--</div>
                                            <div class="metric-bar">
                                                <div class="metric-bar-fill" id="volatility-bar" style="width: 0%;"></div>
                                            </div>
                                            <div class="metric-status" id="volatility-status">--</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Climate Timeline Chart -->
                                    <div class="chart-container" style="margin-top: 32px;">
                                        <h3 class="chart-title">30-Day Climate Risk Forecast</h3>
                                        <div id="climateTimelineChart" style="height: 350px;"></div>
                                    </div>
                                    
                                    <!-- Climate Risk Table -->
                                    <div style="margin-top: 32px;">
                                        <h3 class="chart-title">Climate Risk Breakdown</h3>
                                        <table class="data-table">
                                            <thead>
                                                <tr>
                                                    <th>Parameter</th>
                                                    <th>Current Value</th>
                                                    <th>Risk Level</th>
                                                    <th>Impact on Shipment</th>
                                                </tr>
                                            </thead>
                                            <tbody id="climate-risk-table-body">
                                                <!-- Populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </section>

                            <!-- Risk Gauges Overview -->
                            <section class="section-block">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 6V12L16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 2L14 8L20 8L15 12L17 18L12 15L7 18L9 12L4 8L10 8Z" stroke="currentColor" stroke-width="1.5" fill="none"/></svg></div> <span data-lang="section_risk_gauges">T·ªïng Quan ƒê·ªìng H·ªì R·ªßi Ro</span></h2>
                                    </div>
                                    <div class="grid-3">
                                        <div class="chart-container gauge-container">
                                            <div id="gaugeRisk"></div>
                                        </div>
                                        <div class="chart-container gauge-container">
                                            <div id="gaugeReliability"></div>
                                        </div>
                                        <div class="chart-container gauge-container">
                                            <div id="gaugeEsg"></div>
                                        </div>
                                    </div>
                                    <div id="gauge-explanation" class="gauge-explanation-panel"></div>
                                </div>
                            </section>

                            <!-- ENHANCED PRIORITY PROFILE SECTION -->
                            <section class="section-block priority-section">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">
                                                <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                                    <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Priority Profile Analysis</span>
                                        </h2>
                                        <span class="card-badge">Speed-Cost-Risk Tradeoff</span>
                                    </div>
                                    
                                    <!-- Priority Description -->
                                    <div class="priority-description">
                                        <p>Ph√¢n t√≠ch n√†y cho th·∫•y c√°ch doanh nghi·ªáp c√¢n b·∫±ng gi·ªØa 3 y·∫øu t·ªë quan tr·ªçng: 
                                        <strong style="color: #3b82f6;">T·ªëc ƒë·ªô giao h√†ng</strong>, 
                                        <strong style="color: #fbbf24;">Chi ph√≠ v·∫≠n chuy·ªÉn</strong>, v√† 
                                        <strong style="color: #ef4444;">Kh·∫£ nƒÉng ch·∫•p nh·∫≠n r·ªßi ro</strong>.</p>
                                    </div>
                                    
                                    <!-- 3 Gauges Grid -->
                                    <div class="priority-gauges-grid">
                                        <div class="priority-gauge-box">
                                            <div id="gaugeSpeed"></div>
                                            <div class="gauge-label">
                                                <div class="gauge-title">Speed Priority</div>
                                                <div class="gauge-desc">∆Øu ti√™n th·ªùi gian giao h√†ng</div>
                                            </div>
                                        </div>
                                        
                                        <div class="priority-gauge-box">
                                            <div id="gaugeCost"></div>
                                            <div class="gauge-label">
                                                <div class="gauge-title">Cost Priority</div>
                                                <div class="gauge-desc">∆Øu ti√™n ti·∫øt ki·ªám chi ph√≠</div>
                                            </div>
                                        </div>
                                        
                                        <div class="priority-gauge-box">
                                            <div id="gaugeRiskTolerance"></div>
                                            <div class="gauge-label">
                                                <div class="gauge-title">Risk Tolerance</div>
                                                <div class="gauge-desc">Kh·∫£ nƒÉng ch·∫•p nh·∫≠n r·ªßi ro</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Priority Explanation Cards -->
                                    <div class="grid-3" style="margin-top: 32px;">
                                        <div class="priority-explanation-card speed-card">
                                            <div class="exp-icon">‚ö°</div>
                                            <h4>Speed Strategy</h4>
                                            <div class="exp-weight" id="speed-weight-display">--</div>
                                            <p class="exp-text" id="speed-explanation">--</p>
                                        </div>
                                        
                                        <div class="priority-explanation-card cost-card">
                                            <div class="exp-icon">üí∞</div>
                                            <h4>Cost Strategy</h4>
                                            <div class="exp-weight" id="cost-weight-display">--</div>
                                            <p class="exp-text" id="cost-explanation">--</p>
                                        </div>
                                        
                                        <div class="priority-explanation-card risk-card">
                                            <div class="exp-icon">üõ°Ô∏è</div>
                                            <h4>Risk Strategy</h4>
                                            <div class="exp-weight" id="risk-weight-display">--</div>
                                            <p class="exp-text" id="risk-explanation">--</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Recommendation Based on Priority -->
                                    <div class="priority-recommendation">
                                        <h4 style="color: var(--accent-green); margin-bottom: 12px;">üí° Khuy·∫øn Ngh·ªã D·ª±a Tr√™n H·ªì S∆° ∆Øu Ti√™n</h4>
                                        <p id="priority-recommendation-text">--</p>
                                    </div>
                                </div>
                            </section>

                            <!-- ENHANCED BUYER-SELLER ANALYSIS v16.2 -->
                            <section class="section-block" id="buyer-seller-section">
                                <div class="card" id="buyer-seller-card" style="display: none;">
                                    <div class="card-header">
                                        <h2 class="card-title">
                                            <div class="icon-card">
                                                <svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                                                    <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Ph√¢n T√≠ch R·ªßi Ro ƒê·ªëi T√°c (v16.2)</span>
                                        </h2>
                                        <span class="card-badge">ESG + Reliability</span>
                                    </div>
                                    
                                    <!-- Comparison Grid -->
                                    <div class="grid-2" style="margin-bottom: 32px;">
                                        <!-- Buyer Card -->
                                        <div class="partner-card buyer-card">
                                            <div class="partner-header">
                                                <div class="partner-icon">üõí</div>
                                                <div>
                                                    <h3 class="partner-title">Ng∆∞·ªùi Mua (Buyer)</h3>
                                                    <p class="partner-name" id="buyer-name">--</p>
                                                </div>
                                            </div>
                                            
                                            <div class="partner-score">
                                                <div class="score-label">Risk Score</div>
                                                <div class="score-value" id="buyer-risk-score">--</div>
                                            </div>
                                            
                                            <div class="partner-metrics">
                                                <div class="partner-metric">
                                                    <span class="metric-label">Company Size</span>
                                                    <span class="metric-value" id="buyer-size">--</span>
                                                </div>
                                                <div class="partner-metric">
                                                    <span class="metric-label">ESG Score</span>
                                                    <span class="metric-value" id="buyer-esg">--</span>
                                                </div>
                                                <div class="partner-metric">
                                                    <span class="metric-label">Reliability</span>
                                                    <span class="metric-value" id="buyer-reliability">--</span>
                                                </div>
                                            </div>
                                            
                                            <div class="partner-progress">
                                                <div class="progress-bar">
                                                    <div class="progress-fill" id="buyer-progress" style="width: 0%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Seller Card -->
                                        <div class="partner-card seller-card">
                                            <div class="partner-header">
                                                <div class="partner-icon">üè≠</div>
                                                <div>
                                                    <h3 class="partner-title">Ng∆∞·ªùi B√°n (Seller)</h3>
                                                    <p class="partner-name" id="seller-name">--</p>
                                                </div>
                                            </div>
                                            
                                            <div class="partner-score">
                                                <div class="score-label">Risk Score</div>
                                                <div class="score-value" id="seller-risk-score">--</div>
                                            </div>
                                            
                                            <div class="partner-metrics">
                                                <div class="partner-metric">
                                                    <span class="metric-label">Company Size</span>
                                                    <span class="metric-value" id="seller-size">--</span>
                                                </div>
                                                <div class="partner-metric">
                                                    <span class="metric-label">ESG Score</span>
                                                    <span class="metric-value" id="seller-esg">--</span>
                                                </div>
                                                <div class="partner-metric">
                                                    <span class="metric-label">Reliability</span>
                                                    <span class="metric-value" id="seller-reliability">--</span>
                                                </div>
                                            </div>
                                            
                                            <div class="partner-progress">
                                                <div class="progress-bar">
                                                    <div class="progress-fill" id="seller-progress" style="width: 0%;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Risk Formula Explanation -->
                                    <div class="formula-card">
                                        <h4 style="color: var(--accent-green); margin-bottom: 16px;">üìê Risk Calculation Formula (v16.2)</h4>
                                        <div class="formula-box">
                                            <code>Partner Risk = 100 - (0.6 √ó Reliability + 0.3 √ó ESG + Size Bonus)</code>
                                        </div>
                                        <ul class="formula-notes">
                                            <li>Size Bonus: Large = +10, Medium = +5, SME = 0</li>
                                            <li>Lower score = Lower risk (better partner)</li>
                                            <li>Score > 60 indicates high partner risk</li>
                                        </ul>
                                    </div>
                                </div>
                            </section>

                            <!-- Additional Charts -->
                                <div class="grid-2">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="6" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/><path d="M12 3L12 12L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> Bi·ªÉu ƒê·ªì Radar H·ªì S∆° R·ªßi Ro</h2>
                                        </div>
                                        <div class="chart-container">
                                            <div id="radarChart" style="height: 400px;"></div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="7" width="18" height="3" stroke="currentColor" stroke-width="2" rx="1"/><rect x="3" y="11" width="18" height="3" stroke="currentColor" stroke-width="2" rx="1"/><rect x="3" y="15" width="18" height="3" stroke="currentColor" stroke-width="2" rx="1"/></svg></div> <span data-lang="section_layers">Ph√¢n T√≠ch Ph√¢n L·ªõp R·ªßi Ro</span></h2>
                                        </div>
                                        <div class="chart-container">
                                            <div id="layerChart" style="height: 400px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Monte Carlo & Timeline -->
                                <div class="grid-2">
                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="6" height="6" stroke="currentColor" stroke-width="2"/><rect x="15" y="15" width="6" height="6" stroke="currentColor" stroke-width="2"/><rect x="9" y="9" width="6" height="6" stroke="currentColor" stroke-width="2"/><path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="6" cy="6" r="1.5" fill="currentColor"/><circle cx="18" cy="18" r="1.5" fill="currentColor"/></svg></div> <span data-lang="section_montecarlo">Ph√¢n Ph·ªëi Monte Carlo</span></h2>
                                        </div>
                                        <div class="chart-container">
                                            <div id="mcChart" style="height: 350px;"></div>
                                        </div>
                                        <div class="alert-box">
                                            <strong>VaR (95%):</strong> <span id="mcVar">28.000 USD</span> | 
                                            <strong>CVaR (95%):</strong> <span id="mcCVar">35.000 USD</span> | 
                                            D·ª±a tr√™n <span id="mcRuns">10.000</span> m√¥ ph·ªèng
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header">
                                            <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="6" cy="6" r="2" fill="currentColor"/><circle cx="12" cy="12" r="2" fill="currentColor"/><circle cx="18" cy="18" r="2" fill="currentColor"/></svg></div> <span data-lang="section_timeline">D√≤ng Th·ªùi Gian R·ªßi Ro</span></h2>
                                        </div>
                                        <div class="chart-container">
                                            <div id="timelineChart" style="height: 350px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Risk Matrix -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" stroke="currentColor" stroke-width="2" rx="1"/><path d="M3 9H21M3 15H21M9 3V21M15 3V21" stroke="currentColor" stroke-width="2"/></svg></div> <span data-lang="section_matrix">Ma Tr·∫≠n R·ªßi Ro X√°c Su·∫•t √ó T√°c ƒê·ªông</span></h2>
                                    </div>
                                    <div class="chart-container">
                                        <div id="riskMatrixChart" style="height: 400px;"></div>
                                    </div>
                                    <p style="margin-top: 16px; color: var(--text-secondary); font-size: 14px;">
                                        Ma tr·∫≠n n√†y x√°c ƒë·ªãnh c√°c r·ªßi ro ∆∞u ti√™n cao b·∫±ng c√°ch v·∫Ω x√°c su·∫•t so v·ªõi t√°c ƒë·ªông ti·ªÅm nƒÉng. 
                                        T·∫≠p trung n·ªó l·ª±c gi·∫£m thi·ªÉu v√†o c√°c r·ªßi ro trong v√πng <strong>ƒë·ªè (g√≥c tr√™n b√™n ph·∫£i)</strong> v√† <strong>v√†ng (gi·ªØa)</strong>.
                                    </p>
                                </div>

                                <!-- Scenario Testing -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L3 7V12C3 16.5 6 20.16 12 21C18 20.16 21 16.5 21 12V7L12 2Z" stroke="currentColor" stroke-width="2"/><path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 12H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> <span data-lang="section_scenario">Ki·ªÉm Tra √Åp L·ª±c K·ªãch B·∫£n (What-if)</span></h2>
                                    </div>
                                    <div class="grid-scenario">
                                        <div>
                                            <h3 class="chart-title">Ch·ªçn K·ªãch B·∫£n</h3>
                                            <div class="scenario-pills" id="scenarioPills">
                                                <!-- Buttons will be generated by JS -->
                                            </div>
                                        </div>
                                        <div>
                                            <div class="scenario-summary" id="scenarioSummary">
                                                <h4 style="color: var(--text-primary); margin-bottom: 8px;">Tr∆∞·ªùng H·ª£p C∆° B·∫£n</h4>
                                                <p style="color: var(--text-secondary); font-size: 14px;" id="scenario-description">ƒêang t·∫£i m√¥ t·∫£...</p>
                                            </div>
                                            <div class="chart-container" style="margin-top: 20px;">
                                                <div id="scenarioChart" style="height: 350px;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Trade-off Analysis -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="8" cy="8" r="3" stroke="currentColor" stroke-width="2"/><circle cx="16" cy="16" r="3" stroke="currentColor" stroke-width="2"/><path d="M11 8L13 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M8 11L16 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> <span data-lang="section_tradeoff">ƒê√°nh ƒê·ªïi Chi Ph√≠-Th·ªùi Gian-R·ªßi Ro</span></h2>
                                    </div>
                                    <div class="chart-container">
                                        <div id="tradeoffChart" style="height: 300px;"></div>
                                    </div>
                                    <p style="margin-top: 16px; color: var(--text-secondary); font-size: 14px;">
                                        <strong>Th·ªèa hi·ªáp t·ªët nh·∫•t:</strong> Tuy·∫øn ƒë∆∞·ªùng hi·ªán t·∫°i mang l·∫°i hi·ªáu su·∫•t c√¢n b·∫±ng tr√™n chi ph√≠, th·ªùi gian v·∫≠n chuy·ªÉn v√† c√°c y·∫øu t·ªë r·ªßi ro.
                                    </p>
                                </div>

                                <!-- Route Level Analysis -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M5 12L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 5L19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="5" cy="12" r="2" fill="currentColor"/><circle cx="19" cy="12" r="2" fill="currentColor"/></svg></div> <span data-lang="section_route">Ph√¢n T√≠ch Theo C·∫•p ƒê·ªô Tuy·∫øn ƒê∆∞·ªùng</span></h2>
                                    </div>
                                    <div class="grid-route">
                                        <div class="chart-container">
                                            <div id="routeBreakdownChart" style="height: 400px;"></div>
                                        </div>
                                        <div>
                                            <h3 class="chart-title">Chi Ti·∫øt R·ªßi Ro Theo ƒêo·∫°n</h3>
                                            <div id="routeBreakdownTable">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- AI Recommendations -->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 8L16 8M8 16L16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> <span data-lang="section_recommendations">Khuy·∫øn Ngh·ªã T·ª´ Chuy√™n Gia AI</span></h2>
                                    </div>
                                    <ul class="insight-list" id="recommendations-list">
                                        <li>ƒêang t·∫£i khuy·∫øn ngh·ªã...</li>
                                    </ul>
                                </div>
                        </div>
                    </div>
                </div>

        <div id="mode-research" class="mode-section view-hidden">
        <div id="research" class="panel">

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg></div> T·ªïng Quan Ph∆∞∆°ng Ph√°p Nghi√™n C·ª©u</h2>

                    <span class="card-badge">NCKH / Academic</span>

                </div>

                <p style="color: var(--text-secondary); font-size: 15px; line-height: 1.8; margin-bottom: 20px;">

                    Ph√¢n t√≠ch n√†y s·ª≠ d·ª•ng khung ƒë√°nh gi√° r·ªßi ro to√†n di·ªán k·∫øt h·ª£p <strong>Fuzzy Analytical Hierarchy Process (AHP)</strong>, 

                    <strong>Fuzzy-TOPSIS</strong>, v√† <strong>M√¥ ph·ªèng Monte Carlo</strong> ƒë·ªÉ ƒë√°nh gi√° r·ªßi ro logistics cho xu·∫•t kh·∫©u SME Vi·ªát Nam.

                </p>

                <div class="ps-grid">

                    <div class="ps-card">

                        <div class="ps-icon">

                            <div class="icon-card medium">

                                <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">

                                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>

                                    <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>

                                </svg>

                            </div>

                        </div>

                        <div class="ps-title">Fuzzy AHP</div>

                        <div class="ps-text">T√≠nh to√°n tr·ªçng s·ªë ƒëa ti√™u ch√≠ s·ª≠ d·ª•ng s·ªë m·ªù tam gi√°c v√† ma tr·∫≠n so s√°nh c·∫∑p</div>

                    </div>

                    <div class="ps-card">

                        <div class="ps-icon">

                            <div class="icon-card medium">

                                <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">

                                    <path d="M3 12L7 8L11 10L16 5L21 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>

                                    <circle cx="21" cy="10" r="2" fill="currentColor"/>

                                </svg>

                            </div>

                        </div>

                        <div class="ps-title">Fuzzy-TOPSIS</div>

                        <div class="ps-text">X·∫øp h·∫°ng ph∆∞∆°ng √°n d·ª±a tr√™n kho·∫£ng c√°ch ƒë·∫øn gi·∫£i ph√°p l√Ω t∆∞·ªüng v√† ph·∫£n l√Ω t∆∞·ªüng</div>

                    </div>

                    <div class="ps-card">

                        <div class="ps-icon">

                            <div class="icon-card medium">

                                <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">

                                    <rect x="3" y="3" width="6" height="6" stroke="currentColor" stroke-width="2"/>

                                    <rect x="15" y="15" width="6" height="6" stroke="currentColor" stroke-width="2"/>

                                    <rect x="9" y="9" width="6" height="6" stroke="currentColor" stroke-width="2"/>

                                </svg>

                            </div>

                        </div>

                        <div class="ps-title">Monte Carlo</div>

                        <div class="ps-text">M√¥ ph·ªèng ng·∫´u nhi√™n ƒë·ªÉ ƒëo l∆∞·ªùng r·ªßi ro ƒëu√¥i (VaR, CVaR)</div>

                    </div>

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="14" stroke="currentColor" stroke-width="2" rx="1"/><path d="M7 9H17M7 12H14M7 15H12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> B·∫£ng 1: Gi·∫£i Th√≠ch D·ªØ Li·ªáu</h2>

                </div>

                <table class="data-table">

                    <tr>

                        <th>Tham S·ªë</th>

                        <th>Gi√° Tr·ªã</th>

                        <th>L√Ω Do</th>

                    </tr>

                    <tr>

                        <td>Tuy·∫øn ƒê∆∞·ªùng</td>

                        <td id="resRoute">Vietnam ‚Üí EU/US</td>

                        <td>H√†nh lang xu·∫•t kh·∫©u kh·ªëi l∆∞·ª£ng l·ªõn cho SME Vi·ªát Nam</td>

                    </tr>

                    <tr>

                        <td>Lo·∫°i H√†ng H√≥a</td>

                        <td id="resCargo">Electronics / High-value</td>

                        <td>Nh·∫°y c·∫£m v·ªõi h∆∞ h·∫°i v√† tr·ªÖ; y√™u c·∫ßu b·∫£o hi·ªÉm cao</td>

                    </tr>

                    <tr>

                        <td>Incoterm</td>

                        <td id="resIncoterm">CIF / FOB</td>

                        <td>X√°c ƒë·ªãnh ƒëi·ªÉm chuy·ªÉn giao r·ªßi ro v√† tr√°ch nhi·ªám c√°c b√™n</td>

                    </tr>

                    <tr>

                        <td>Ph∆∞∆°ng Th·ª©c V·∫≠n Chuy·ªÉn</td>

                        <td id="resMode">Ocean / Multimodal</td>

                        <td>Hi·ªáu qu·∫£ chi ph√≠ cho h√†ng s·ªë l∆∞·ª£ng l·ªõn; ƒë·ªô ph·ª©c t·∫°p r·ªßi ro cao h∆°n</td>

                    </tr>

                </table>

                <div class="alert-box">

                    C√°c tham s·ªë n√†y t·∫°o n·ªÅn t·∫£ng cho ƒë·ªãnh l∆∞·ª£ng r·ªßi ro. M·ªói bi·∫øn ·∫£nh h∆∞·ªüng ƒë·∫øn nhi·ªÅu chi·ªÅu r·ªßi ro 

                    (tr·ªÖ, h∆∞ h·∫°i, bi·∫øn ƒë·ªông chi ph√≠, t√°c ƒë·ªông ESG).

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="13" y="3" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="3" y="13" width="8" height="8" stroke="currentColor" stroke-width="2"/><rect x="13" y="13" width="8" height="8" stroke="currentColor" stroke-width="2"/></svg></div> B·∫£ng 2: X√¢y D·ª±ng Ti√™u Ch√≠</h2>

                </div>

                <table class="data-table">

                    <thead>

                        <tr>

                            <th>Ti√™u Ch√≠</th>

                            <th>ƒê·ªãnh Nghƒ©a</th>

                            <th>Ngu·ªìn</th>

                            <th>Vai Tr√≤ Trong Chu·ªói Cung ·ª®ng</th>

                        </tr>

                    </thead>

                    <tbody>

                        <tr>

                            <td>R·ªßi Ro Tr·ªÖ</td>

                            <td>X√°c su·∫•t l√¥ h√†ng ƒë·∫øn mu·ªôn</td>

                            <td>D·ªØ li·ªáu ng√†nh, hi·ªáu su·∫•t h√£ng v·∫≠n chuy·ªÉn</td>

                            <td>·∫¢nh h∆∞·ªüng t·ªìn kho, s·ª± h√†i l√≤ng kh√°ch h√†ng</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro H∆∞ H·∫°i</td>

                            <td>Kh·∫£ nƒÉng h√†ng h√≥a b·ªã h∆∞ h·∫°i/m·∫•t m√°t</td>

                            <td>Khi·∫øu n·∫°i l·ªãch s·ª≠, ch·∫•t l∆∞·ª£ng bao b√¨</td>

                            <td>T·ªïn th·∫•t t√†i ch√≠nh tr·ª±c ti·∫øp, danh ti·∫øng</td>

                        </tr>

                        <tr>

                            <td>Bi·∫øn ƒê·ªông Chi Ph√≠</td>

                            <td>Dao ƒë·ªông trong c∆∞·ªõc v·∫≠n chuy·ªÉn</td>

                            <td>Ph√¢n t√≠ch th·ªã tr∆∞·ªùng, ph·ª• ph√≠ nhi√™n li·ªáu</td>

                            <td>D·ª± ƒëo√°n ng√¢n s√°ch, √°p l·ª±c bi√™n l·ª£i nhu·∫≠n</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro V·∫≠n H√†nh</td>

                            <td>ƒê·ªô tin c·∫≠y h√£ng v·∫≠n chuy·ªÉn, t√†i li·ªáu</td>

                            <td>X·∫øp h·∫°ng h√£ng v·∫≠n chuy·ªÉn, d·ªØ li·ªáu ki·ªÉm to√°n</td>

                            <td>Hi·ªáu qu·∫£ quy tr√¨nh, tu√¢n th·ªß</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro ESG</td>

                            <td>T√°c ƒë·ªông m√¥i tr∆∞·ªùng v√† x√£ h·ªôi</td>

                            <td>Ph√°t th·∫£i carbon, th·ª±c h√†nh lao ƒë·ªông</td>

                            <td>Tu√¢n th·ªß quy ƒë·ªãnh, gi√° tr·ªã th∆∞∆°ng hi·ªáu</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro Ch√≠nh Tr·ªã</td>

                            <td>S·ª± ki·ªán ƒë·ªãa ch√≠nh tr·ªã, l·ªánh tr·ª´ng ph·∫°t</td>

                            <td>Ch·ªâ s·ªë r·ªßi ro qu·ªëc gia</td>

                            <td>Gi√°n ƒëo·∫°n tuy·∫øn ƒë∆∞·ªùng, r√†o c·∫£n ph√°p l√Ω</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro Kh√≠ H·∫≠u</td>

                            <td>Gi√°n ƒëo·∫°n th·ªùi ti·∫øt, thi√™n tai</td>

                            <td>D·ªØ li·ªáu th·ªùi ti·∫øt l·ªãch s·ª≠</td>

                            <td>Tr·ªÖ theo m√πa, b·∫•t kh·∫£ kh√°ng</td>

                        </tr>

                    </tbody>

                </table>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> B·∫£ng 3: Ph∆∞∆°ng Ph√°p Fuzzy AHP</h2>

                </div>

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">Quy Tr√¨nh T·ª´ng B∆∞·ªõc:</h3>

                <ol style="color: var(--text-secondary); font-size: 14px; line-height: 1.8; padding-left: 24px;">

                    <li>X√¢y d·ª±ng ma tr·∫≠n so s√°nh c·∫∑p s·ª≠ d·ª•ng ƒë√°nh gi√° chuy√™n gia</li>

                    <li>Chuy·ªÉn ƒë·ªïi gi√° tr·ªã r√µ sang s·ªë m·ªù tam gi√°c (TFN)</li>

                    <li>T√≠nh trung b√¨nh h√¨nh h·ªçc m·ªù cho m·ªói ti√™u ch√≠</li>

                    <li>Chu·∫©n h√≥a ƒë·ªÉ thu ƒë∆∞·ª£c tr·ªçng s·ªë m·ªù</li>

                    <li>Gi·∫£i m·ªù s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p tr·ªçng t√¢m</li>

                    <li>X√°c minh t·ª∑ l·ªá nh·∫•t qu√°n (CR < 0.1)</li>

                </ol>

                

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">Tr·ªçng S·ªë Chu·∫©n H√≥a K·∫øt Qu·∫£:</h3>

                <table class="data-table">

                    <thead>

                        <tr>

                            <th>Ti√™u Ch√≠</th>

                            <th>Tr·ªçng S·ªë M·ªù (TFN)</th>

                            <th>Tr·ªçng S·ªë R√µ</th>

                            <th>X·∫øp H·∫°ng</th>

                        </tr>

                    </thead>

                    <tbody>

                        <tr>

                            <td>R·ªßi Ro Tr·ªÖ</td>

                            <td>(0.18, 0.23, 0.28)</td>

                            <td>0.23</td>

                            <td>1</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro H∆∞ H·∫°i</td>

                            <td>(0.15, 0.19, 0.24)</td>

                            <td>0.19</td>

                            <td>2</td>

                        </tr>

                        <tr>

                            <td>Bi·∫øn ƒê·ªông Chi Ph√≠</td>

                            <td>(0.13, 0.17, 0.21)</td>

                            <td>0.17</td>

                            <td>3</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro V·∫≠n H√†nh</td>

                            <td>(0.12, 0.16, 0.20)</td>

                            <td>0.16</td>

                            <td>4</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro ESG</td>

                            <td>(0.08, 0.12, 0.16)</td>

                            <td>0.12</td>

                            <td>5</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro Ch√≠nh Tr·ªã</td>

                            <td>(0.06, 0.08, 0.11)</td>

                            <td>0.08</td>

                            <td>6</td>

                        </tr>

                        <tr>

                            <td>R·ªßi Ro Kh√≠ H·∫≠u</td>

                            <td>(0.03, 0.05, 0.08)</td>

                            <td>0.05</td>

                            <td>7</td>

                        </tr>

                    </tbody>

                </table>

                <div class="alert-box">

                    <strong>T·ª∑ L·ªá Nh·∫•t Qu√°n (CR):</strong> 0.076 < 0.1 ‚úì (Nh·∫•t qu√°n ch·∫•p nh·∫≠n ƒë∆∞·ª£c)

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 12L7 8L11 10L16 5L21 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="21" cy="10" r="2" fill="currentColor"/></svg></div> B·∫£ng 4: Ph√¢n T√≠ch Fuzzy-TOPSIS</h2>

                </div>

                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.8; margin-bottom: 16px;">

                    TOPSIS (K·ªπ thu·∫≠t X·∫øp H·∫°ng ∆Øu Ti√™n theo ƒê·ªô T∆∞∆°ng T·ª± v·ªõi Gi·∫£i Ph√°p L√Ω T∆∞·ªüng) x·∫øp h·∫°ng c√°c ph∆∞∆°ng √°n d·ª±a tr√™n 

                    kho·∫£ng c√°ch h√¨nh h·ªçc ƒë·∫øn gi·∫£i ph√°p l√Ω t∆∞·ªüng t·ªët nh·∫•t v√† gi·∫£i ph√°p ph·∫£n l√Ω t∆∞·ªüng.

                </p>

                

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">X·∫øp H·∫°ng Ph∆∞∆°ng √Ån:</h3>

                <table class="data-table">

                    <thead>

                        <tr>

                            <th>Ph∆∞∆°ng √Ån</th>

                            <th>Kho·∫£ng C√°ch ƒê·∫øn L√Ω T∆∞·ªüng (D+)</th>

                            <th>Kho·∫£ng C√°ch ƒê·∫øn Ph·∫£n L√Ω T∆∞·ªüng (D-)</th>

                            <th>H·ªá S·ªë G·∫ßn G≈©i</th>

                            <th>X·∫øp H·∫°ng</th>

                        </tr>

                    </thead>

                    <tbody>

                        <tr style="background: rgba(0, 255, 136, 0.1);">

                            <td><strong>Tuy·∫øn A (Tr·ª±c Ti·∫øp)</strong></td>

                            <td>0.142</td>

                            <td>0.286</td>

                            <td>0.668</td>

                            <td>ü•á 1</td>

                        </tr>

                        <tr>

                            <td>Tuy·∫øn B (Hub-spoke)</td>

                            <td>0.198</td>

                            <td>0.234</td>

                            <td>0.542</td>

                            <td>2</td>

                        </tr>

                        <tr>

                            <td>Tuy·∫øn C (Chuy·ªÉn T·∫£i Nhi·ªÅu L·∫ßn)</td>

                            <td>0.267</td>

                            <td>0.168</td>

                            <td>0.386</td>

                            <td>3</td>

                        </tr>

                    </tbody>

                </table>

                <div class="alert-box">

                    <strong>Gi·∫£i Ph√°p T·ªëi ∆Øu:</strong> Tuy·∫øn A (Tr·ª±c Ti·∫øp) c√≥ h·ªá s·ªë g·∫ßn g≈©i cao nh·∫•t (0.668), 

                    cho th·∫•y s·ª± c√¢n b·∫±ng t·ªët nh·∫•t tr√™n t·∫•t c·∫£ c√°c ti√™u ch√≠ c√≥ tr·ªçng s·ªë.

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="6" height="6" stroke="currentColor" stroke-width="2"/><rect x="15" y="15" width="6" height="6" stroke="currentColor" stroke-width="2"/><rect x="9" y="9" width="6" height="6" stroke="currentColor" stroke-width="2"/></svg></div> B·∫£ng 5: M√¥ Ph·ªèng Monte Carlo</h2>

                </div>

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">Tham S·ªë M√¥ Ph·ªèng:</h3>

                <table class="data-table">

                    <tr>

                        <th>Tham S·ªë</th>

                        <th>Gi√° Tr·ªã</th>

                        <th>M√¥ T·∫£</th>

                    </tr>

                    <tr>

                        <td>S·ªë L∆∞·ª£ng M√¥ Ph·ªèng</td>

                        <td>10.000</td>

                        <td>ƒê·ªß ƒë·ªÉ h·ªôi t·ª• ph√¢n ph·ªëi ·ªïn ƒë·ªãnh</td>

                    </tr>

                    <tr>

                        <td>Gi√° Tr·ªã H√†ng H√≥a</td>

                        <td>$100.000</td>

                        <td>Gi√° tr·ªã c∆° s·ªü ƒë·ªÉ t√≠nh t·ªïn th·∫•t</td>

                    </tr>

                    <tr>

                        <td>Ph√¢n Ph·ªëi T·ªïn Th·∫•t</td>

                        <td>Beta + Triangular</td>

                        <td>Ph√¢n ph·ªëi h·ªón h·ª£p m√¥ h√¨nh h√≥a s·ª± ki·ªán th·ª±c t·∫ø</td>

                    </tr>

                </table>

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">Ch·ªâ S·ªë R·ªßi Ro:</h3>

                <div class="grid-3">

                    <div class="kpi-card">

                        <div class="kpi-label">T·ªïn Th·∫•t K·ª≥ V·ªçng</div>

                        <div class="kpi-value" id="resExpectedLoss">$12.5K</div>

                        <div class="kpi-subtitle">Trung b√¨nh ph√¢n ph·ªëi</div>

                    </div>

                    <div class="kpi-card">

                        <div class="kpi-label">VaR (95%)</div>

                        <div class="kpi-value medium" id="resVar">$28K</div>

                        <div class="kpi-subtitle">T·ªïn th·∫•t ph√¢n v·ªã th·ª© 95</div>

                    </div>

                    <div class="kpi-card">

                        <div class="kpi-label">CVaR (95%)</div>

                        <div class="kpi-value high" id="resCVar">$35K</div>

                        <div class="kpi-subtitle">T·ªïn th·∫•t k·ª≥ v·ªçng trong ƒëu√¥i</div>

                    </div>

                </div>

                <div class="alert-box">

                    <strong>Gi·∫£i Th√≠ch Th·ªëng K√™:</strong> C√≥ 95% x√°c su·∫•t t·ªïn th·∫•t s·∫Ω kh√¥ng v∆∞·ª£t qu√° $28.000. 

                    Tuy nhi√™n, trong 5% k·ªãch b·∫£n x·∫•u nh·∫•t, t·ªïn th·∫•t trung b√¨nh l√† $35.000 (CVaR). R·ªßi ro ƒëu√¥i n√†y n√™n 

                    ƒë∆∞·ª£c xem x√©t trong quy·∫øt ƒë·ªãnh b·∫£o hi·ªÉm.

                </div>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L3 7V12C3 16.5 6 20.16 12 21C18 20.16 21 16.5 21 12V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M8 8L16 16M16 8L8 16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> B·∫£ng 6: M√¥ H√¨nh R·ªßi Ro T√≠ch H·ª£p</h2>

                </div>

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">T√≠nh To√°n ƒêi·ªÉm R·ªßi Ro T·ªïng Th·ªÉ:</h3>

                <div style="background: rgba(5, 10, 15, 0.8); padding: 20px; border-radius: 12px; margin: 16px 0;">

                    <pre style="color: var(--text-secondary); font-size: 13px; line-height: 1.8; margin: 0;">

<span style="color: var(--accent-green);">Risk_Overall</span> = Œ£ (w<sub>i</sub> √ó s<sub>i</sub> √ó adj<sub>i</sub>)

Trong ƒë√≥:

  w<sub>i</sub> = Tr·ªçng s·ªë Fuzzy-AHP cho ti√™u ch√≠ i

  s<sub>i</sub> = ƒêi·ªÉm chu·∫©n h√≥a t·ª´ Fuzzy-TOPSIS

  adj<sub>i</sub> = H·ªá s·ªë ƒëi·ªÅu ch·ªânh Monte Carlo

<span style="color: var(--accent-green);">ƒêi·ªÉm Cu·ªëi C√πng</span> = 76 (R·ªßi Ro Trung B√¨nh)

  - ƒê√≥ng g√≥p tr·ªÖ: 0.23 √ó 0.71 = 16.3

  - ƒê√≥ng g√≥p h∆∞ h·∫°i: 0.19 √ó 0.64 = 12.2

  - ƒê√≥ng g√≥p bi·∫øn ƒë·ªông chi ph√≠: 0.17 √ó 0.52 = 8.8

  - ƒê√≥ng g√≥p v·∫≠n h√†nh: 0.16 √ó 0.58 = 9.3

  - ƒê√≥ng g√≥p ESG: 0.12 √ó 0.42 = 5.0

  - C√°c ƒë√≥ng g√≥p kh√°c: 24.4

                    </pre>

                </div>

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">T√≥m T·∫Øt K·∫øt Qu·∫£ Ch√≠nh:</h3>

                <ul class="insight-list">

                    <li><strong>Ch·ªâ S·ªë R·ªßi Ro T·ªïng Th·ªÉ:</strong> 76 (Trung B√¨nh) ‚Äî ch·∫•p nh·∫≠n ƒë∆∞·ª£c v·ªõi gi√°m s√°t v√† k·∫ø ho·∫°ch d·ª± ph√≤ng</li>

                    <li><strong>Nguy√™n Nh√¢n R·ªßi Ro Ch√≠nh:</strong> R·ªßi ro tr·ªÖ ƒë√≥ng g√≥p 21.5% v√†o t·ªïng ƒëi·ªÉm r·ªßi ro</li>

                    <li><strong>T√°c ƒê·ªông T√†i Ch√≠nh K·ª≥ V·ªçng:</strong> $12.500 m·ªói l√¥ h√†ng (t·ªïn th·∫•t trung b√¨nh)</li>

                    <li><strong>Ph∆°i Nhi·ªÖm R·ªßi Ro ƒêu√¥i:</strong> 5% kh·∫£ nƒÉng t·ªïn th·∫•t v∆∞·ª£t qu√° $28.000</li>

                    <li><strong>ƒê·ªô Tin C·∫≠y:</strong> 88% x√°c su·∫•t giao h√†ng ƒë√∫ng h·∫°n kh√¥ng c√≥ gi√°n ƒëo·∫°n l·ªõn</li>

                </ul>

            </div>

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="14" stroke="currentColor" stroke-width="2" rx="1"/><path d="M7 9H17M7 12H17M7 15H14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> B·∫£ng 7: √ù Nghƒ©a Ch√≠nh S√°ch Cho SME Vi·ªát Nam</h2>

                </div>

                

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">K·∫øt Lu·∫≠n Nghi√™n C·ª©u:</h3>

                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.8; margin-bottom: 16px;">

                    Khung t√≠ch h·ª£p Fuzzy-AHP-TOPSIS-Monte Carlo n√†y cung c·∫•p cho c√°c nh√† xu·∫•t kh·∫©u SME Vi·ªát Nam m·ªôt 

                    <strong>c√¥ng c·ª• ƒë√°nh gi√° r·ªßi ro d·ª±a tr√™n d·ªØ li·ªáu, c√≥ th·ªÉ gi·∫£i th√≠ch</strong> cho vi·ªác ra quy·∫øt ƒë·ªãnh logistics. 

                    Ph∆∞∆°ng ph√°p n√†y gi·∫£i quy·∫øt c√°c th√°ch th·ª©c ch√≠nh:

                </p>

                <ul class="insight-list">

                    <li><strong>Gi·∫£m Thi·ªÉu Ch·ªß Quan:</strong> S·ªë m·ªù n·∫Øm b·∫Øt s·ª± kh√¥ng ch·∫Øc ch·∫Øn trong ƒë√°nh gi√° chuy√™n gia trong khi v·∫´n duy tr√¨ t√≠nh nghi√™m ng·∫∑t</li>

                    <li><strong>ƒê√°nh ƒê·ªïi ƒêa Ti√™u Ch√≠:</strong> Tr·ªçng s·ªë AHP cho ph√©p ∆∞u ti√™n ƒë·ªông d·ª±a tr√™n ng·ªØ c·∫£nh kinh doanh</li>

                    <li><strong>ƒê·ªãnh L∆∞·ª£ng R·ªßi Ro ƒêu√¥i:</strong> M√¥ ph·ªèng Monte Carlo ti·∫øt l·ªô c√°c k·ªãch b·∫£n c·ª±c ƒëoan th∆∞·ªùng b·ªã b·ªè qua trong m√¥ h√¨nh x√°c ƒë·ªãnh</li>

                    <li><strong>T·ªëi ∆Øu H√≥a Tuy·∫øn ƒê∆∞·ªùng:</strong> X·∫øp h·∫°ng TOPSIS cung c·∫•p so s√°nh ph∆∞∆°ng √°n r√µ r√†ng cho l·ª±a ch·ªçn h√£ng v·∫≠n chuy·ªÉn/tuy·∫øn ƒë∆∞·ªùng</li>

                    <li><strong>L·∫≠p K·∫ø Ho·∫°ch B·∫£o Hi·ªÉm:</strong> Ch·ªâ s·ªë VaR/CVaR tr·ª±c ti·∫øp th√¥ng b√°o y√™u c·∫ßu b·∫£o hi·ªÉm v√† ƒë√†m ph√°n ph√≠ b·∫£o hi·ªÉm</li>

                </ul>

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">M·ªü R·ªông V√† Nghi√™n C·ª©u T∆∞∆°ng Lai:</h3>

                <ul class="insight-list">

                    <li>T√≠ch h·ª£p v·ªõi d·ªØ li·ªáu IoT th·ªùi gian th·ª±c (theo d√µi GPS, c·∫£m bi·∫øn nhi·ªát ƒë·ªô) ƒë·ªÉ c·∫≠p nh·∫≠t r·ªßi ro ƒë·ªông</li>

                    <li>M√¥ h√¨nh machine learning ƒë·ªÉ d·ª± ƒëo√°n ƒëi·ªÉm ti√™u ch√≠ d·ª±a tr√™n d·ªØ li·ªáu l√¥ h√†ng l·ªãch s·ª≠</li>

                    <li>M·ªü r·ªông sang v·∫≠n chuy·ªÉn h√†ng kh√¥ng, ƒë∆∞·ªùng s·∫Øt v√† k·∫øt h·ª£p ƒëa ph∆∞∆°ng th·ª©c</li>

                    <li>T√≠ch h·ª£p blockchain cho t√†i li·ªáu minh b·∫°ch v√† x·ª≠ l√Ω khi·∫øu n·∫°i</li>

                    <li>Th√≠ch ·ª©ng khu v·ª±c cho h√†nh lang ASEAN (tuy·∫øn VN-TH, VN-ID, VN-MY)</li>

                </ul>

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">H·∫°n Ch·∫ø:</h3>

                <div class="alert-box">

                    <strong>T√≠nh S·∫µn C√≥ D·ªØ Li·ªáu:</strong> ƒê·ªô ch√≠nh x√°c m√¥ h√¨nh ph·ª• thu·ªôc v√†o ch·∫•t l∆∞·ª£ng d·ªØ li·ªáu ƒë·∫ßu v√†o (hi·ªáu su·∫•t h√£ng v·∫≠n chuy·ªÉn, t·ª∑ l·ªá t·ªïn th·∫•t l·ªãch s·ª≠). 

                    SME Vi·ªát Nam c√≥ th·ªÉ thi·∫øu d·ªØ li·ªáu l·ªãch s·ª≠ to√†n di·ªán.

                    <br><br>

                    <strong>T√≠nh Ch·ªß Quan Chuy√™n Gia:</strong> M·∫∑c d√π logic m·ªù, tr·ªçng s·ªë AHP v·∫´n d·ª±a v√†o ƒë√°nh gi√° chuy√™n gia c√≥ th·ªÉ kh√°c nhau gi·ªØa c√°c ng√†nh.

                    <br><br>

                    <strong>M√¥i Tr∆∞·ªùng ƒê·ªông:</strong> S·ª± ki·ªán ƒë·ªãa ch√≠nh tr·ªã, ƒë·∫°i d·ªãch v√† c√∫ s·ªëc chu·ªói cung ·ª©ng y√™u c·∫ßu hi·ªáu ch·ªânh m√¥ h√¨nh th∆∞·ªùng xuy√™n.

                </div>

            </div>

            

            <div class="card">

                <div class="card-header">

                    <h2 class="card-title"><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L3 7V12C3 16.5 6 20.16 12 21C18 20.16 21 16.5 21 12V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/></svg></div> B·∫£ng 8: Ki·ªÉm Tra ƒê·ªô Nh·∫°y & ƒê·ªô V·ªØng Ch·∫Øc</h2>

                </div>

                <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.8; margin-bottom: 16px;">

                    ƒê·ªÉ ƒë·∫£m b·∫£o ƒë·ªô tin c·∫≠y c·ªßa m√¥ h√¨nh cho SME Vi·ªát Nam, ph√¢n t√≠ch ƒë·ªô nh·∫°y ƒë√£ ƒë∆∞·ª£c th·ª±c hi·ªán. 

                    ƒêi·ªÅu n√†y ki·ªÉm tra c√°ch x·∫øp h·∫°ng cu·ªëi c√πng (Fuzzy-TOPSIS) ph·∫£n ·ª©ng v·ªõi thay ƒë·ªïi trong tr·ªçng s·ªë ti√™u ch√≠ (Fuzzy-AHP).

                </p>

                

                <h3 style="color: var(--accent-green); margin-bottom: 12px;">Ph√¢n T√≠ch Nhi·ªÖu Lo·∫°n Tr·ªçng S·ªë:</h3>

                <table class="data-table">

                    <thead>

                        <tr>

                            <th>K·ªãch B·∫£n</th>

                            <th>Thay ƒê·ªïi Tr·ªçng S·ªë</th>

                            <th>Tuy·∫øn T·ªëi ∆Øu</th>

                            <th>K·∫øt Qu·∫£</th>

                        </tr>

                    </thead>

                    <tbody>

                        <tr>

                            <td>C∆° S·ªü</td>

                            <td>N/A</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-green);">·ªîn ƒê·ªãnh</td>

                        </tr>

                        <tr>

                            <td>Nh·∫°y C·∫£m Chi Ph√≠</td>

                            <td>Tr·ªçng S·ªë Bi·∫øn ƒê·ªông Chi Ph√≠ +20%</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-green);">·ªîn ƒê·ªãnh</td>

                        </tr>

                        <tr>

                            <td>Nh·∫°y C·∫£m Th·ªùi Gian</td>

                            <td>Tr·ªçng S·ªë R·ªßi Ro Tr·ªÖ +20%</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-green);">·ªîn ƒê·ªãnh</td>

                        </tr>

                        <tr>

                            <td>Nh·∫°y C·∫£m Ch·∫•t L∆∞·ª£ng</td>

                            <td>Tr·ªçng S·ªë R·ªßi Ro H∆∞ H·∫°i +20%</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-green);">·ªîn ƒê·ªãnh</td>

                        </tr>

                        <tr>

                            <td>Gi√°n ƒêo·∫°n C·ª±c ƒêoan</td>

                            <td>Tr·ªçng S·ªë Kh√≠ H·∫≠u + Ch√≠nh Tr·ªã +50%</td>

                            <td>Tuy·∫øn A</td>

                            <td style="color: var(--accent-yellow);">·ªîn ƒê·ªãnh (X·∫øp H·∫°ng 1), nh∆∞ng H·ªá S·ªë G·∫ßn G≈©i gi·∫£m 15%</td>

                        </tr>

                    </tbody>

                </table>

                

                <h3 style="color: var(--accent-green); margin: 24px 0 12px;">K·∫øt Lu·∫≠n ƒê·ªô V·ªØng Ch·∫Øc:</h3>

                <ul class="insight-list">

                    <li>M√¥ h√¨nh th·ªÉ hi·ªán <strong>ƒë·ªô v·ªØng ch·∫Øc cao</strong> cho khuy·∫øn ngh·ªã ch√≠nh (Tuy·∫øn A).</li>

                    <li>X·∫øp h·∫°ng TOPSIS <strong>kh√¥ng nh·∫°y c·∫£m</strong> v·ªõi thay ƒë·ªïi nh·ªè ho·∫∑c v·ª´a ph·∫£i trong tr·ªçng s·ªë AHP.</li>

                    <li>S·ª± ·ªïn ƒë·ªãnh n√†y x√°c nh·∫≠n m√¥ h√¨nh l√† m·ªôt <strong>c√¥ng c·ª• h·ªó tr·ª£ quy·∫øt ƒë·ªãnh ƒë√°ng tin c·∫≠y</strong> cho SME, 

                        ngay c·∫£ v·ªõi s·ª± thay ƒë·ªïi nh·ªè trong ƒë√°nh gi√° chuy√™n gia ho·∫∑c ∆∞u ti√™n kinh doanh.</li>

                </ul>

            </div>

            </div>

        </div>

                <!-- INVESTOR MODE -->
                <div id="mode-investor" class="mode-section view-hidden">
                    <div id="investor" class="panel">
                        <div class="card">
                            <div class="hero-section">
                                <div class="hero-number" id="investorHeroNumber">32%</div>
                                <div class="hero-caption">Gi·∫£m R·ªßi Ro Th√¥ng Qua ƒê·ªãnh Tuy·∫øn Th√¥ng Minh</div>
                                <div class="hero-subtitle">
                                    Bi·∫øn Quy·∫øt ƒê·ªãnh Logistics M·ªù √Åm Th√†nh L·ª£i Th·∫ø C·∫°nh Tranh D·ª±a Tr√™n D·ªØ Li·ªáu
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div>
                                    V·∫•n ƒê·ªÅ ‚Üí Gi·∫£i Ph√°p ‚Üí T·∫°i Sao B√¢y Gi·ªù
                                </h2>
                            </div>
                            <div class="ps-grid">
                                <div class="ps-card">
                                    <div class="ps-icon">
                                        <div class="icon-card medium">
                                            <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">
                                                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                                                <path d="M9 9L15 15M15 9L9 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="ps-title">V·∫•n ƒê·ªÅ</div>
                                    <div class="ps-text">
                                        C√°c nh√† xu·∫•t kh·∫©u SME ƒë∆∞a ra quy·∫øt ƒë·ªãnh logistics d·ª±a tr√™n d·ªØ li·ªáu ph√¢n m·∫£nh (b√°o gi√° chi ph√≠, th·ªùi gian giao h√†ng) 
                                        m√† kh√¥ng hi·ªÉu <strong>ph∆°i nhi·ªÖm r·ªßi ro th·ª±c s·ª±</strong>. K·∫øt qu·∫£: 15-25% l√¥ h√†ng g·∫∑p 
                                        tr·ªÖ, h∆∞ h·∫°i ho·∫∑c chi ph√≠ b·∫•t ng·ªù.
                                    </div>
                                </div>
                                <div class="ps-card">
                                    <div class="ps-icon">
                                        <div class="icon-card medium">
                                            <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">
                                                <path d="M12 2L3 7V12C3 16.5 6 20.16 12 21C18 20.16 21 16.5 21 12V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                                                <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="ps-title">Gi·∫£i Ph√°p</div>
                                    <div class="ps-text">
                                        <strong>RISKCAST</strong>: L·ªõp th√¥ng minh r·ªßi ro ƒë∆∞·ª£c h·ªó tr·ª£ b·ªüi AI k·∫øt h·ª£p Fuzzy-AHP, TOPSIS, 
                                        v√† m√¥ ph·ªèng Monte Carlo. M·ªôt ƒë·∫ßu v√†o (tuy·∫øn ƒë∆∞·ªùng, h√†ng h√≥a, incoterm) ‚Üí ƒëi·ªÉm r·ªßi ro to√†n di·ªán + 
                                        ph√¢n ph·ªëi r·ªßi ro ƒëu√¥i + ph∆∞∆°ng √°n t·ªëi ∆∞u.
                                    </div>
                                </div>
                                <div class="ps-card">
                                    <div class="ps-icon">
                                        <div class="icon-card medium">
                                            <svg class="neon-icon" width="32" height="32" viewBox="0 0 24 24" fill="none">
                                                <path d="M3 21L12 3L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M7 17L12 11L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="ps-title">T·∫°i Sao B√¢y Gi·ªù</div>
                                    <div class="ps-text">
                                        Bi·∫øn ƒë·ªông h·∫≠u ƒë·∫°i d·ªãch + √°p l·ª±c tu√¢n th·ªß ESG + s·ªë h√≥a t√†i ch√≠nh th∆∞∆°ng m·∫°i. 
                                        C√°c nh√† b·∫£o hi·ªÉm logistics, ng√¢n h√†ng v√† forwarder c·∫ßn <strong>m√¥ h√¨nh r·ªßi ro c√≥ th·ªÉ gi·∫£i th√≠ch</strong> 
                                        ƒë·ªÉ b·∫£o l√£nh SME th·ªã tr∆∞·ªùng m·ªõi n·ªïi.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2L15 9L22 10L17 15L18 22L12 18L6 22L7 15L2 10L9 9L12 2Z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/></svg></div>
                                    T√≥m T·∫Øt T√°c ƒê·ªông Kinh T·∫ø
                                </h2>
                            </div>
                            <div class="grid-2">
                                <div class="chart-container">
                                    <div id="savingsChart" style="height: 300px;"></div>
                                </div>
                                <div>
                                    <h3 style="color: var(--accent-green); margin-bottom: 16px;">Ph√¢n T√≠ch T√°c ƒê·ªông Chi Ph√≠</h3>
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Ch·ªâ S·ªë</th>
                                                <th>C∆° S·ªü</th>
                                                <th>T·ªëi ∆Øu</th>
                                                <th>C·∫£i Thi·ªán</th>
                                            </tr>
                                        </thead>
                                        <tbody id="economicsTable">
                                        </tbody>
                                    </table>
                                    <div class="alert-box green" style="margin-top: 16px;">
                                        <strong>L·ª£i √çch R√≤ng:</strong> <span id="netBenefit">$1.850</span> ti·∫øt ki·ªám m·ªói l√¥ h√†ng th√¥ng qua ƒë·ªãnh tuy·∫øn t·ªëi ∆∞u + gi·∫£m ph∆°i nhi·ªÖm r·ªßi ro.
                                        ƒê·ªëi v·ªõi nh√† xu·∫•t kh·∫©u th·ªã tr∆∞·ªùng trung b√¨nh (1.200 l√¥ h√†ng/nƒÉm) ‚Üí <strong>t√°c ƒë·ªông h√†ng nƒÉm $2.2M</strong>.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 21L12 3L21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 17L12 11L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                                    ARR / Ti·ªÅm NƒÉng Doanh Thu
                                </h2>
                            </div>
                            <div class="grid-3">
                                <div class="kpi-card">
                                    <div class="kpi-label">Kh√°ch H√†ng M·ª•c Ti√™u</div>
                                    <div class="kpi-value" style="font-size: 24px;">Nh√† Xu·∫•t Kh·∫©u SME</div>
                                    <div class="kpi-subtitle">Doanh thu h√†ng nƒÉm $5M-50M</div>
                                </div>
                                <div class="kpi-card">
                                    <div class="kpi-label">M√¥ H√¨nh Gi√°</div>
                                    <div class="kpi-value" style="font-size: 24px;">$499/th√°ng</div>
                                    <div class="kpi-subtitle">Ph√¢n t√≠ch kh√¥ng gi·ªõi h·∫°n + API</div>
                                </div>
                                <div class="kpi-card">
                                    <div class="kpi-label">ARR t·∫°i 500 Kh√°ch H√†ng</div>
                                    <div class="kpi-value" style="font-size: 24px;" id="arrTarget">$3M</div>
                                    <div class="kpi-subtitle">M·ª•c ti√™u NƒÉm 3</div>
                                </div>
                            </div>
                            <h3 style="color: var(--accent-green); margin: 24px 0 12px;">Chi·∫øn L∆∞·ª£c Go-to-Market:</h3>
                            <ul class="insight-list">
                                <li><strong>Giai ƒêo·∫°n 1 (NƒÉm 1):</strong> SaaS B2B tr·ª±c ti·∫øp cho nh√† xu·∫•t kh·∫©u d·ªát may/ƒëi·ªán t·ª≠ Vi·ªát Nam (50 kh√°ch h√†ng, $300K ARR)</li>
                                <li><strong>Giai ƒêo·∫°n 2 (NƒÉm 2):</strong> API white-label cho forwarder v√† 3PL (150 kh√°ch h√†ng, $900K ARR)</li>
                                <li><strong>Giai ƒêo·∫°n 3 (NƒÉm 3):</strong> T√≠ch h·ª£p b·∫£o hi·ªÉm + m·ªü r·ªông khu v·ª±c sang Th√°i Lan, Indonesia (500 kh√°ch h√†ng, $3M ARR)</li>
                                <li><strong>H·∫°ng Doanh Nghi·ªáp:</strong> M√¥ h√¨nh r·ªßi ro t√πy ch·ªânh cho t·∫≠p ƒëo√†n l·ªõn ($2K-5K/th√°ng) ‚Üí 20-30% h·ªón h·ª£p doanh thu</li>
                            </ul>
                            <div class="chart-container" style="margin-top: 24px;">
                                <div id="arrChart" style="height: 300px;"></div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="8" width="18" height="10" stroke="currentColor" stroke-width="2" rx="1"/><path d="M7 8L10 4H14L17 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="7" cy="18" r="2" stroke="currentColor" stroke-width="2"/><circle cx="17" cy="18" r="2" stroke="currentColor" stroke-width="2"/></svg></div>
                                    Ki·∫øn Tr√∫c Engine-as-a-Service
                                </h2>
                            </div>
                            <div class="grid-2">
                                <div>
                                    <h3 style="color: var(--accent-green); margin-bottom: 12px;">ƒêi·ªÉm T√≠ch H·ª£p:</h3>
                                    <ul class="insight-list">
                                        <li><strong>H·ªá Th·ªëng TMS/ERP:</strong> Nh√∫ng ƒëi·ªÉm r·ªßi ro v√†o quy tr√¨nh logistics hi·ªán c√≥</li>
                                        <li><strong>N·ªÅn T·∫£ng B·∫£o Hi·ªÉm:</strong> T√≠nh to√°n ph√≠ b·∫£o hi·ªÉm ƒë·ªông d·ª±a tr√™n r·ªßi ro th·ªùi gian th·ª±c</li>
                                        <li><strong>T√†i Ch√≠nh Th∆∞∆°ng M·∫°i:</strong> H·∫°n m·ª©c t√≠n d·ª•ng ƒëi·ªÅu ch·ªânh r·ªßi ro cho LC/collections</li>
                                        <li><strong>Th·ªã Tr∆∞·ªùng V·∫≠n Chuy·ªÉn:</strong> Huy hi·ªáu r·ªßi ro cho l·ª±a ch·ªçn h√£ng v·∫≠n chuy·ªÉn/tuy·∫øn ƒë∆∞·ªùng</li>
                                    </ul>
                                </div>
                                <div>
                                    <h3 style="color: var(--accent-green); margin-bottom: 12px;">C√¥ng Ngh·ªá Stack:</h3>
                                    <ul class="insight-list">
                                        <li><strong>Core Engine:</strong> Python (NumPy, SciPy) + C++ cho Monte Carlo</li>
                                        <li><strong>L·ªõp API:</strong> FastAPI + Redis caching cho ph·∫£n h·ªìi d∆∞·ªõi gi√¢y</li>
                                        <li><strong>Pipeline D·ªØ Li·ªáu:</strong> Ngu·ªìn c·∫•p th·ªùi gian th·ª±c t·ª´ h√£ng v·∫≠n chuy·ªÉn, h·∫£i quan, API th·ªùi ti·∫øt</li>
                                        <li><strong>ML Ops:</strong> Hu·∫•n luy·ªán l·∫°i m√¥ h√¨nh li√™n t·ª•c tr√™n k·∫øt qu·∫£ l√¥ h√†ng m·ªõi</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="api-dashboard" style="margin-top: 20px;">
                                <h3 style="color: var(--accent-green); margin-bottom: 20px;">V√≠ D·ª• API:</h3>
                                
                                <!-- REQUEST DASHBOARD -->
                                <div class="api-dashboard-card request-card">
                                    <div class="api-card-header">
                                        <span class="api-method-badge post">POST</span>
                                        <span class="api-endpoint">/api/v1/analyze</span>
                                    </div>
                                    <div class="api-dashboard-grid">
                                        <div class="api-field-item">
                                            <div class="api-field-label">Route</div>
                                            <div class="api-field-value">VN-SGN ‚Üí US-LAX</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Cargo Value</div>
                                            <div class="api-field-value number">$100,000</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Cargo Type</div>
                                            <div class="api-field-value chip">electronics</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Incoterm</div>
                                            <div class="api-field-value chip">CIF</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Priority</div>
                                            <div class="api-field-value chip">balanced</div>
                                        </div>
                                    </div>
                                </div>
                                <!-- RESPONSE DASHBOARD -->
                                <div class="api-dashboard-card response-card">
                                    <div class="api-card-header">
                                        <span class="api-response-label">RESPONSE</span>
                                        <span class="api-time-badge">&lt; 800ms</span>
                                    </div>
                                    <div class="api-dashboard-grid">
                                        <div class="api-field-item highlight">
                                            <div class="api-field-label">Risk Score</div>
                                            <div class="api-field-value large number">76</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Risk Level</div>
                                            <div class="api-field-value chip medium">medium</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">Expected Loss</div>
                                            <div class="api-field-value number">$12,500</div>
                                        </div>
                                        <div class="api-field-item">
                                            <div class="api-field-label">VaR 95%</div>
                                            <div class="api-field-value number">$28,000</div>
                                        </div>
                                        <div class="api-field-item full-width">
                                            <div class="api-field-label">Recommendations</div>
                                            <div class="api-field-value array">[...]</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="14" stroke="currentColor" stroke-width="2" rx="1"/><path d="M7 9H17M7 12H17M7 15H14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div>
                                    C√¢u Chuy·ªán M·ªôt Trang Cho Nh√† ƒê·∫ßu T∆∞
                                </h2>
                            </div>
                            <div class="grid-2">
                                <div>
                                    <h3 style="color: var(--accent-green); margin-bottom: 16px;">C√¢u Chuy·ªán:</h3>
                                    <ul class="insight-list" style="font-size: 15px;">
                                        <li><strong>$2.7T</strong> chi ti√™u logistics to√†n c·∫ßu ‚Äî nh∆∞ng SME v·∫´n ra quy·∫øt ƒë·ªãnh trong b√≥ng t·ªëi</li>
                                        <li>Ch√∫ng t√¥i x√¢y d·ª±ng <strong>"Bloomberg Terminal cho R·ªßi Ro Logistics"</strong> ‚Äî ƒë·ªãnh l∆∞·ª£ng nh·ªØng g√¨ tr∆∞·ªõc ƒë√¢y ch·ªâ l√† c·∫£m t√≠nh</li>
                                        <li>Engine c·ªßa ch√∫ng t√¥i x·ª≠ l√Ω <strong>7 chi·ªÅu r·ªßi ro</strong> th·ªùi gian th·ª±c: tr·ªÖ, h∆∞ h·∫°i, chi ph√≠, ESG, kh√≠ h·∫≠u, ch√≠nh tr·ªã, v·∫≠n h√†nh</li>
                                        <li>Kh√°ch h√†ng ti·∫øt ki·ªám <strong>$1.850 m·ªói l√¥ h√†ng</strong> th√¥ng qua ƒë·ªãnh tuy·∫øn t·ªëi ∆∞u + gi·∫£m chi ph√≠ b·∫£o hi·ªÉm</li>
                                        <li>L·ªô tr√¨nh ƒë·∫øn <strong>$10M ARR</strong>: B·∫Øt ƒë·∫ßu v·ªõi SME Vi·ªát Nam ‚Üí m·ªü r·ªông sang ASEAN ‚Üí white-label cho nh√† b·∫£o hi·ªÉm/ng√¢n h√†ng</li>
                                    </ul>
                                </div>
                                <div class="chart-container">
                                    <div id="pitchChart" style="height: 350px;"></div>
                                </div>
                            </div>
                            <div class="alert-box green" style="margin-top: 20px;">
                                <strong><div class="icon-card"><svg class="neon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></div> Y√™u C·∫ßu:</strong> V√≤ng seed $1.5M ƒë·ªÉ x√¢y d·ª±ng ƒë·ªôi ng≈© b√°n h√†ng, m·ªü r·ªông t√≠ch h·ª£p API, 
                                v√† ƒë·∫°t 200 kh√°ch h√†ng v√†o cu·ªëi NƒÉm 2. M·ª•c ti√™u tƒÉng tr∆∞·ªüng 40% YoY v·ªõi l·ªô tr√¨nh c√≥ l·ª£i nhu·∫≠n trong NƒÉm 3.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>

    <!-- ========================================
         3D AI CHAT WIDGET
    ======================================== -->
    <style>
        /* ========================================
           FLOATING WIDGET CONTAINER
        ======================================== */
        .ai-widget-container {
            position: fixed;
            bottom: 28px;
            right: 28px;
            z-index: 9999;
            display: flex;
            align-items: flex-end;
            gap: 12px;
            pointer-events: none;
        }
        .ai-widget-container > * {
            pointer-events: auto;
        }

        /* ========================================
           3D BOT CHARACTER
        ======================================== */
        .ai-bot-3d {
            position: relative;
            width: 80px;
            height: 120px;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            animation: botIdle 4s ease-in-out infinite;
            transform-style: preserve-3d;
        }
        .ai-bot-3d:hover {
            transform: scale(1.08) translateY(-4px);
            animation-play-state: paused;
        }

        .bot-head {
            position: absolute;
            bottom: 55px;
            left: 50%;
            transform: translateX(-50%);
            width: 55px;
            height: 55px;
            background: linear-gradient(145deg, #667eea 0%, #764ba2 100%);
            border-radius: 50% 50% 48% 52%;
            box-shadow: 
                0 8px 24px rgba(102, 126, 234, 0.4),
                inset 0 -3px 8px rgba(0, 0, 0, 0.3),
                inset 0 3px 8px rgba(255, 255, 255, 0.2);
            animation: headBob 3s ease-in-out infinite;
        }

        .bot-antenna {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 15px;
            background: linear-gradient(180deg, #667eea, transparent);
        }
        .bot-antenna::after {
            content: '';
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background: #00f2ff;
            border-radius: 50%;
            box-shadow: 0 0 12px #00f2ff;
            animation: antennaPulse 2s ease-in-out infinite;
        }

        .bot-eyes {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            gap: 12px;
        }
        .bot-eye {
            width: 10px;
            height: 10px;
            background: #00f2ff;
            border-radius: 50%;
            box-shadow: 
                0 0 8px #00f2ff,
                0 0 16px rgba(0, 242, 255, 0.5);
            animation: eyeBlink 6s ease-in-out infinite;
        }

        .bot-mouth {
            position: absolute;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 8px;
            border: 2px solid #00f2ff;
            border-top: none;
            border-radius: 0 0 10px 10px;
            opacity: 0.7;
        }

        .bot-body {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 45px;
            height: 35px;
            background: linear-gradient(145deg, #764ba2 0%, #667eea 100%);
            border-radius: 8px;
            box-shadow: 
                0 6px 16px rgba(102, 126, 234, 0.3),
                inset 0 -2px 6px rgba(0, 0, 0, 0.2);
        }
        .bot-body::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 6px;
            height: 6px;
            background: #00f2ff;
            border-radius: 50%;
            box-shadow: 0 0 8px #00f2ff;
        }

        .bot-arm {
            position: absolute;
            top: 5px;
            width: 18px;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
        }
        .bot-arm.left {
            left: -14px;
            transform: rotate(-25deg);
            animation: armWave 3s ease-in-out infinite;
        }
        .bot-arm.right {
            right: -14px;
            transform: rotate(25deg);
            animation: armWave 3s ease-in-out infinite 0.5s;
        }

        .bot-legs {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }
        .bot-leg {
            width: 12px;
            height: 20px;
            background: linear-gradient(180deg, #764ba2, #667eea);
            border-radius: 6px 6px 4px 4px;
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .ai-chat-button {
            width: 68px;
            height: 68px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 
                0 8px 32px rgba(102, 126, 234, 0.5),
                0 0 0 0 rgba(102, 126, 234, 0.7);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }
        .ai-chat-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            transform: translate(-50%, -50%) scale(0);
            transition: transform 0.5s ease;
            border-radius: 50%;
        }
        .ai-chat-button:hover {
            transform: scale(1.12) rotate(5deg);
            box-shadow: 
                0 12px 48px rgba(102, 126, 234, 0.6),
                0 0 0 8px rgba(102, 126, 234, 0.2);
        }
        .ai-chat-button:hover::before {
            transform: translate(-50%, -50%) scale(1.5);
        }

        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 22px;
            height: 22px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            border-radius: 50%;
            border: 3px solid #1a1a2e;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            color: white;
            animation: badgePulse 2s ease-in-out infinite;
        }

        .ai-chat-popup {
            position: fixed;
            bottom: 115px;
            right: 28px;
            width: 380px;
            height: 550px;
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 22px;
            border: 2px solid;
            border-image: linear-gradient(135deg, #667eea, #764ba2, #f093fb) 1;
            box-shadow: 
                0 24px 64px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(102, 126, 234, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            display: none;
            flex-direction: column;
            z-index: 9998;
            opacity: 0;
            transform: translateY(20px) scale(0.95);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .ai-chat-popup.active {
            display: flex;
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .chat-header {
            padding: 20px 24px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
            border-radius: 20px 20px 0 0;
            border-bottom: 1px solid rgba(102, 126, 234, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .chat-avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        .chat-title {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .chat-title h3 {
            color: #ffffff;
            font-size: 16px;
            font-weight: 600;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .chat-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #a0aec0;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            background: #48bb78;
            border-radius: 50%;
            box-shadow: 0 0 8px #48bb78;
            animation: statusPulse 2s ease-in-out infinite;
        }
        .chat-close {
            width: 32px;
            height: 32px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #ffffff;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .chat-close:hover {
            background: rgba(255, 107, 107, 0.2);
            transform: rotate(90deg);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        .chat-messages::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        .chat-messages::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #667eea, #764ba2);
            border-radius: 10px;
        }
        .message {
            display: flex;
            gap: 10px;
            animation: messageSlide 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .message.user {
            flex-direction: row-reverse;
        }
        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }
        .message.ai .message-avatar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        .message.user .message-avatar {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            box-shadow: 0 4px 12px rgba(240, 147, 251, 0.3);
        }
        .message-bubble {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.5;
            font-family: "Inter", "Roboto", -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .message.ai .message-bubble {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
            border: 1px solid rgba(102, 126, 234, 0.3);
            color: #e2e8f0;
            border-radius: 18px 18px 18px 4px;
        }
        
        /* AI Response Formatting Styles */
        /* AI Result Card */
        .message-bubble .ai-result-card {
            margin-bottom: 16px;
            padding: 16px;
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 217, 255, 0.1));
            border: 1px solid rgba(0, 255, 136, 0.4);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.2);
        }
        .message-bubble .ai-result-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }
        .message-bubble .ai-result-header strong {
            color: #00ff88;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .message-bubble .result-value {
            font-size: 24px;
            font-weight: 800;
            color: #00ffa7;
            line-height: 1.2;
        }
        
        /* AI Reasoning Card */
        .message-bubble .ai-reasoning-card {
            margin-top: 16px;
            padding: 16px;
            background: linear-gradient(135deg, rgba(255, 170, 0, 0.1), rgba(255, 200, 0, 0.05));
            border: 1px solid rgba(255, 170, 0, 0.3);
            border-radius: 12px;
        }
        .message-bubble .ai-reasoning-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }
        .message-bubble .ai-reasoning-header strong {
            color: #ffaa00;
            font-size: 14px;
        }
        .message-bubble .reasoning-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .message-bubble .reasoning-list li {
            padding: 10px 14px;
            margin-bottom: 8px;
            background: rgba(255, 170, 0, 0.08);
            border-left: 3px solid rgba(255, 170, 0, 0.5);
            border-radius: 6px;
            color: #e2e8f0;
            line-height: 1.7;
            transition: all 0.2s ease;
        }
        .message-bubble .reasoning-list li:hover {
            background: rgba(255, 170, 0, 0.12);
            transform: translateX(4px);
        }
        .message-bubble .reasoning-list li:last-child {
            margin-bottom: 0;
        }
        
        /* AI Field Cards */
        .message-bubble .ai-field-card {
            margin-top: 16px;
            padding: 14px;
            background: rgba(15, 20, 25, 0.6);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        .message-bubble .ai-field-card:hover {
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }
        .message-bubble .ai-field-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
        }
        .message-bubble .ai-field-header strong {
            color: #9effe0;
            font-size: 14px;
            flex: 1;
        }
        .message-bubble .ai-icon-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 217, 255, 0.2));
            border: 1px solid rgba(0, 255, 136, 0.4);
            border-radius: 8px;
            font-size: 16px;
            flex-shrink: 0;
        }
        .message-bubble .ai-badge-count {
            padding: 4px 10px;
            background: rgba(0, 217, 255, 0.2);
            color: #00d9ff;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        .message-bubble .ai-field-content {
            color: #e2e8f0;
            line-height: 1.6;
            padding: 8px 0;
        }
        
        /* Field Lists */
        .message-bubble .field-list {
            margin-top: 8px;
            padding: 0;
            list-style: none;
        }
        .message-bubble .field-item {
            padding: 10px 12px;
            margin-bottom: 6px;
            background: rgba(0, 255, 180, 0.06);
            border-left: 2px solid rgba(0, 255, 180, 0.4);
            border-radius: 6px;
            color: #cbd5e1;
            line-height: 1.6;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }
        .message-bubble .field-item:last-child {
            margin-bottom: 0;
        }
        .message-bubble .item-number {
            color: #00ffa7;
            font-weight: 700;
            flex-shrink: 0;
        }
        
        /* Object Container */
        .message-bubble .object-container {
            margin-top: 10px;
            padding: 12px;
            background: rgba(0, 255, 180, 0.05);
            border-left: 3px solid rgba(0, 255, 180, 0.4);
            border-radius: 8px;
        }
        .message-bubble .object-container.nested {
            margin-left: 12px;
            background: rgba(0, 255, 180, 0.03);
        }
        .message-bubble .object-field-item {
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
        }
        .message-bubble .object-field-item:last-child {
            margin-bottom: 0;
        }
        .message-bubble .object-field-label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }
        .message-bubble .object-field-label strong {
            color: #00ffa7;
            font-size: 13px;
            flex: 1;
        }
        .message-bubble .mini-icon {
            font-size: 14px;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 255, 136, 0.15);
            border-radius: 4px;
            flex-shrink: 0;
        }
        .message-bubble .mini-badge {
            padding: 2px 8px;
            background: rgba(0, 217, 255, 0.2);
            color: #00d9ff;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 600;
        }
        .message-bubble .object-field-value {
            color: #e2e8f0;
            padding-left: 28px;
            line-height: 1.6;
        }
        .message-bubble .nested-list {
            margin-top: 8px;
            padding-left: 0;
            list-style: none;
        }
        .message-bubble .nested-item {
            padding: 8px 10px;
            margin-bottom: 4px;
            color: #cbd5e1;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            line-height: 1.6;
        }
        .message-bubble .item-bullet {
            color: #00ffa7;
            font-weight: 700;
            flex-shrink: 0;
        }
        .message-bubble .object-empty,
        .message-bubble .object-nested-too-deep,
        .message-bubble .object-error {
            padding: 8px;
            color: #9fb3c8;
            font-style: italic;
        }
        .message-bubble .ai-error {
            color: #ff6b6b;
            padding: 8px;
            background: rgba(255, 107, 107, 0.1);
            border-left: 3px solid #ff6b6b;
            border-radius: 4px;
        }
        .message-bubble .ai-error a {
            color: #ffd93d;
            text-decoration: underline;
        }
        .message-bubble code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #00ffa7;
        }
        .message-bubble pre {
            background: rgba(0, 0, 0, 0.4);
            padding: 12px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 8px 0;
        }
        .message-bubble pre code {
            background: none;
            padding: 0;
            color: #e2e8f0;
        }
        
        /* Text Content Styling */
        .message-bubble .ai-text-content {
            line-height: 1.8;
            color: #e2e8f0;
            font-family: "Inter", "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }
        .message-bubble .ai-text-header {
            color: #00ff88;
            font-size: 18px;
            font-weight: 700;
            margin: 16px 0 12px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid rgba(0, 255, 136, 0.3);
        }
        .message-bubble .ai-text-subheader {
            color: #00d9ff;
            font-size: 16px;
            font-weight: 600;
            margin: 14px 0 10px 0;
        }
        .message-bubble .ai-text-list {
            margin: 12px 0;
            padding-left: 24px;
            list-style: none;
        }
        .message-bubble .ai-text-list li {
            padding: 6px 0;
            color: #cbd5e1;
            position: relative;
            line-height: 1.7;
        }
        .message-bubble .ai-text-list li:before {
            content: "‚ñ∏ ";
            color: #00ffa7;
            font-weight: bold;
            position: absolute;
            left: -20px;
        }
        .message-bubble .ai-bold {
            color: #9effe0;
            font-weight: 600;
        }
        .message-bubble .ai-italic {
            color: #00d9ff;
            font-style: italic;
        }
        .message-bubble .ai-code-block {
            background: rgba(0, 0, 0, 0.5);
            padding: 14px;
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 136, 0.2);
            overflow-x: auto;
            margin: 12px 0;
        }
        .message-bubble .ai-inline-code {
            background: rgba(0, 255, 136, 0.15);
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #00ffa7;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        
        /* AI Response Card Styling */
        .message-bubble .ai-response-card {
            background: rgba(0, 255, 136, 0.05);
            border: 1px solid rgba(0, 255, 136, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
        }
        .message-bubble .ai-response-content {
            line-height: 1.8;
            color: #e2e8f0;
            font-family: "Inter", "Roboto", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }
        .message-bubble .ai-response-content p {
            margin: 12px 0;
            color: #e2e8f0;
        }
        .message-bubble .ai-response-content p:first-child {
            margin-top: 0;
        }
        .message-bubble .ai-response-content p:last-child {
            margin-bottom: 0;
        }
        
        .message.user .message-bubble {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #ffffff;
            border-radius: 18px 18px 4px 18px;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
        }

        .chat-input-container {
            padding: 16px 20px 20px;
            background: rgba(26, 26, 46, 0.8);
            border-top: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 0 0 20px 20px;
        }
        .chat-input-wrapper {
            display: flex;
            gap: 10px;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 16px;
            padding: 4px 4px 4px 16px;
            transition: all 0.3s ease;
        }
        .chat-input-wrapper:focus-within {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }
        .chat-input {
            flex: 1;
            border: none;
            background: transparent;
            color: #ffffff;
            font-size: 14px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            outline: none;
            padding: 10px 0;
        }
        .chat-input::placeholder {
            color: #718096;
        }
        .chat-send-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 12px;
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            flex-shrink: 0;
        }
        .chat-send-btn:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }
        .chat-send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .typing-indicator {
            display: none;
            gap: 4px;
            padding: 12px 16px;
        }
        .typing-indicator.active {
            display: flex;
        }
        .typing-dot {
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out;
        }
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes botIdle {
            0%, 100% { transform: rotate(0deg) translateY(0); }
            25% { transform: rotate(-2deg) translateY(-2px); }
            75% { transform: rotate(2deg) translateY(-2px); }
        }
        @keyframes headBob {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-3px); }
        }
        @keyframes eyeBlink {
            0%, 96%, 100% { transform: scaleY(1); }
            98% { transform: scaleY(0.1); }
        }
        @keyframes antennaPulse {
            0%, 100% { opacity: 1; transform: translateX(-50%) scale(1); }
            50% { opacity: 0.6; transform: translateX(-50%) scale(1.3); }
        }
        @keyframes armWave {
            0%, 100% { transform: rotate(-25deg); }
            50% { transform: rotate(-35deg); }
        }
        @keyframes badgePulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(238, 90, 111, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 0 6px rgba(238, 90, 111, 0); }
        }
        @keyframes statusPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        @media (max-width: 480px) {
            .ai-chat-popup {
                width: calc(100vw - 32px);
                height: calc(100vh - 140px);
                right: 16px;
                bottom: 100px;
            }
            .ai-widget-container {
                bottom: 20px;
                right: 20px;
            }
            .ai-bot-3d {
                width: 70px;
                height: 100px;
            }
            .ai-chat-button {
                width: 60px;
                height: 60px;
                font-size: 28px;
            }
        }
    </style>

    <!-- HTML STRUCTURE -->
    <div class="ai-widget-container">
        <!-- 3D Bot Character -->
        <div class="ai-bot-3d" id="aiBot">
            <div class="bot-head">
                <div class="bot-antenna"></div>
                <div class="bot-eyes">
                    <div class="bot-eye"></div>
                    <div class="bot-eye"></div>
                </div>
                <div class="bot-mouth"></div>
                <div class="bot-body">
                    <div class="bot-arm left"></div>
                    <div class="bot-arm right"></div>
                </div>
            </div>
            <div class="bot-legs">
                <div class="bot-leg"></div>
                <div class="bot-leg"></div>
            </div>
        </div>

        <!-- Floating Chat Button -->
        <button class="ai-chat-button" id="chatButton">
            ü§ñ
            <span class="notification-badge" id="notificationBadge" style="display: none;">3</span>
        </button>
    </div>

    <!-- Chat Popup -->
    <div class="ai-chat-popup" id="chatPopup">
        <!-- Header -->
        <div class="chat-header">
            <div class="chat-header-info">
                <div class="chat-avatar">ü§ñ</div>
                <div class="chat-title">
                    <h3>RISKCAST AI Assistant</h3>
                    <div class="chat-status">
                        <span class="status-dot"></span>
                        <span>Online</span>
                    </div>
                </div>
            </div>
            <button class="chat-close" id="chatClose">‚úï</button>
        </div>

        <!-- Messages Container -->
        <div class="chat-messages" id="chatMessages">
            <div class="message ai">
                <div class="message-avatar">ü§ñ</div>
                <div class="message-bubble">
                    Xin ch√†o! T√¥i l√† RISKCAST AI Assistant. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n ph√¢n t√≠ch r·ªßi ro logistics. üëã
                </div>
            </div>
            <div class="message ai">
                <div class="message-avatar">ü§ñ</div>
                <div class="message-bubble">
                    B·∫°n c√≥ th·ªÉ h·ªèi t√¥i v·ªÅ b·∫•t k·ª≥ ƒëi·ªÅu g√¨ li√™n quan ƒë·∫øn r·ªßi ro v·∫≠n t·∫£i, b·∫£o hi·ªÉm, ESG, ho·∫∑c khuy·∫øn ngh·ªã tuy·∫øn ƒë∆∞·ªùng!
                </div>
            </div>
        </div>

        <!-- Input Container -->
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <input 
                    type="text" 
                    class="chat-input" 
                    id="chatInput" 
                    placeholder="Nh·∫≠p tin nh·∫Øn..."
                    autocomplete="off"
                >
                <button class="chat-send-btn" id="sendButton">‚û§</button>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // DOM ELEMENTS
        // ========================================
        const chatButton = document.getElementById('chatButton');
        const aiBot = document.getElementById('aiBot');
        const chatPopup = document.getElementById('chatPopup');
        const chatClose = document.getElementById('chatClose');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const chatMessages = document.getElementById('chatMessages');
        const notificationBadge = document.getElementById('notificationBadge');

        // ========================================
        // OPEN/CLOSE CHAT POPUP
        // ========================================
        function openChat() {
            chatPopup.classList.add('active');
            chatInput.focus();
            if (notificationBadge) {
                notificationBadge.style.display = 'none';
            }
        }

        function closeChat() {
            chatPopup.classList.remove('active');
        }

        if (chatButton) chatButton.addEventListener('click', openChat);
        if (aiBot) aiBot.addEventListener('click', openChat);
        if (chatClose) chatClose.addEventListener('click', closeChat);

        // ========================================
        // BOT HOVER EFFECT
        // ========================================
        if (aiBot) {
            aiBot.addEventListener('mousemove', (e) => {
                const rect = aiBot.getBoundingClientRect();
                const botCenterX = rect.left + rect.width / 2;
                const botCenterY = rect.top + rect.height / 2;
                
                const deltaX = e.clientX - botCenterX;
                const deltaY = e.clientY - botCenterY;
                
                const angle = Math.atan2(deltaY, deltaX);
                const rotation = (angle * 180 / Math.PI) / 10;
                
                const head = aiBot.querySelector('.bot-head');
                if (head) {
                    head.style.transform = `translateX(-50%) rotate(${rotation}deg)`;
                }
            });

            aiBot.addEventListener('mouseleave', () => {
                const head = aiBot.querySelector('.bot-head');
                if (head) {
                    head.style.transform = 'translateX(-50%) rotate(0deg)';
                }
            });
        }

        // ========================================
        // FORMAT AI RESPONSE (Parse JSON and format nicely)
        // ========================================
        function formatAIResponse(text) {
            if (!text) return '';
            
            // Try to parse as JSON
            try {
                // First, try to parse the entire text as JSON
                try {
                    const parsed = JSON.parse(text);
                    return formatParsedJSON(parsed);
                } catch (e) {
                    // Not a complete JSON, try to find JSON objects in the text
                    const jsonMatches = text.match(/\{[\s\S]*?\}/g);
                    if (jsonMatches && jsonMatches.length > 0) {
                        // Try to parse the largest JSON match (most likely to be complete)
                        const sortedMatches = jsonMatches.sort((a, b) => b.length - a.length);
                        for (const jsonStr of sortedMatches) {
                            try {
                                const parsed = JSON.parse(jsonStr);
                                if (typeof parsed === 'object' && parsed !== null && !Array.isArray(parsed)) {
                                    return formatParsedJSON(parsed);
                                }
                            } catch (e) {
                                // Not valid JSON, skip
                                continue;
                            }
                        }
                    }
                }
            } catch (e) {
                console.error('Error parsing JSON:', e);
                // Fall through to text formatting
            }
            
            // Format as markdown-like text, but also try to format any [object Object] references
            let formattedText = formatTextResponse(text);
            
            // Replace [object Object] with a note
            formattedText = formattedText.replace(/\[object Object\]/g, '<em style="color: #ffaa00;">[D·ªØ li·ªáu ƒë·ªëi t∆∞·ª£ng - c·∫ßn ƒë·ªãnh d·∫°ng]</em>');
            
            return formattedText;
        }
        
        function formatParsedJSON(parsed) {
            try {
                let html = '';
                
                // Format result if exists
                if (parsed.result !== undefined) {
                    html += `<div class="ai-result-card">
                        <div class="ai-result-header">
                            <span class="ai-icon-badge">‚úì</span>
                            <strong>K·∫øt qu·∫£</strong>
                        </div>
                        <div class="result-value">${escapeHtml(String(parsed.result))}</div>
                    </div>`;
                }
                
                // Format reasoning if exists
                if (parsed.reasoning && Array.isArray(parsed.reasoning)) {
                    html += `<div class="ai-reasoning-card">
                        <div class="ai-reasoning-header">
                            <span class="ai-icon-badge">üí°</span>
                            <strong>Gi·∫£i th√≠ch</strong>
                        </div>
                        <ul class="reasoning-list">`;
                    parsed.reasoning.forEach((item) => {
                        html += `<li>${escapeHtml(String(item))}</li>`;
                    });
                    html += '</ul></div>';
                }
                
                // Format response field specially (main AI response)
                if (parsed.response !== undefined && typeof parsed.response === 'string') {
                    html += `<div class="ai-response-card">
                        <div class="ai-response-content">
                            ${formatTextResponse(parsed.response)}
                        </div>
                    </div>`;
                }
                
                // Format other fields
                for (const [key, value] of Object.entries(parsed)) {
                    if (key !== 'result' && key !== 'reasoning' && key !== 'response') {
                        html += formatField(key, value);
                    }
                }
                
                return html || formatTextResponse(JSON.stringify(parsed, null, 2));
            } catch (e) {
                console.error('Error formatting parsed JSON:', e);
                return formatTextResponse(JSON.stringify(parsed, null, 2));
            }
        }
        
        function formatTextResponse(text) {
            if (!text) return '';
            
            // Escape HTML first
            let html = escapeHtml(text);
            
            // Format headers (## Header)
            html = html.replace(/^##\s+(.+)$/gm, '<h3 class="ai-text-header">$1</h3>');
            html = html.replace(/^###\s+(.+)$/gm, '<h4 class="ai-text-subheader">$1</h4>');
            
            // Format code blocks
            html = html.replace(/```(\w+)?\n([\s\S]*?)```/g, '<pre class="ai-code-block"><code>$2</code></pre>');
            
            // Format inline code
            html = html.replace(/`([^`]+)`/g, '<code class="ai-inline-code">$1</code>');
            
            // Format bold
            html = html.replace(/\*\*([^*]+)\*\*/g, '<strong class="ai-bold">$1</strong>');
            
            // Format italic
            html = html.replace(/\*([^*]+)\*/g, '<em class="ai-italic">$1</em>');
            
            // Format lists - improved
            const lines = html.split('\n');
            let formattedLines = [];
            let inList = false;
            let listItems = [];
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const listMatch = line.match(/^\s*[-*+]\s+(.+)$/);
                const numMatch = line.match(/^\s*\d+\.\s+(.+)$/);
                
                if (listMatch || numMatch) {
                    if (!inList) {
                        inList = true;
                        listItems = [];
                    }
                    listItems.push(`<li>${listMatch ? listMatch[1] : numMatch[1]}</li>`);
                } else {
                    if (inList && listItems.length > 0) {
                        formattedLines.push(`<ul class="ai-text-list">${listItems.join('')}</ul>`);
                        listItems = [];
                        inList = false;
                    }
                    formattedLines.push(line);
                }
            }
            
            if (inList && listItems.length > 0) {
                formattedLines.push(`<ul class="ai-text-list">${listItems.join('')}</ul>`);
            }
            
            html = formattedLines.join('\n');
            
            // Format paragraphs (double line breaks = new paragraph)
            // Split by double line breaks first
            const paragraphs = html.split(/\n\s*\n/);
            let formattedParagraphs = [];
            
            for (let para of paragraphs) {
                para = para.trim();
                if (!para) continue;
                
                // Check if paragraph contains list or header (already formatted)
                if (para.includes('<ul') || para.includes('<h3') || para.includes('<h4') || para.includes('<pre')) {
                    formattedParagraphs.push(para);
                } else {
                    // Regular paragraph - replace single line breaks with <br> and wrap in <p>
                    para = para.replace(/\n/g, '<br>');
                    formattedParagraphs.push(`<p>${para}</p>`);
                }
            }
            
            html = formattedParagraphs.join('\n\n');
            
            // Wrap in container for better styling
            return `<div class="ai-text-content">${html}</div>`;
        }
        
        function formatField(key, value) {
            try {
                let html = '';
                const fieldName = formatFieldName(key);
                const icon = getFieldIcon(key);
                
                // Handle null/undefined
                if (value === null || value === undefined) {
                    return `<div class="ai-field-card empty">
                        <div class="ai-field-header">
                            <span class="ai-icon-badge">${icon}</span>
                            <strong>${escapeHtml(fieldName)}</strong>
                        </div>
                        <div class="ai-field-content"><em>Kh√¥ng c√≥ d·ªØ li·ªáu</em></div>
                    </div>`;
                }
                
                // Handle arrays
                if (Array.isArray(value)) {
                    html += `<div class="ai-field-card list-field">
                        <div class="ai-field-header">
                            <span class="ai-icon-badge">${icon}</span>
                            <strong>${escapeHtml(fieldName)}</strong>
                            <span class="ai-badge-count">${value.length} m·ª•c</span>
                        </div>
                        <ul class="field-list">`;
                    value.forEach((item, index) => {
                        if (typeof item === 'object' && item !== null) {
                            html += `<li class="field-item"><span class="item-number">${index + 1}.</span>${formatObject(item, true, 0)}</li>`;
                        } else {
                            html += `<li class="field-item"><span class="item-number">${index + 1}.</span>${escapeHtml(String(item))}</li>`;
                        }
                    });
                    html += '</ul></div>';
                    return html;
                }
                
                // Handle objects
                if (typeof value === 'object') {
                    html += `<div class="ai-field-card object-field">
                        <div class="ai-field-header">
                            <span class="ai-icon-badge">${icon}</span>
                            <strong>${escapeHtml(fieldName)}</strong>
                        </div>`;
                    html += formatObject(value, false, 0);
                    html += '</div>';
                    return html;
                }
                
                // Handle primitive values
                html += `<div class="ai-field-card simple-field">
                    <div class="ai-field-header">
                        <span class="ai-icon-badge">${icon}</span>
                        <strong>${escapeHtml(fieldName)}</strong>
                    </div>
                    <div class="ai-field-content">${escapeHtml(String(value))}</div>
                </div>`;
                return html;
            } catch (e) {
                console.error('Error formatting field:', key, e);
                return `<div class="ai-field-card error">
                    <div class="ai-field-header">
                        <span class="ai-icon-badge">‚ö†</span>
                        <strong>${escapeHtml(String(key))}</strong>
                    </div>
                    <div class="ai-field-content"><em>L·ªói khi format</em></div>
                </div>`;
            }
        }
        
        function getFieldIcon(key) {
            const iconMap = {
                'main_risk_drivers': '‚ö†Ô∏è',
                'risk_impact_quantification': 'üìä',
                'route_recommendations': 'üó∫Ô∏è',
                'insurance_guidance': 'üõ°Ô∏è',
                'esg_advisory': 'üå±',
                'delay_probability_prediction': '‚è±Ô∏è',
                'risk_drivers': '‚ö†Ô∏è',
                'impact': 'üí•',
                'recommendations': 'üí°',
                'coverage': 'üìã',
                'limits': 'üìè',
                'opportunities': '‚ú®',
                'probability': 'üìà',
                'mitigation': 'üîß',
                'summary': 'üìù',
                'analysis': 'üîç',
                'conclusion': '‚úÖ'
            };
            return iconMap[key] || 'üìå';
        }
        
        function formatObject(obj, isListItem = false, depth = 0) {
            // Prevent infinite recursion
            if (depth > 5) {
                return '<div class="object-nested-too-deep"><em>[Nested qu√° s√¢u]</em></div>';
            }
            
            if (!obj || typeof obj !== 'object') {
                return escapeHtml(String(obj));
            }
            
            // Handle arrays
            if (Array.isArray(obj)) {
                let html = '<ul class="nested-list">';
                obj.forEach((item, index) => {
                    if (typeof item === 'object' && item !== null) {
                        html += `<li class="nested-item"><span class="item-bullet">${index + 1}.</span>${formatObject(item, true, depth + 1)}</li>`;
                    } else {
                        html += `<li class="nested-item"><span class="item-bullet">${index + 1}.</span>${escapeHtml(String(item))}</li>`;
                    }
                });
                html += '</ul>';
                return html;
            }
            
            let html = '';
            
            // Check if it's a simple key-value object
            const keys = Object.keys(obj);
            if (keys.length === 0) {
                return '<div class="object-empty"><em>Kh√¥ng c√≥ d·ªØ li·ªáu</em></div>';
            }
            
            // Format as structured list
            html += `<div class="object-container ${isListItem ? 'nested' : ''}">`;
            
            try {
                for (const [k, v] of Object.entries(obj)) {
                    const displayKey = formatFieldName(k);
                    const icon = getFieldIcon(k);
                    
                    if (v === null || v === undefined) {
                        html += `<div class="object-field-item">
                            <div class="object-field-label">
                                <span class="mini-icon">${icon}</span>
                                <strong>${escapeHtml(displayKey)}</strong>
                            </div>
                            <div class="object-field-value"><em>Kh√¥ng c√≥ d·ªØ li·ªáu</em></div>
                        </div>`;
                    } else if (Array.isArray(v)) {
                        html += `<div class="object-field-item">
                            <div class="object-field-label">
                                <span class="mini-icon">${icon}</span>
                                <strong>${escapeHtml(displayKey)}</strong>
                                <span class="mini-badge">${v.length}</span>
                            </div>
                            <ul class="nested-list">`;
                        v.forEach((item, idx) => {
                            if (typeof item === 'object' && item !== null) {
                                html += `<li class="nested-item"><span class="item-bullet">${idx + 1}.</span>${formatObject(item, true, depth + 1)}</li>`;
                            } else {
                                html += `<li class="nested-item"><span class="item-bullet">${idx + 1}.</span>${escapeHtml(String(item))}</li>`;
                            }
                        });
                        html += '</ul></div>';
                    } else if (typeof v === 'object') {
                        html += `<div class="object-field-item nested-object">
                            <div class="object-field-label">
                                <span class="mini-icon">${icon}</span>
                                <strong>${escapeHtml(displayKey)}</strong>
                            </div>`;
                        html += formatObject(v, true, depth + 1);
                        html += '</div>';
                    } else {
                        html += `<div class="object-field-item">
                            <div class="object-field-label">
                                <span class="mini-icon">${icon}</span>
                                <strong>${escapeHtml(displayKey)}</strong>
                            </div>
                            <div class="object-field-value">${escapeHtml(String(v))}</div>
                        </div>`;
                    }
                }
            } catch (e) {
                console.error('Error formatting object:', e);
                html += '<div class="object-error"><em>L·ªói khi format d·ªØ li·ªáu</em></div>';
            }
            
            html += '</div>';
            return html;
        }
        
        function formatFieldName(key) {
            // Convert snake_case or camelCase to readable format
            const nameMap = {
                'main_risk_drivers': 'C√°c Y·∫øu T·ªë R·ªßi Ro Ch√≠nh',
                'risk_impact_quantification': 'ƒê·ªãnh L∆∞·ª£ng T√°c ƒê·ªông R·ªßi Ro',
                'route_recommendations': 'Khuy·∫øn Ngh·ªã Tuy·∫øn ƒê∆∞·ªùng',
                'insurance_guidance': 'H∆∞·ªõng D·∫´n B·∫£o Hi·ªÉm',
                'esg_advisory': 'T∆∞ V·∫•n ESG',
                'delay_probability_prediction': 'D·ª± ƒêo√°n X√°c Su·∫•t Tr·ªÖ',
                'risk_drivers': 'Y·∫øu T·ªë R·ªßi Ro',
                'impact': 'T√°c ƒê·ªông',
                'recommendations': 'Khuy·∫øn Ngh·ªã',
                'coverage': 'Ph·∫°m Vi B·∫£o Hi·ªÉm',
                'limits': 'Gi·ªõi H·∫°n',
                'opportunities': 'C∆° H·ªôi',
                'probability': 'X√°c Su·∫•t',
                'mitigation': 'Gi·∫£m Thi·ªÉu'
            };
            
            if (nameMap[key]) {
                return nameMap[key];
            }
            
            // Convert snake_case to Title Case
            return key
                .replace(/_/g, ' ')
                .replace(/\b\w/g, l => l.toUpperCase());
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // ========================================
        // SEND MESSAGE FUNCTION (Real API)
        // ========================================
        // Get context from current page data
        function getCurrentContext() {
            const context = {};
            
            // Try to get risk data from window object
            if (window.riskData && typeof window.riskData === 'object') {
                context.shipment_data = window.riskData;
            }
            
            // Try to get current risk metrics from page
            const overallRisk = document.getElementById('overall-risk-index')?.textContent;
            const expectedLoss = document.getElementById('expected-loss')?.textContent;
            const reliability = document.getElementById('reliability-score')?.textContent;
            
            if (overallRisk && overallRisk !== '--') {
                context.current_metrics = {
                    overall_risk: overallRisk,
                    expected_loss: expectedLoss || 'N/A',
                    reliability: reliability || 'N/A'
                };
            }
            
            // Try to get route information
            const routeChip = document.getElementById('routeChip')?.textContent;
            if (routeChip && routeChip !== 'ƒêang t·∫£i d·ªØ li·ªáu‚Ä¶') {
                context.route = routeChip;
            }
            
            return context;
        }
        
        async function sendMessage() {
            const messageText = chatInput.value.trim();
            
            if (!messageText) return;

            addMessage(messageText, 'user');
            chatInput.value = '';
            sendButton.disabled = true;
            showTypingIndicator();
            
            // Get context from current page
            const context = getCurrentContext();
            
            try {
                const response = await fetch('/api/ai/stream', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        prompt: messageText, 
                        context: context 
                    })
                });

                if (!response.ok) {
                    // Try to get error details from response
                    let errorDetail = `HTTP error! status: ${response.status}`;
                    try {
                        const errorData = await response.json();
                        if (errorData.detail) {
                            errorDetail = errorData.detail;
                        }
                    } catch (e) {
                        // If response is not JSON, use status text
                        errorDetail = response.statusText || errorDetail;
                    }
                    throw new Error(errorDetail);
                }

                hideTypingIndicator();

                const aiMessageDiv = document.createElement('div');
                aiMessageDiv.className = 'message ai';
                const aiAvatar = document.createElement('div');
                aiAvatar.className = 'message-avatar';
                aiAvatar.textContent = 'ü§ñ';
                const aiBubble = document.createElement('div');
                aiBubble.className = 'message-bubble';
                aiBubble.innerHTML = '';
                aiMessageDiv.appendChild(aiAvatar);
                aiMessageDiv.appendChild(aiBubble);
                chatMessages.appendChild(aiMessageDiv);

                const reader = response.body.getReader();
                const decoder = new TextDecoder();
                let fullText = '';

                while (true) {
                    const { done, value } = await reader.read();
                    if (done) break;

                    const chunk = decoder.decode(value, { stream: true });
                    const lines = chunk.split('\n');

                    for (const line of lines) {
                        if (!line.trim()) continue;

                        if (line.startsWith('data: ')) {
                            const data = line.slice(6);
                            
                            if (data === '[DONE]') break;

                            try {
                                const parsed = JSON.parse(data);
                                if (parsed.text) {
                                    fullText += parsed.text;
                                    // Format and display the text
                                    aiBubble.innerHTML = formatAIResponse(fullText);
                                    scrollToBottom();
                                } else if (parsed.error) {
                                    // Show user-friendly error message
                                    const errorMsg = parsed.error;
                                    if (errorMsg.includes('Invalid API key') || errorMsg.includes('authentication_error') || errorMsg.includes('401')) {
                                        aiBubble.innerHTML = '<div class="ai-error">‚ùå L·ªói x√°c th·ª±c: API key kh√¥ng h·ª£p l·ªá. Vui l√≤ng ki·ªÉm tra file .env v√† c·∫≠p nh·∫≠t ANTHROPIC_API_KEY. L·∫•y key m·ªõi t·∫°i: <a href="https://console.anthropic.com/" target="_blank">https://console.anthropic.com/</a></div>';
                                    } else {
                                        aiBubble.innerHTML = `<div class="ai-error">‚ùå L·ªói: ${escapeHtml(errorMsg)}</div>`;
                                    }
                                    scrollToBottom();
                                    break; // Stop processing on error
                                }
                            } catch (e) {
                                if (data !== '[DONE]') {
                                    fullText += data;
                                    aiBubble.innerHTML = formatAIResponse(fullText);
                                    scrollToBottom();
                                }
                            }
                        } else {
                            fullText += line;
                            aiBubble.innerHTML = formatAIResponse(fullText);
                            scrollToBottom();
                        }
                    }
                }

            } catch (error) {
                console.error('Error sending message:', error);
                hideTypingIndicator();
                
                // Try to get error details from response
                let errorMessage = 'Xin l·ªói, ƒë√£ x·∫£y ra l·ªói khi k·∫øt n·ªëi v·ªõi AI. Vui l√≤ng th·ª≠ l·∫°i sau.';
                
                if (error.message) {
                    if (error.message.includes('500')) {
                        errorMessage = 'L·ªói server: Vui l√≤ng ki·ªÉm tra c·∫•u h√¨nh ANTHROPIC_API_KEY trong file .env';
                    } else if (error.message.includes('ANTHROPIC_API_KEY')) {
                        errorMessage = 'L·ªói: ANTHROPIC_API_KEY ch∆∞a ƒë∆∞·ª£c c·∫•u h√¨nh. Vui l√≤ng ki·ªÉm tra file .env';
                    } else {
                        errorMessage = `L·ªói: ${error.message}`;
                    }
                }
                
                addMessage(errorMessage, 'ai');
            } finally {
                sendButton.disabled = false;
            }
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = sender === 'ai' ? 'ü§ñ' : 'üë§';
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            
            // Format AI messages, keep user messages as plain text
            if (sender === 'ai') {
                bubble.innerHTML = formatAIResponse(text);
            } else {
                bubble.textContent = text;
            }
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(bubble);
            chatMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        function showTypingIndicator() {
            const indicator = document.createElement('div');
            indicator.className = 'message ai';
            indicator.id = 'typingIndicator';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'ü§ñ';
            
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message-bubble typing-indicator active';
            typingDiv.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
            
            indicator.appendChild(avatar);
            indicator.appendChild(typingDiv);
            chatMessages.appendChild(indicator);
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        function scrollToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        if (sendButton) sendButton.addEventListener('click', sendMessage);
        if (chatInput) {
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
        }

        if (chatPopup) {
            chatPopup.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        }
    </script>

    <script>
        // === RISKCAST FIX === All data management is now handled by ResultsCore

        // This script only initializes ResultsCore.init() on DOMContentLoaded

        

        document.addEventListener("DOMContentLoaded", () => {

            console.log("üî• Inline script loaded");

            if (window.ResultsCore) {

                console.log("üî• ResultsCore found ‚Üí INIT()");

                window.ResultsCore.init();

                } else {

                console.error("ResultsCore missing!");

            }

        });

    </script>

    <script src="/static/js/results.js"></script>
</body>
</html>